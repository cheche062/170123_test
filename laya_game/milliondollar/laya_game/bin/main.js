!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=20)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(4),a=function(t){return t&&t.__esModule?t:{default:t}}(o),r={};r.log=function(){var t;a.default.debug&&window.console&&(t=window.console).log.apply(t,arguments)},r.warn=function(){var t;a.default.debug&&window.console&&(t=window.console).warn.apply(t,arguments)},r.info=function(){var t;a.default.debug&&window.console&&(t=window.console).info.apply(t,arguments)},r.initDebug=function(t,e){var n=location.search.slice(1).split("&"),i=!1;return n.forEach(function(n){var o=n.split("=");o[0]===t&&o[1]===e&&(i=!0)}),i},r.randomNumber=function(t,e){var n=t,i=e;return void 0===e&&(n=0,i=t),Math.round(Math.random()*(i-n)+n)},r.gotoLogin=function(){location.href=GM.userLoginUrl},r.checkLoginStatus=function(){return a.default.localStatus||window.token&&GM.userLogged},r.otpCheckHandler=function(){location.href="/?act=otp&st=otpPage"},r.willGotoLogin=function(){if(!r.checkLoginStatus())return r.gotoLogin(),!0},r.checkOtherYxb=function(){window.GM&&GM.whereYxb&&GM.whereYxb()},r.getStringLength=function(){return(""+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/[^\x00-\xff]/gi,"ox")).length},r.getActiveStr=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=0;t=String(t);var i=t.length,o="";if(0===i)return"";for(var a=0;a<i;a++){if(t.charCodeAt(a)>128?n+=2:n+=1,n>e)return o+"...";o+=t.charAt(a)}return o},r.extendDeep=function(t,e){var e=e||{},n=Object.prototype.toString;for(var o in t)t.hasOwnProperty(o)&&("object"===("undefined"==typeof _val?"undefined":i(_val))?(e[o]="[object Array]"===n.call(t[o])?[]:{},extendDeep(t[o],e[o])):e[o]=t[o]);return e},r.runningTime=function(t){var e=Date.now();t();var n=Date.now();console.log(n-e)},r.getCookie=function(t){var e=encodeURIComponent(t)+"=",n=document.cookie.indexOf(e),i=null;if(n>-1){var o=document.cookie.indexOf(";",n);-1==o&&(o=document.cookie.length),i=decodeURIComponent(document.cookie.substring(n+e.length,o))}return i},r.setCookie=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7,i=new Date;i.setTime(i.getTime()+24*n*60*1e3);var o="expires="+i.toUTCString();document.cookie=t+"="+e+";"+o},r.clearCookie=function(t){r.setCookie(t,"",-1)},r.addSubHandler=function(t,e,n,i,o){return"sub"===t?o<=1e3?e*=-1:o>1e3&&o<=1e4?(e=-1e3,o<2e3&&(e=-250)):o>1e4&&o<=1e5?(e=-1e4,o<2e4&&(e=-1e3)):o>1e5&&o<=1e6&&(e=-1e5,o<2e5&&(e=-1e4)):"add"===t&&(o>=1e3&&o<1e4?e=1e3:o>=1e4&&o<1e5?e=1e4:o>=1e5&&(e=1e5)),o+=e,o=Math.min(o,i),o=Math.max(o,n)},r.addThousandSymbol=function(t){for(var e=String(t),n="",i=0,o=e.length-1;o>=0;o--)i++,n=e.charAt(o)+n,i%3==0&&0!==o&&(n=","+n);return n},r.toWanSymbol=function(t){var e=Number(t)/1e4;return e>=1?Math.floor(e)+"万":t},r.toDetailTime=function(t){var e=Number(t),n=Math.floor(e/1440/60),i=Math.floor((e-1440*n*60)/3600),o=Math.floor((e-1440*n*60-3600*i)/60),a=e-1440*n*60-3600*i-60*o,r="";return n&&(r+=n+"日"),i&&(r+=i+"时"),o&&(r+=o+"分"),a&&(r+=a+"秒"),r},r.createTimeCountDown=function(){return{start:function(t,e,n){var i=this,o=Number(t);this.loop=function(){--o>0?(e&&e(o),Laya.timer.once(1e3,i,i.loop)):(n&&n(),i.clear())},this.loop()},clear:function(){this.loop&&(Laya.timer.clear(this,this.loop),this.loop=null)}}},e.default=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=y.default.getInstance(t);k.currentScene!==e&&k.loadScene(e)}function a(t){switch(Number(t.code)){case 1003:var e=function(){window.location.reload()};v.disconnectSocket(),_.publish("common::tips","异地登录，请刷新页面",e,e)}}function r(){var t=Laya.stage.height,e=k.currentScene;e&&(e.height=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.sceneManager=e.observer=e.messageCenter=void 0,e.setViewCenter=r;var s=n(4),u=i(s),l=n(0),c=i(l),h=n(3),f=n(24),d=n(25),p=n(26),m=n(7),y=i(m),g={websocketurl:window.websocketurl,lib:void 0===window.Primus?"socketio":"primus",publicKey:void 0===window.publicKey?"":window.publicKey,token:window.token,ajaxUrl:h.AJAX_URL,endCallBack:function(){var t=function(){window.location.reload()};_.publish("common::tips","网络断开，确定后重试。",t),_.publish("game::reset")},unLoginCallBack:function(){c.default.checkLoginStatus()||(o(v),console.log("open~~~未登录。。。"))},logInfo:function(t){"bet"===t.cmd?c.default.log("接收数据：===>",t.cmd,JSON.stringify(t,null,4)):c.default.log("接收数据：===>",t.cmd,t)}};if(u.default.localStatus)for(var b in g.ajaxUrl)g.ajaxUrl[b]=window.DEV_URL+g.ajaxUrl[b];var v=e.messageCenter=new f.MessageCenterModule(g);v.initAction=function(){var t=this;this.registerAction("conn::init",function(){o(t)}),this.registerAction("conn::error",function(t){a(t)})};var _=e.observer=new d.ObserverModule,k=e.sceneManager=new p.SceneManagerModule},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(4),r=function(t){return t&&t.__esModule?t:{default:t}}(a),s=n(3),u=n(1),l=function(){function t(){i(this,t),this.init(),t.instance=this}return o(t,[{key:"init",value:function(){Laya.SoundManager.setMusicVolume(.3),Laya.SoundManager.setSoundVolume(1),u.observer.subscribe("game::voice",this.changeVoiceState.bind(this))}},{key:"initResource",value:function(){var t=this;s.AUDIO_SOURCES.forEach(function(e,n){"bg"!==e&&t.play(e)}),this.stopAllSound()}},{key:"play",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n="audio/"+t+".mp3?v="+r.default.STATIC_VERTION;if(!s.AUDIO_SOURCES.includes(t))return void console.log("没有该资源音效: "+t);"bg"===t?Laya.SoundManager.playMusic(n,0):Laya.SoundManager.playSound(n,e)}},{key:"changeVoiceState",value:function(t){t?this.setMutedNot():this.setMuted()}},{key:"setMuted",value:function(){Laya.SoundManager.muted=!0}},{key:"setMutedNot",value:function(){Laya.SoundManager.muted=!1,this.play("bg")}},{key:"stopBgMusic",value:function(){Laya.SoundManager.stopMusic()}},{key:"stopAllSound",value:function(){Laya.SoundManager.stopAllSound()}}],[{key:"getInstance",value:function(){return this.instance||new this}}]),t}();e.default=l},function(t,e,n){"use strict";function i(){var t=this.initPos,e=this._X,n=this._Y;return[{x:3*e+t.x,y:-2*n+t.y,skewX:-2*e},{x:1*e+t.x,y:-1*n+t.y,skewX:-1*e},{x:0*e+t.x,y:0*n+t.y,skewX:0*e},{x:1*e+t.x,y:1*n+t.y,skewX:1*e},{x:3*e+t.x,y:2*n+t.y,skewX:2*e}]}Object.defineProperty(e,"__esModule",{value:!0}),e.getStateList=i;e.AJAX_URL={day:"/?act=game_millions&st=get_bet_rank&type=day&userId="+userId,week:"/?act=game_millions&st=get_bet_rank&type=week&userId="+userId,month:"?act=game_millions&st=get_bet_rank&type=month&userId="+userId,userAccount:"/?act=game_gamebase&st=queryUserAccount&data=*&gameId="+gameId+"&type=1"},e.DOLLAR_TYPE_LIST=["one","five","ten","twenty","hundred","fiveHundred","baida"],e.STATE_LIST=function(){var t=200;return[{initPos:{x:87,y:t},_X:5,_Y:130},{initPos:{x:286,y:t},_X:3,_Y:130},{initPos:{x:485,y:t},_X:0,_Y:130},{initPos:{x:684,y:t},_X:-3,_Y:130},{initPos:{x:883,y:t},_X:-5,_Y:130}]}(),e.ERROR_TEXT={3:"参数有误",4:"用户正在投币，请勿刷接口",5:"余额不足",6:"平台账号已被禁用",7:"游戏账号已被禁用",8:"服务器开小差了，投币额以欢乐值的形式已退回到您的账号了哟~",18:"本轮押注还未结束，请勿刷接口",21:"游戏维护中，请刷新页面",31:"地球信号不好，请稍后重试~",50:"单笔押注上限",51:"单日押注上限",81:"触发OTP",82:"支付渠道禁用"},e.AUDIO_SOURCES=["bg","btn","btn_add","btn_start","btn_sub","coin","fudai","good","lapa_stop"],e.AUTOPLAY_TIMES=["500","100","25","10","5"],e.DEFAULT_AMOUNT=["500000","100000","10000","5000","1000","250"],e.BASE_RATE=[5,10,30,50],e.LINES_25={1:[0,3,6,9,12],2:[1,4,7,10,13],3:[2,5,8,11,14],4:[0,4,8,10,12],5:[2,4,6,10,14],6:[0,4,6,10,14],7:[2,4,6,10,12],8:[1,5,7,11,13],9:[1,5,7,9,13],10:[2,4,8,10,12],11:[1,3,7,9,13],12:[1,3,7,11,13],13:[0,4,6,10,12],14:[0,4,8,10,14],15:[2,4,8,10,14],16:[0,3,7,9,12],17:[0,3,8,9,12],18:[1,4,6,10,13],19:[1,4,8,10,13],20:[2,5,7,11,14],21:[0,3,6,10,14],22:[1,4,7,11,13],23:[2,4,7,10,12],24:[2,5,6,11,14],25:[2,5,8,10,12]},e.LOSE_LINE=[[1,1,3,2],[1,4,5,6],[1,6,4,4],[1,3,6,1],[1,2,6,6]],e.POS_LINE=[[0,1,2],[3,4,5],[6,7,8],[9,10,11],[12,13,14]]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=function(t){return t&&t.__esModule?t:{default:t}}(i),a=!o.default.initDebug("act","game_millions"),r=a||o.default.initDebug("debugFE","1"),s=window.staticVertion||Date.now(),u={localStatus:a,debug:r,STATIC_VERTION:s,gameWidth:1334,gameHeight:750,screenMode:Laya.Stage.SCREEN_HORIZONTAL,scaleMode:Laya.Stage.SCALE_FIXED_WIDTH,alignH:Laya.Stage.ALIGN_CENTER,alignV:Laya.Stage.ALIGN_MIDDLE,SOUND_STATE_KEY:"sound_"+GM.gameId};e.default=u},function(t,e,n){"use strict";function i(t,e,n){e=e||24,n=n||0;var i=Laya.loader.getRes(t+".png"),o=Laya.loader.getRes(t+".sk");if(!i||!o)return console.error("资源没有预加载:"+t),null;var a=r.indexOf(t),u=void 0;if(-1===a){u=new Laya.Templet;var l=r.length;r[l]=t,s[l]=u,u.parseData(i,o,e)}else u=s[a];return new Laya.Skeleton(u,n)}function o(t,e){Laya.stage.on(Laya.Event.CLICK,this,function(n){if(n){var i=n.target,o=e.getChildAt(0);o&&o.visible&&i!==t&&!e.contains(i)&&(o.visible=!1)}})}function a(t,e,n){var i=this,o=0;t.on(Laya.Event.MOUSE_DOWN,this,function(){o=Date.now(),Laya.timer.once(1e3,i,n)}),t.on(Laya.Event.MOUSE_UP,this,function(){Date.now()-o<1e3&&(Laya.timer.clear(null,n),e())}),t.on(Laya.Event.MOUSE_OUT,this,function(){Laya.timer.clear(null,n)})}Object.defineProperty(e,"__esModule",{value:!0}),e.createSkeleton=i,e.clickOtherAreaHandler=o,e.addLongClickEvent=a;var r=[],s=[];laya.ui.DialogManager.prototype._closeOnSide=function(){if(window.UIConfig.closeDialogOnSide){var t=this.getChildAt(this.numChildren-1);t instanceof laya.ui.Dialog&&t.close("side")}},Laya.Node.prototype.set=function(t){var e=this;return Object.keys(t).forEach(function(n,i){switch(n){case"pos":e.pos(t[n][0],t[n][1]);break;default:e[n]=t[n]}}),e},Laya.Node.prototype.findType=function(t,e){function n(t){for(var e,n=t.split("."),i=0;i<n.length;i++){var o=n[i];if(!(e=0===i?laya.ui[o]||ui[o]||laya.display[o]:e[o]))break}return e}var i=function e(i){var o=[],a=n(t);if(!a)return o;for(var r=0;r<i.numChildren;r++)i.getChildAt(r)instanceof a&&o.push(i.getChildAt(r));for(var r=0;r<i.numChildren;r++)o=o.concat(e(i.getChildAt(r)));return o}(this),o=i.length;return e?i:(0==o?i=null:1==o&&(i=i[0]),i)},Laya.Node.prototype.localToTarget=function(t){for(var e={x:0,y:0},n=this;n&&n!=t&&n!=Laya.stage;)e=n.toParentPoint(e),n=n.parent;return e},Laya.Node.prototype.find=function(t,e){var n=function n(i){var o,a=i._childs,r=[];if(!a)return r;for(var s=0,u=a.length;s<u;s++){var l=a[s];if(l.name===t){if(r.push(l),!0!==e)break}else if(o=n(l),r=r.concat(o),o.length>0&&!0!==e)break}return r}(this),i=n.length;return e?n:(0==i?n=null:1==i&&(n=n[0]),n)}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(1),r=n(3),s=n(21),u=function(t){return t&&t.__esModule?t:{default:t}}(s),l=function(){function t(){i(this,t),t.instance=this}return o(t,[{key:"registerAction",value:function(t,e){t.registerAction("losePointStatus",this.losePointStatusFn.bind(this)),t.registerAction("losePoint",this.losePointFn.bind(this)),e.subscribe("msg::marquee",this.marqueeHandler.bind(this))}},{key:"initMarquee",value:function(t){var e={colorHigh:"#75e8ff",fontSize:22,bold:!0};this.marquee_ui_box=new u.default(t,e)}},{key:"marqueeHandler",value:function(t){0===Number(t.code)&&this.marquee_ui_box.start(t.notice)}},{key:"isShowBtnBackHandler",value:function(t){window.GM&&1===GM.isCall_out&&GM.isShowBtnBack_out&&GM.btnBackCall_out&&(t.visible=!0,t.on(Laya.Event.CLICK,null,GM.btnBackCall_out))}},{key:"isShowBtnHomeHandler",value:function(t){GM.backHomeUrl&&(t.visible=!0,t.on(Laya.Event.CLICK,null,function(){location.href=GM.backHomeUrl}))}},{key:"noticeSystem",value:function(t,e){var n=this,i=t.getChildByName("btn_notice"),o=i.getChildByName("red"),a=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.isShowNotice&&(a.isShowRedPoint&&(o.visible=!0),i.on(Laya.Event.CLICK,n,function(){o.visible=!1,t.visible=!1,GM.noticePopShow_out&&GM.noticePopShow_out()}),i.visible=!0,t.getChildByName("bg").height=e)};window.GM&&1===GM.isCall_out&&GM.noticeStatus_out&&GM.noticeStatus_out(a)}},{key:"defaultInputNotice",value:function(t,e){var n=Math.max(t,e),i=void 0,o=!1;if(n<=1e4)i=250;else{i=Math.ceil(n/100),i=String(i);for(var a=1,r=i.length;a<r;a++)"0"!==i[a]&&(o=!0);i=o?Number(i[0])+1+i.slice(1).replace(/\d/g,"0"):i}return Number(i)}},{key:"losePointFn",value:function(t){var e=t,n=e.level,i="您的输分金额已达上限，故账户禁用开始时间："+e.beginTime+"，禁用结束时间："+e.endTime;2===n||3===n?a.observer.publish("game::reset"):1===n&&(i="今天输分金额即将达到上限，注意休息..."),a.observer.publish("common::tips",i)}},{key:"losePointStatusFn",value:function(t){a.observer.publish("common::tips","客官，您已被输分禁用，请联系客服！"),a.observer.publish("game::reset")}},{key:"jiujijin",value:function(){Laya.timer.once(3e3,this,function(){window.GM&&window.GM.socket_RJ&&window.GM.socket_RJ.exec&&(window.GM.socket_RJ.exec(),a.messageCenter.emitAjax("userAccount"))})}},{key:"errorHandler",value:function(t){var e=String(t.code),n="",i=null,o=null;if("0"===e)return!1;var s=function(){return window.location.reload()};switch(e){case"81":return void UTILS.otpCheckHandler();case"5":i=function(){a.observer.publish("pop::recharge")};break;case"21":i=o=s}return r.ERROR_TEXT.hasOwnProperty(e)||(e="31"),n=r.ERROR_TEXT[e],a.observer.publish("common::tips",n,i,o),!0}}],[{key:"getInstance",value:function(){return this.instance||new this}}]),t}();e.default=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(1),l=n(0),c=i(l),h=n(8),f=i(h),d=n(40),p=i(d),m=n(11),y=i(m),g=n(36),b=i(g),v=n(12),_=i(v),k=n(39),w=n(6),x=i(w),S=n(2),O=i(S),C=n(10),A=i(C),L=n(9),M=(i(L),function(t){function e(t){o(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.sceneName="roomScene",n.init(t),e.instance=n,n}return r(e,t),s(e,[{key:"init",value:function(t){O.default.getInstance().initResource(),this.initDom(),this.MIN_TIME=3e3,this.MAX_TIME=1e4,this.result_data=null,this.loadingTime=0,this.backlogList=[],this.isGameing=!1,t&&this.registerAction(t),u.observer.subscribe(this.sceneName+"_enter",this.onEnter.bind(this))}},{key:"onEnter",value:function(){(0,u.setViewCenter)(),c.default.log(this.sceneName+" enter"),this.dispatchAction(),u.observer.unsubscribe(this.sceneName+"_enter")}},{key:"registerAction",value:function(t){var e=this;t.registerAction(f.default.SOCKET__INIT__GAME,this.initGameHandler.bind(this)),t.registerAction(f.default.SOCKET__BET,this.resultCome.bind(this)),t.registerAction(f.default.SOCKET__ALL__MATCH,this.allMatchHandler.bind(this)),t.registerAction("recover",function(t){u.observer.publish("matchResult",t)}),t.registerAction("marquee",function(t){u.observer.publish("msg::marquee",t)}),t.registerAction(f.default.SOCKET__MATCH__RANK,function(t){k.MatchOpenUIView.getInstance().matchRankHandler(t),k.RoomMatch.getInstance().renderAmount(t.amount)}),t.registerAction(f.default.SOCKET__LAST__MATCH,function(t){k.MatchOpenUIView.getInstance().lastMatchHandler(t),u.observer.publish("lastMatch",t)}),t.registerAction("userAccount",function(t){y.default.getInstance().renderUserAccount(t)}),t.registerAction("matchResult",function(t){k.RoomMatch.getInstance().matchResultHandler(t),u.observer.publish("matchResult",t)}),t.registerAction("matchStart",function(t){e.addBacklogList(function(){k.RoomMatch.getInstance().isInMatch||(u.observer.publish("pop::match::start"),k.RoomMatch.getInstance().updateDataInfo(t.info))})}),t.registerAction("matchInfo",function(t){k.RoomMatch.getInstance().updateDataInfo(t.info)}),t.registerAction("help",function(t){u.observer.publish("cmd::help",t)}),x.default.getInstance().registerAction(t,u.observer),u.observer.subscribe("game::start",this.gameStart.bind(this)),u.observer.subscribe("game::stop",this.gameStop.bind(this)),u.observer.subscribe("game::reset",this.reset.bind(this))}},{key:"unRegisterAction",value:function(){}},{key:"dispatchAction",value:function(){u.messageCenter.emit(f.default.SOCKET__INIT__GAME),u.messageCenter.emit("matchInfo"),u.messageCenter.emit("recover")}},{key:"initDom",value:function(){this.top_box.addChild(y.default.getInstance()),this.game_box.addChild(p.default.getInstance()),this.match_box.addChild(k.RoomMatch.getInstance()),this.bottom_box.addChild(b.default.getInstance()),this.marquee_box.parent.visible=!1,x.default.getInstance().initMarquee(this.marquee_box)}},{key:"initGameHandler",value:function(t){this.allMatchHandler(t),k.RoomMatch.getInstance().renderAmount(t.match),c.default.checkLoginStatus()?u.messageCenter.emitAjax("userAccount"):u.observer.publish("bet::inputamount")}},{key:"gameStart",value:function(){this.isGameing=!0,this.reset(),Laya.timer.loop(1e3,this,this.addLoadingTimeHandler)}},{key:"addBacklogList",value:function(t){this.isGameing?this.backlogList.push(t):t()}},{key:"gameStop",value:function(){this.isGameing=!1,this.backlogList.length&&(this.backlogList.forEach(function(t,e){return t()}),this.backlogList.length=0)}},{key:"addLoadingTimeHandler",value:function(){this.loadingTime++,this.betHandler()}},{key:"resultCome",value:function(t){if(x.default.getInstance().errorHandler(t))return void u.observer.publish("game::reset");this.result_data=t,u.observer.publish("bet::success"),this.betHandler()}},{key:"betHandler",value:function(){var t=this;if(this.loadingTime>10){return u.observer.publish("common::tips","网络断开，稍候后重试。"),void u.observer.publish("game::reset")}if(this.result_data&&this.loadingTime>=3){this.result_data.lines.forEach(function(e,n){var i=[];5===Number(e.num)&&i.push(e.num),i.length&&t.addBacklogList(function(){A.default.getInstance().enter(i)})});var e=this.result_data;this.reset(),e.pic.forEach(function(t,e){t.unshift(null)}),p.default.getInstance().stop(e)}}},{key:"allMatchHandler",value:function(t){_.default.getInstance().renderInfo(t)}},{key:"myPromise",value:function(t,e){return new Promise(function(n,i){Laya.timer.once(e,t,n)})}},{key:"onExit",value:function(){c.default.log(this.sceneName+" exit"),this.unRegisterAction(),u.observer.publish(this.sceneName+"_exit"),this.clear()}},{key:"reset",value:function(){this.result_data=null,this.loadingTime=0,Laya.timer.clear(this,this.addLoadingTimeHandler)}},{key:"clear",value:function(){this.removeSelf()}}],[{key:"getInstance",value:function(t){return this.instance||new this(t)}}]),e}(roomUI));e.default=M},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={POP__HELP:"pop::help",GAME__START:"game::start",GAME__NEXT:"game::next",GAME__STOP:"game::stop",GAME__WIN__AMOUNT:"game::winamount",JACKPOT__OPEN:"jackpot::open",MATCH__TAB:"match::tab",SOCKET__BET:"bet",SOCKET__INIT__GAME:"initGame",SOCKET__ALL__MATCH:"allMatch",SOCKET__LAST__MATCH:"lastMatch",SOCKET__MATCH__RANK:"matchRank",AJAX__USER__ACCOUNT:"userAccount"}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),u=function(t){return t&&t.__esModule?t:{default:t}}(s),l=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.init(),e.instance=t,t}return a(e,t),r(e,[{key:"init",value:function(){this.noticeDate=[],this.y=80}},{key:"enter",value:function(t){this.noticeDate.push(t),this.parent||this.show()}},{key:"renderDate",value:function(t,e){this.domName.text=u.default.getActiveStr(t),this.domAmount.text=u.default.getActiveStr(e)}},{key:"show",value:function(){var t=this,e=this.noticeDate.shift();if(void 0===e)return void this.removeSelf();this.renderDate(e.name,e.amount),this.x=Laya.stage.width,Laya.stage.addChild(this),Laya.Tween.to(this,{x:this.x-this.width+40},300,Laya.Ease.backOut,Laya.Handler.create(this,function(){Laya.Tween.to(t,{x:Laya.stage.width},300,Laya.Ease.backIn,Laya.Handler.create(t,t.show),1500)}))}}],[{key:"getInstance",value:function(){return this.instance||new this}}]),e}(gainNoticeUI);e.default=l},function(t,e,n){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(2),l=function(t){return t&&t.__esModule?t:{default:t}}(u),c=function(t){function e(){o(this,e);var t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.init(),e.instance=t,t}return r(e,t),s(e,[{key:"init",value:function(){this.noticeDate=[],this.y=220}},{key:"enter",value:function(t){var e;(e=this.noticeDate).push.apply(e,i(t)),this.parent||this.show()}},{key:"renderDate",value:function(t){this.dom_num.text=t,this.dom_gxl.x=this.dom_num.x+this.dom_num.width}},{key:"show",value:function(){var t=this,e=this.noticeDate.shift();if(void 0===e)return void this.removeSelf();l.default.getInstance().play("good"),this.renderDate(e),this.x=Laya.stage.width,Laya.stage.addChild(this),Laya.Tween.to(this,{x:this.x-this.width+30},300,Laya.Ease.backOut,Laya.Handler.create(this,function(){Laya.Tween.to(t,{x:Laya.stage.width},300,Laya.Ease.backIn,Laya.Handler.create(t,t.show),2e3)}))}}],[{key:"getInstance",value:function(){return this.instance||new this}}]),e}(goodJobUI);e.default=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(0),l=i(u),c=n(1),h=n(6),f=i(h),d=n(37),p=i(d),m=n(5),y=n(2),g=i(y),b=Laya.Event.CLICK,v=f.default.getInstance(),_=function(t){function e(){o(this,e);var t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.init(),e.instance=t,t}return r(e,t),s(e,[{key:"init",value:function(){this.initDom(),this.initEvent(),this.initConfig(),c.observer.subscribe("update::useraccount",this.updateUserYuDou.bind(this))}},{key:"initConfig",value:function(){this.config={tingDou:0,yuNum:0,isFirstDefault:!1}}},{key:"initDom",value:function(){this.dom={},this.dom.dou_num=this.dou_box.getChildByName("dou_num"),this.dom.yu_num=this.yu_box.getChildByName("yu_num"),this.menu_box.addChild(p.default.getInstance())}},{key:"initEvent",value:function(){var t=this;v.isShowBtnBackHandler(this.btn_back),v.isShowBtnHomeHandler(this.btn_home),this.yu_box.on(b,this,this.yuNumPopBalanceShow.bind(this)),this.btn_rank.on(b,this,function(){g.default.getInstance().play("btn"),c.observer.publish("pop::rank",c.messageCenter)}),this.btn_more.on(b,this,function(){g.default.getInstance().play("btn"),t.menu_box.getChildAt(0).toggle()}),this.btn_chong.on(b,this,function(){g.default.getInstance().play("btn"),c.observer.publish("pop::recharge",c.messageCenter)}),(0,m.clickOtherAreaHandler)(this.btn_more,this.menu_box)}},{key:"updateUserYuDou",value:function(t){t>=0?this._updateUserYu(t):this.config.tingDou+t>=0?this._updateUserDou(t):this._updateUserYu(t)}},{key:"_updateUserYu",value:function(t){this.config.yuNum=Math.max(0,this.config.yuNum+t),this.dom.yu_num.text=l.default.getActiveStr(this.config.yuNum,10)}},{key:"_updateUserDou",value:function(t){this.config.tingDou=Math.max(0,this.config.tingDou+t),this.dom.dou_num.text=l.default.getActiveStr(this.config.tingDou,10)}},{key:"renderUserAccount",value:function(t){var e=Number(t.TCoin)||0,n=Number(t.total)-e||0;this.config.tingDou=e,this.config.yuNum=n,this.dom.dou_num.text=l.default.getActiveStr(e,10),this.dom.yu_num.text=l.default.getActiveStr(n,10),this.defaultBetHandler(e,n)}},{key:"defaultBetHandler",value:function(t,e){var n=void 0;if(!this.config.isFirstDefault){this.config.isFirstDefault=!0;var i=l.default.getCookie("defaultBet"+GM.gameId+GM.user_id);i=i?parseInt(i,10):null,n=i&&i<=e?i:v.defaultInputNotice(t,e),n=Math.min(Number(n),5e5),n=Math.max(Number(n),250),c.observer.publish("bet::inputamount",n),c.observer.publish("pop::defaultbet","默认投币额："+n)}}},{key:"yuNumPopBalanceShow",value:function(){g.default.getInstance().play("btn"),l.default.willGotoLogin()||(GM&&1===GM.isCall_out&&GM.popBalanceShow_out&&GM.popBalanceShow_out(GM.gameType),c.messageCenter.emitAjax("userAccount"))}}],[{key:"getInstance",value:function(){return this.instance||new this}}]),e}(headerUI);e.default=_},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),u=function(t){return t&&t.__esModule?t:{default:t}}(s),l=n(3),c=n(1),h=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.init(),e.instance=t,t}return a(e,t),r(e,[{key:"init",value:function(){this.inputNumArr=null,this.initSkin(),c.observer.subscribe("jackpot::open",this.renderWhetherOpen.bind(this))}},{key:"initSkin",value:function(){for(var t=0,e=this.numChildren;t<e;t++){var n=this.getChildAt(t),i=void 0;i=0===t||1===t?1:2,n.domNum.skin="images/room/room_match/num"+(t+5)+".png",n.domGe.skin="images/room/room_match/ge"+i+"_txt.png"}}},{key:"renderWhetherOpen",value:function(t){for(var e=this,n=t,i=0,o=this.numChildren;i<o;i++){var a=this.getChildAt(i);a.user_input_text=n,a.domMask.visible=!0,this.renderDomAcountText(!1,a,i)}this.inputNumArr&&this.inputNumArr.forEach(function(t,i){n>=t&&(e.getChildAt(i).domMask.visible=!1)})}},{key:"renderInfo",value:function(t){var e=this,n=["5","6","7","8"],i=[],o=[];n.forEach(function(e,n){i.push(t["allMatch"+e]),o.push(t["trigger"+e])}),o[0]&&(this.inputNumArr=o),i.forEach(function(t,n){var i=e.getChildAt(n);i.server_amount=t,e.renderDomAcountText(!0,i,n)})}},{key:"renderDomAcountText",value:function(t,e,n){if(e.user_input_text&&e.server_amount){var i=e.user_input_text*l.BASE_RATE[n]+e.server_amount,o="$"+u.default.addThousandSymbol(i);e.domAcount.text!==o&&(this.loop&&Laya.timer.clear(this,this.loop),t?this.textAnimate.call(e,i):e.isFirstRender?e.domAcount.text=o:(e.isFirstRender=!0,this.textAnimate.call(e,i)))}}},{key:"textAnimate",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t=Number(t),n=Number(n);var i=Math.max(1,Math.floor(2*(t-n)/100)),o=this.loop=function(){n+=i,n>=t?(n=t,o=e.loop=null):Laya.timer.frameOnce(2,e,o),e.domAcount.text="$"+u.default.addThousandSymbol(n)};o()}}],[{key:"getInstance",value:function(){return this.instance||new this}}]),e}(jackpotUI);e.default=h},function(t,e,n){"use strict";!function(){var t=window.myUtil={};t.log=function(){window.GM&&"function"==typeof GM.log?GM.log.apply(GM,arguments):1==t.debugFE&&console.log.apply(console,arguments)},t.console_log=function(){console.log.apply(console,arguments)},t.notLogged=function(){var e=t.config.userLogged;return e||(window.location.href=t.config.userLoginUrl),!e},t.pubsub=function(){return function(){var t={},e=Array.prototype.slice,n=Array.prototype.shift,i=Array.prototype.unshift,o=function(t,e,n){n[t]||(n[t]=[]),n[t].push(e)},a=function(t,e,n){if(e[t])if(n){var i=e[t];if(!i||!i.length)return;for(var o=0,a=i.length;o<a;o++)i[o].fnOrg===n.fnOrg&&(i.splice(o,1),o--,a--);0===a&&delete e[t]}else delete e[t]},r=function(){var t=n.call(arguments),e=n.call(arguments),i=arguments,o=t[e];if(o&&o.length)for(var r=0,s=o.length;r<s;r++){var u=o[r];u.fnOrg.EXCUTED_ONCE&&(a(e,t,u),r--,s--),u.apply(null,i)}};return{create:function(n){var n=n||"default",s={},u=[],l=!1,c=function(t,e){for(var n=0,i=u.length;n<i;n++){var o=u[n];if(o.key===t){e.apply(null,o.data),e.EXCUTED_ONCE&&a(t,s,e),o.isOnce&&(u.splice(n,1),n--,i--);break}}};return ret={listenOnce:function(t,e,n){return e.EXCUTED_ONCE=!0,this.listen(t,e,n),this},listen:function(t,e,n){var i=e&&e.bind(n||window);return i&&(i.fnOrg=e),o(t,i,s),c(t,i),this},remove:function(t,e,n){var i=e&&e.bind(n||window);return 0===arguments.length?(s={},u=[]):(i&&(i.fnOrg=e),a(t,s,i)),this},fire:function(){return i.call(arguments,s),r.apply(null,arguments),this},fireForceOnce:function(){return l=!0,this.fireForce.apply(this,arguments),this},fireForce:function(){var t=arguments,n=t[0];return s[n]&&(this.fire.apply(this,t),l)?(isMustOnce=!1,this):(u.push({key:n,isOnce:l,data:e.call(arguments,1)}),isMustOnce=!1,this)}},n?t[n]?t[n]:t[n]=ret:ret}}}()}(),t.asyn=function(){var e={},n=[];return{hook:function(){var e=t.util.slice.call(arguments);return n=n.concat(e),this},unHook:function(){var e,i,o=t.util.slice.call(arguments),a=o.length,r=n.length;if(0==a)n=[];else for(e=0;e<r;e++)for(i=0;i<a;i++)if(n[e]==o[i]){n.splice(e,1),e--,r--;break}return this},_done:function(){return n.forEach(function(t,e){t&&t()}),n=[],this},isReady:{},ready:function(t){return this.isReady[t]=!0,delete e[t],0===Object.keys(e).length&&this._done(),this},wait:function(t){return e[t]="wait",this}}},t.DownTimeMsec=function(t,e){this.time=parseInt(t,10),this.loopTime=e||50,this.timeout=null},t.DownTimeMsec.prototype={constructor:t.DownTimeMsec,_loopTime:function(t,e,n){var i=this,o=new Date;return function a(){var r=new Date,s=r-o,u=t-s;u=u<0?0:u;var l=Math.floor(u/1e3);"function"==typeof e&&e(u,l),u>0?(clearTimeout(i.timeout),i.timeout=setTimeout(a,i.loopTime)):"function"==typeof n&&n()}(),this},start:function(t,e){return this.func=t,this.callback=e,this._loopTime(this.time,t,e),this},setTime:function(t){this.stop(),this._loopTime(t,this.func,this.callback)},stop:function(){return clearTimeout(this.timeout),this}},t.DownTime=function(t,e){this.time=parseInt(t,10),this.timeOrg=this.time,this.leftTime=this.time,this.flag=e,this.timeout=null},t.DownTime.prototype={constructor:t.DownTime,_format:function(t){var e=(this.el,this.flag),n=t/60;n=Math.floor(n),(n=n<0?0:n)<10&&1===e&&(n="0"+n);var i=t%60;return i=Math.floor(i),i=i<0?0:i,i<10&&(i="0"+i),n+":"+i},_loopTime:function(t,e,n){var i=new Date,o=function(){var a=new Date,r=(a-i)/1e3;r=Math.floor(r);var s=t-r;s=s<0?0:s,"function"==typeof e&&e(s,this._format(s)),this.leftTime=s,s>0?(clearTimeout(this.timeout),this.timeout=setTimeout(o,1e3)):"function"==typeof n&&n()}.bind(this);o()},start:function(t,e){return this.func=t,this.callback=e,this._loopTime(this.time,t,e),this},reStart:function(){this.time=this.timeOrg,this.start.apply(this,arguments)},recover:function(){this._loopTime(this.leftTime,this.func,this.callback)},setTime:function(t){this.stop(),this._loopTime(t,this.func,this.callback)},stop:function(){return clearTimeout(this.timeout),this}},window.convertXMLToNode=function(t){function e(t){var n=t.type;if(!laya.ui[n])return null;var i=new laya.ui[n],o=t.props;for(var a in o){var r=o[a];isNaN(Number(r))||(r=Number(r)),i[a]=r}for(var s=t.childs,u=0;u<s.length;u++){var l=s[u],c=e(l);c&&i.addChild(c)}return i}function n(t,e){var o={};o.type=i(t),o.childs=[];for(var a=t.childNodes,r=0;r<a.length;r++){var s=a.item(r),u=(i(s),n(s));o.childs.push(u)}if(t.attributes){o.props={};for(var l=0;l<t.attributes.length;l++){var c=t.attributes.item(l);o.props[c.name]=c.value}}return o}function i(t){var e=t.localName;return null===e&&(e=t.baseName),null!==e&&""!==e||(e=t.nodeName),e}function o(t){if(void 0===t)return null;var e,n;window.DOMParser&&(n=new window.DOMParser);try{e=n.parseFromString(t,"text/xml").firstChild}catch(t){e=null}return e}return e(function(t){var e=o(t);return null!==e?n(e):null}(t))},t.timeOnPageControl={fire:function(e,n){t.Socket.pubsub.fire(e,n)},pageOffReset:function(){clearTimeout(this.pageOffTimeout),t.config.timeOffPage=0,this.fire("timeOffPage",t.config.timeOffPage)},pageOffStart:function(){var e=(new Date).getTime(),n=function(){var i=(new Date).getTime();t.config.timeOffPage=i-e,this.fire("timeOffPage",t.config.timeOffPage),clearTimeout(this.pageOffTimeout),this.pageOffTimeout=setTimeout(n,1e3)}.bind(this);n()},pageOnReset:function(){clearTimeout(this.pageOnTimeout),t.config.timeOnPage=0,this.fire("timeOnPage",t.config.timeOnPage)},pageOnStart:function(){var e=(new Date).getTime(),n=function(){var i=(new Date).getTime();t.config.timeOnPage=i-e,this.fire("timeOnPage",t.config.timeOnPage),clearTimeout(this.pageOnTimeout),this.pageOnTimeout=setTimeout(n,1e3)}.bind(this);n()},pageHide:function(){t.timeOnPageControl.pageOnReset(),t.timeOnPageControl.pageOffStart()},pageOn:function(){t.timeOnPageControl.pageOnStart(),t.timeOnPageControl.pageOffReset()},init:function(){this.pageOnStart()}},t.visibleChangeListen=function(){function e(){"hidden"==Laya.Browser.document[n]?t.timeOnPageControl.pageHide():t.timeOnPageControl.pageOn()}var n="visibilityState",i="visibilitychange",o=window.document;void 0!==o.hidden?(i="visibilitychange",n="visibilityState"):void 0!==o.mozHidden?(i="mozvisibilitychange",n="mozVisibilityState"):void 0!==o.msHidden?(i="msvisibilitychange",n="msVisibilityState"):void 0!==o.webkitHidden&&(i="webkitvisibilitychange",n="webkitVisibilityState"),window.document.addEventListener(i,e)},Function.prototype._before=function(t){var e=this;return function(){if(!1!==t.apply(this,arguments))return e.apply(this,arguments)}},Function.prototype._after=function(t){var e=this;return function(){var n=e.apply(this,arguments);return t.apply(this,arguments),n}}}()},function(t,e,n){"use strict";!function(){for(var t=0,e=["webkit","moz"],n=0;n<e.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,n){var i=(new Date).getTime(),o=Math.max(0,16.7-(i-t)),a=window.setTimeout(function(){e(i+o)},o);return t=i+o,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}()},function(t,e,n){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.GAME_VERSION=e.RESOURCE=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=n(4),r=function(t){return t&&t.__esModule?t:{default:t}}(a),s=Laya.Loader.XML,u=Laya.Loader.IMAGE,l=Laya.Loader.ATLAS,c=Laya.Loader.BUFFER,h={},f={},d=[{url:"images/font/bottom_font.fnt",name:"bottom_font",type:s},{url:"images/font/button_font.fnt",name:"button_font",type:s},{url:"images/font/notice_font.fnt",name:"notice_font",type:s},{url:"images/font/num1_font.fnt",name:"num1_font",type:s},{url:"images/font/num2_font.fnt",name:"num2_font",type:s},{url:"images/font/num3_font.fnt",name:"num3_font",type:s},{url:"images/font/win_font.fnt",name:"win_font",type:s},{url:"images/font/auto_font.fnt",name:"auto_font",type:s}],p=[{url:"images/load/bg.jpg",type:u},{url:"images/load/dollarbg.png",type:u},{url:"res/atlas/images/load.json",type:l},{url:"res/atlas/images/comp.json",type:l},{url:"images/animate/loading.sk",type:c},{url:"images/animate/loading.png",type:u}],m=[{url:"images/room/down_up.png",type:u},{url:"images/room/room_match/big_match.png",type:u},{url:"images/room/room_match/lapa_bg.png",type:u},{url:"images/room/clip_win.png",type:u},{url:"images/animate/baida.atlas",type:l},{url:"images/animate/baida.png",type:u},{url:"images/animate/five.atlas",type:l},{url:"images/animate/five.png",type:u},{url:"images/animate/one.atlas",type:l},{url:"images/animate/one.png",type:u},{url:"images/animate/ten.atlas",type:l},{url:"images/animate/ten.png",type:u},{url:"images/animate/twenty.atlas",type:l},{url:"images/animate/twenty.png",type:u},{url:"images/animate/hundred.atlas",type:l},{url:"images/animate/hundred.png",type:u},{url:"images/animate/fiveHundred.atlas",type:l},{url:"images/animate/fiveHundred.png",type:u},{url:"images/animate/LOGO.sk",type:c},{url:"images/animate/LOGO.png",type:u},{url:"images/animate/winpop.sk",type:c},{url:"images/animate/winpop.png",type:u},{url:"images/animate/start.sk",type:c},{url:"images/animate/start.png",type:u},{url:"images/animate/baidafj.sk",type:c},{url:"images/animate/baidafj.png",type:u},{url:"images/animate/icon.sk",type:c},{url:"images/animate/icon.png",type:u},{url:"images/pop/match/bg_award.png",type:u},{url:"images/pop/match/bg_line.png",type:u},{url:"images/pop/match/bg_header.png",type:u},{url:"images/pop/match/bg_line2.png",type:u},{url:"images/pop/match/bg_match.png",type:u},{url:"images/pop/rank/bg_rank.png",type:u},{url:"images/pop/help/banner_01.png",type:u},{url:"images/pop/help/banner_02.png",type:u},{url:"images/pop/help/banner_03.png",type:u},{url:"images/pop/help/banner_04.png",type:u},{url:"images/pop/recharge/bg_input.png",type:u},{url:"images/pop/recharge/btn_tab.png",type:u},{url:"images/pop/tips/bg.png",type:u},{url:"images/pop/tips/bg02.png",type:u}],y=[{url:"res/atlas/images/room.json",type:l},{url:"res/atlas/images/room/room_match.json",type:l},{url:"res/atlas/images/pop/match.json",type:l},{url:"res/atlas/images/pop/rank.json",type:l},{url:"res/atlas/images/pop/help.json",type:l},{url:"res/atlas/images/pop/recharge.json",type:l},{url:"res/atlas/images/pop/tips.json",type:l}];h.fonts=d,h.loadingRes=p,h.disLoadingRes=[].concat(m,y),h.images=[].concat(i(h.disLoadingRes),p);!function t(e){"object"===(void 0===e?"undefined":o(e))&&e.forEach(function(e,n){var i=void 0,o=void 0,a=void 0;"string"==typeof e.url?(o=e.url.indexOf(".json"),a=e.url.indexOf(".fnt"),o>-1?i=e.url.substr(0,o)+".png":a>-1&&(i=e.url.substr(0,a)+".png"),i&&(f[i]=r.default.STATIC_VERTION),f[e.url]=r.default.STATIC_VERTION):t(e)})}([].concat(i(h.fonts),i(h.images))),e.RESOURCE=h,e.GAME_VERSION=f},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=t.messageCenter,n=t.observer;(new a.HelpPopDialog).registerAction({messageCenter:e,observer:n}),(new r.RechargePopDialog).registerAction({messageCenter:e,observer:n}),(new s.RankPopDialog).registerAction({messageCenter:e,observer:n}),(new u.MatchHistoryPopDialog).registerAction({messageCenter:e,observer:n}),(new l.MatchFinishPopDialog).registerAction({messageCenter:e,observer:n}),(new c.CommonTipsPopDialog).registerAction({messageCenter:e,observer:n}),(new c.CommonMatchPopDialog).registerAction({messageCenter:e,observer:n}),(new f.default).registerAction({messageCenter:e,observer:n}),(new y.default).registerAction({messageCenter:e,observer:n}),new p.default}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var a=n(30),r=n(34),s=n(33),u=n(32),l=n(31),c=n(28),h=n(35),f=i(h),d=n(29),p=i(d),m=n(27),y=i(m)},function(t,e,n){"use strict";!function(){var t=Sail&&Sail.Utils||$,e={confirm:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAMAAAAM7l6QAAAAWlBMVEUAAADMQkLLQkLLQkL9Y2PLQkLLQkL9Y2PMQkL9Y2PLQkLLQkLdTk75YGD7YmL9Y2P2Xl77YmL9Y2P9Y2P9Y2PLQkL9Y2PLQkL3Xl7cTU3tWFj5YGDoVVXmVFTAQB7jAAAAFnRSTlMA4qyPiltUU9sGBvr59e3cyl/fplYHf9H6ogAAAJVJREFUKM/lzFkOhCAQRdEHCs5TD1WAuv9ttm00xii1Ae/vSS7Wis/7Ree6DHtZRzelm6Z0XyrpUvY/U7S2QNFSvAEDCfXoJW7QkBTooTzK7CR1CBIH1BLXyIX7qKB9nL2G4TmmMxuUiqd7nVh9Acvs3RWdZ7ZYSpjZB3eysCAnwOaXDgVsfsXcAnul0ao6qFLalCv8AOM4RjeBMUEAAAAAAElFTkSuQmCC",delete:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAMAAAAM7l6QAAAAb1BMVEUAAADLy8ttbGzMzMzMzMxtbGzMzMxtbGzMzMxtbGzMzMxubW3MzMxtbGxtbGyQj4/MzMxtbGxtbGzMzMzMzMzMzMzMzMzMzMzMzMxwb29tbGzMzMxtbGzBwcGtra2NjIy/vr6goKCPjo6kpKSko6Pen5mzAAAAG3RSTlMA/N2piVtVVAYGA+ParPr54ZSKW1Hz5OPf2quDrJY6AAAAqklEQVQoz9XPSQ6DMBBE0TKEeR4yum0Dyf3PGCARLLA76/ztk0oqrMWhfxNy65z7YYytPpeH8v6L6UlaO6Urz+rwRUPpLATiq5svMTrJ1MHn2EfNcQ3BsYBk+2P+8XvgWEFzrFFxXOGumO0MD+NmUyCg0aUjBUgyetn1SVkCRETG8m4wRBHmWiKatBI7CaUnImqxlDZkrUnxKfKO6EXYSoLCK3cqvSJIVngDsvlU0+yaOfMAAAAASUVORK5CYII=",number:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAMAAAAM7l6QAAAAeFBMVEUAAADGxsa3t7f///////////////////+3t7e3t7fo6Oi3t7fT09P///////+3t7e6urr///+3t7f///+3t7e3t7f///////////////+3t7e3t7f///+3t7fQ0ND29vb19fX7+/v39/fo6Ojh4eHe3t65ubm4uLiqIy5xAAAAHHRSTlMABeKJVQb64VtV/Prp5NvbrqysppSKW1Hz11xTZZ6wfwAAAKVJREFUKM/d00cSgzAQRNEWOefgIIkM97+hMbhwuUBzAP/tq1nMorFlGrlt8aPbPTdMHNURPxXVH2Q6v0xnG6+q8LcaXJkBmKGaQxMVJ6qQUpzCptiGRbEFTva/3FHaoaW4gUexh4DiAEmv1j6BI9UsH2DapNJJY4C7jNc6Li7WSiHbM7ZSlPsMCjHLofn5d5CzKBj2nrE4Fbs4Yk6m+V/ytczZT1+rJlhgr8lBXAAAAABJRU5ErkJggg=="},n="public/keyboard_"+(9999999*Math.random()|0)+"/",i=[{text:"1",skin:"number",x:20,y:15},{text:"2",skin:"number",x:280,y:15},{text:"3",skin:"number",x:545,y:15},{text:"4",skin:"number",x:20,y:125},{text:"5",skin:"number",x:280,y:125},{text:"6",skin:"number",x:545,y:125},{text:"7",skin:"number",x:20,y:235},{text:"8",skin:"number",x:280,y:235},{text:"9",skin:"number",x:545,y:235},{text:"0",skin:"number",x:810,y:15},{text:"00",skin:"number",x:810,y:125},{text:".",skin:"number",x:810,y:235},{text:"确定",skin:"confirm",x:1070,y:15},{text:"删除",skin:"delete",x:1070,y:235}],o=Laya.Event.CLICK,a=function(t){function e(){e.super(this),this.configAlpha=null,this.configColor=null,this.closeOnSide=!1,this.on(o,this,function(){this.closeOnSide&&this.event("exit",["mask",null])})}Laya.class(e,"",t);var n=e.prototype;return n.update=function(t,e,n,i,o){this.alpha=this.configAlpha=n,this.configColor=i,this.closeOnSide=o,this.resize(t,e)},n.resize=function(t,e){this.size(t,e),this.graphics.clear(),this.graphics.drawRect(0,0,this.width,this.height,this.configColor),this.alpha=this.configAlpha},e}(Laya.Sprite),r=function(t){function e(){e.super(this),this.Mask=null,this.textValue=null,this.originHeight=null,this.init()}Laya.class(e,"KeyBoard.InputText",t);var n=e.prototype;return n.destroy=function(){t.prototype.destroy.call(this,!0),this.Mask=null,this.textValue=null,this.originHeight=null},n.init=function(t){this.originHeight=60;var e=new a;e.update(this.width,this.height,.5,"#000000",!1);var n=new Laya.Label;n.height=30,n.fontSize=30,n.align="center",this.Mask=e,this.textValue=n,this.addChildren(e,n)},n.update=function(t,e){this.textValue.color=e,this.textValue.text=t},n.resize=function(t,e){var n=e/1334;this.size(t,this.originHeight*n),this.Mask.resize(this.width,this.height),this.textValue.width=t,this.textValue.bottom=0,this.top=-this.height},e}(Laya.Box),s=function(t){function e(t,n){e.super(this),this.config=null,this.callback=null,this.label=null,this.init(t,n)}Laya.class(e,"",t);var i=e.prototype;return i.destroy=function(){t.prototype.destroy.call(this,!0),this.config=null,this.callback=null,this.label=null},i.init=function(t,e){t.width=240,t.height="confirm"===t.skin?210:100,this.config=t,this.skin=n+t.skin+".png",this.sizeGrid="15,15,15,15",this.resize(Laya.stage.width,Laya.stage.height),this.create(t),this.on(o,this,e,[t.text])},i.create=function(t){var e=new Laya.Label(t.text);e.color="confirm"===t.skin?"#ffffff":"#1c1c1c",e.font="arial",e.align="center",e.fontSize=40,e.size(this.width,e.fontSize),e.centerY=0,this.label=e,this.addChild(e)},i.resize=function(t,e){var n=t/1334,i=e/1334;this.size(this.config.width*n,this.config.height*i),this.pos(this.config.x*n,this.config.y*i),this.label&&(this.label.width=this.width)},e}(Laya.Image),u=function(t){function e(){e.super(this),this.keys=[],this.textValue="",this.inputText=null,this.panelMask=null,this.init()}Laya.class(e,"",t);var n=e.prototype;return n.destroy=function(){t.prototype.destroy.call(this,!0)},n.init=function(){var e=Laya.stage.height;e=e<750?750:e,this.size(Laya.stage.width,e/1334*350),this.bottom=-this.height;var n=new a;n.update(this.width,this.height,.5,"#000000",!1);var o=new r;o.resize(this.width,e),this.inputText=o,this.panelMask=n,this.addChildren(n,o);for(var u in i)this.keys.push(new s(i[u],this.onClick.bind(this)));t.prototype.addChildren.apply(this,this.keys)},n.onClick=function(t){this.event("input",[t])},n.update=function(t,e){this.inputText.update(t,e)},n.enter=function(t){this.inputText.update(t,"#ffffff"),Laya.Tween.to(this,{bottom:0},300,Laya.Ease.linearIn)},n.exit=function(t){Laya.Tween.to(this,{bottom:-this.height},200,Laya.Ease.linearIn,Laya.Handler.create(this,function(t){this.event("exit",[t])},[t]))},n.resize=function(t,e){e=e<750?750:e;var n=e/1334;this.size(t,350*n),this.panelMask.resize(this.width,this.height),this.inputText.resize(t,e);for(var i in this.keys)this.keys[i].resize(t,e)},e}(Laya.Box);!function(i){function o(){o.super(this),this.keyBoardMask=null,this.keyBoardPanel=null,this.config=null,this.textValue="",this.firstInput=!1,this.loadAssets()}var r={closeOnSide:!0,shadowAlpha:.3,shadowColor:"#000000",nullMsg:"输入的值不能为空",length:11,float:!1,fixed:4,input:function(t){console.log("当前输入值："+t)},close:function(t,e){"confirm"===t?console.log("点击了确定按钮，关闭输入键盘，当前值："+e):console.log("点击了遮罩，关闭输入键盘。")}};Laya.class(o,"Tools.KeyBoardNumber",i);var s=o.prototype;s.destroy=function(){Laya.stage.off(Laya.Event.RESIZE,this,this.onResize),i.prototype.destroy.call(this,!0),this.keyBoardMask=null,this.keyBoardPanel=null,this.config=null,this.textValue=null},s.loadAssets=function(){var t=this,i=0,o=Object.keys(e).length;for(var a in e)!function(e,a){var r=new Laya.HTMLImage.create(a,{onload:function(){Laya.Loader.cacheRes(n+e+".png",new Laya.Texture(r)),++i===o&&t.init()}})}(a,e[a])},s.init=function(){this.size(Laya.stage.width,Laya.stage.height),this.zOrder=1e3;var t=new u(this.removeSelf.bind(this));t.on("input",this,this.onInput),t.on("exit",this,this.onExit);var e=new a;e.on("exit",this,function(e){t.exit(e)}),this.keyBoardMask=e,this.keyBoardPanel=t,this.addChildren(e,t),Laya.stage.on(Laya.Event.RESIZE,this,this.onResize)},s.onExit=function(t){this.removeSelf(),this.config.close&&this.config.close(t,"confirm"===t?this.textValue+"":null),this.textValue="",this.firstInput=!1},s.onInput=function(t){switch(t){case"删除":var t=this.textValue.split("");t.pop(),this.textValue=t.join(""),this.textValue?this.keyBoardPanel.update(this.textValue,"#ffffff"):this.keyBoardPanel.update(this.config.nullMsg,"#ff0000"),this.config.input&&this.config.input(this.textValue);break;case"确定":this.keyBoardPanel.exit("confirm");break;default:if(this.firstInput&&(this.textValue="",this.firstInput=!1),"."===t){if(!0!==this.config.float)return;if(""==this.textValue&&(t="0."),-1!=this.textValue.indexOf("."))return}if(!0===this.config.float){var e=this.textValue.split(".")[1];if(e&&e.length>=this.config.fixed)return}if((this.textValue+t).length>this.config.length)return;this.textValue=this.textValue+t,this.textValue=this.textValue.replace(/^0+/,""),this.config.input&&this.config.input(this.textValue),this.textValue?this.keyBoardPanel.update(this.textValue,"#ffffff"):this.keyBoardPanel.update(this.config.nullMsg,"#ff0000")}},s.enter=function(e,n){this.config=t.extend({},r,n),this.textValue=e+"",Laya.timer.callLater(this,function(){this.keyBoardMask.update(this.width,this.height,this.config.shadowAlpha,this.config.shadowColor,this.config.closeOnSide),this.keyBoardPanel.enter(this.textValue,this.config)}),Laya.stage.addChild(this)},s.onResize=function(){var t=Laya.stage.width,e=Laya.stage.height;this.size(t,e),this.keyBoardMask.resize(t,e),this.keyBoardPanel.resize(t,e)}}(Laya.Box)}()},function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){function t(){}window.Sail=window.Sail||{};var e=function(){function t(t){var e,r;return!(!t||"[object Object]"!==n.call(t))&&(!(e=Object.getPrototypeOf(t))||"function"==typeof(r=i.call(e,"constructor")&&e.constructor)&&o.call(r)===a)}var e={},n=e.toString,i=e.hasOwnProperty,o=i.toString,a=o.call(Object);return t}();Laya.class(t,"Sail.Utils"),t.createSkeleton=function(t,e,n){e=e||30,n=n||0;var i=Laya.loader.getRes(t+".png"),o=Laya.loader.getRes(t+".sk");if(!i||!o)return null;var a=new Laya.Templet;return a.parseData(i,o,e),a.buildArmature(n)},t.getStringLength=function(t){return(""+t.replace(/[^\x00-\xff]/gi,"ox")).length},t.cutStr=function(t,e){t+="";var n=/[^\x00-\xff]/g;if(t.replace(n,"mm").length<=e)return t;for(var i=Math.floor(e/2),o=i;o<t.length;o++)if(t.substr(0,o).replace(n,"mm").length>=e)return t.substr(0,o)+"...";return t},t.getUrlParam=function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(e);return null!=n?unescape(n[2]):null},t.extend=function(){var n,o,a,r,s,u,l=arguments[0]||{},c=1,h=arguments.length,f=!1;for("boolean"==typeof l&&(f=l,l=arguments[c]||{},c++),"object"!==(void 0===l?"undefined":i(l))&&"function"!==!(void 0===l?"undefined":i(l))&&(l={}),c===h&&(l=this,c--);c<h;c++)if(null!=(n=arguments[c]))for(o in n)a=l[o],r=n[o],l!==r&&(f&&r&&(e(r)||(s=Array.isArray(r)))?(s?(s=!1,u=a&&Array.isArray(a)?a:[]):u=a&&e(a)?a:{},l[o]=t.extend(f,u,r)):void 0!==r&&(l[o]=r));return l}}()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),u=function(t){return t&&t.__esModule?t:{default:t}}(s),l=n(1),c=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.sceneName="loadingScene",t.init(),e.instance=t,t}return a(e,t),r(e,[{key:"init",value:function(){this.initConfig(),this.renderProcessData(this.config.MIN_WIDTH,"加载中...10%"),l.observer.subscribe(this.sceneName+"_enter",this.onEnter.bind(this))}},{key:"onEnter",value:function(){(0,l.setViewCenter)(),u.default.log(this.sceneName+" enter"),l.observer.unsubscribe(this.sceneName+"_enter")}},{key:"initConfig",value:function(){this.config={},this.config.MAX_WIDTH=1030,this.config.MIN_WIDTH=60}},{key:"loading",value:function(t){var e=Math.floor(100*t),n=e/100*this.config.MAX_WIDTH;n=n<this.config.MIN_WIDTH?this.config.MIN_WIDTH:n,this.renderProcessData(n,"加载中..."+parseInt(e)+"%")}},{key:"renderProcessData",value:function(t,e){this.load_img.width=t,this.load_txt.text=e}},{key:"onExit",value:function(){this.dom_skele.stop(),u.default.log(this.sceneName+" exit"),l.observer.publish(this.sceneName+"_exit"),this.clear()}},{key:"clear",value:function(){this.destroy(!0)}}],[{key:"getInstance",value:function(){return this.instance||new this}}]),e}(window.loadUI);e.default=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(){var t=this,e=0,n=c.RESOURCE.fonts.length;c.RESOURCE.fonts.forEach(function(i,o,r){var s=new Laya.BitmapFont;s.loadFont(i.url,Laya.Handler.create(t,function(){Laya.Text.registerBitmapFont(i.name,s),++e===n&&a()}))})}function a(){var t=function(){console.warn("大厅&房间————资源加载完成"),(0,m.default)({messageCenter:h.messageCenter,observer:h.observer}),window.websocketurl?(h.messageCenter.initAction(),h.messageCenter.connectSocket()):h.sceneManager.loadScene(v.default.getInstance(h.messageCenter))},e=g.default.getInstance();Laya.loader.load(c.RESOURCE.disLoadingRes,Laya.Handler.create(this,t),Laya.Handler.create(e,e.loading,null,!1))}n(13),n(5),n(14),n(18),n(17);var r=n(4),s=i(r),u=n(0),l=i(u),c=n(15),h=n(1),f=n(6),d=i(f),p=n(16),m=i(p),y=n(19),g=i(y),b=n(7),v=i(b),_=n(2),k=i(_);Laya.init(s.default.gameWidth,s.default.gameHeight,Laya.WebGL),Laya.stage.scaleMode=s.default.scaleMode,Laya.stage.screenMode=s.default.screenMode,Laya.stage.alignH=s.default.alignH,Laya.stage.alignV=s.default.alignV,Laya.URL.basePath="string"==typeof window.cdnpath?window.cdnpath:"",Laya.URL.version=c.GAME_VERSION,Laya.UIConfig.popupBgAlpha=.7,(s.default.localStatus||s.default.debug)&&(Object.assign(window,{messageCenter:h.messageCenter,observer:h.observer,UTILS:l.default,sceneManager:h.sceneManager,RoomScene:v.default,LoadingScene:g.default,AudioMudule:k.default,CommonGameModule:d.default}),window.checheEmit=h.messageCenter.emit.bind(h.messageCenter),Laya.Stat.show(0,0)),Laya.loader.load(c.RESOURCE.loadingRes,Laya.Handler.create(void 0,function(){h.sceneManager.loadScene(g.default.getInstance()),Laya.stage.on(Laya.Event.RESIZE,void 0,h.setViewCenter),o()}))},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=function(t){function e(t,n){i(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.init(t,n),a}return a(e,t),s(e,[{key:"init",value:function(t,e){var n={duraing:3e3,intervalTime:{nomal:1e4,win:3e3},modelData:["恭喜*赢了*，实在是太厉害了！","祝贺*赢取*，积少成多从现在开始。","恭喜*赢取*，满屏掌声献给他！"],fontSize:30,bold:!1,color:"#fff",colorHigh:"#75e8ff",font:"微软雅黑"};if(!(t instanceof Laya.Node))throw new Error("父元素Error...");this.parentNode=t,this.options=Object.assign({},n,e),this._initConfig(),this._addMask(),this._createChild(),this.parentNode.addChild(this)}},{key:"_initConfig",value:function(){this.config={MASKWIDTH:this.parentNode.displayWidth,MASKHEIGHT:this.parentNode.displayHeight,currentType:"nomal",isDataLoop:!1,count:0,noticeArr:[],isGoing:!1},this._labelChildren=null}},{key:"_addMask",value:function(){this.parentNode.mask=new Laya.Sprite,this.parentNode.mask.graphics.clear(),this.parentNode.mask.graphics.drawRect(0,0,this.config.MASKWIDTH,this.config.MASKHEIGHT,"#000000")}},{key:"_createChild",value:function(){for(var t=[],e=0;e<5;e++){var n=new Laya.Label;n.fontSize=this.options.fontSize,n.font=this.options.font,n.bold=this.options.bold,t.push(n)}this._labelChildren=t}},{key:"start",value:function(t){"string"==typeof t||"number"==typeof t?this.config.noticeArr.unshift(t):Array.isArray(t)&&(this.config.noticeArr=t.concat(this.config.noticeArr)),this._marqueeGo()}},{key:"_marqueeGo",value:function(t){var e=this.config;e.isGoing||(e.isGoing=!0,this.parentNode.parent.visible=!0,this._renderNextNotice())}},{key:"_renderNextNotice",value:function(){var t=this.config,e=t.noticeArr,n=e.shift();if(void 0===n)return this.config.isGoing=!1,void(this.parentNode.parent.visible=!1);t.isDataLoop&&e.push(n);var i=this._dealWithMsg(n);this._renderLabel(i),this._currentNoticeIn()}},{key:"_dealWithMsg",value:function(t){var e=[t];if("string"==typeof t){var n=t.indexOf("恭喜"),i=t.indexOf("赢取"),o=t.indexOf("，"),a=t.indexOf("赢得了");-1!==n&&-1!==i?e=[t.slice(0,n+2),t.slice(n+2,i),t.slice(i,i+2),t.slice(i+2)]:-1!==o&&-1!==a&&(e=[t.slice(0,o+1),t.slice(o+1,a),t.slice(a,a+3),t.slice(a+3)])}if("object"===(void 0===t?"undefined":r(t))&&"name"in t&&"award"in t){var s=this.options.modelData[this.config.count++%3].split("*");e=[s[0],t.name,s[1],t.award,s[2]]}return e}},{key:"_renderLabel",value:function(t){var e=this;this.removeChildren(),this.config.currentType=1===t.length?"nomal":"win",t.forEach(function(t,n){var i="";e._labelChildren[n].text=t,i=1===n?e.options.colorHigh:3===n?e.options.colorHigh2||e.options.colorHigh:e.options.color,e._labelChildren[n].color=i});for(var n=0;n<t.length;n++)0!==n&&(this._labelChildren[n].x=this._labelChildren[n-1].x+this._labelChildren[n-1].displayWidth+2),this.addChild(this._labelChildren[n])}},{key:"_currentNoticeIn",value:function(t){this.x=this.config.MASKWIDTH,Laya.Tween.to(this,{x:0},this.options.duraing,Laya.Ease.linearIn,Laya.Handler.create(this,this._currentNoticeOut))}},{key:"_currentNoticeOut",value:function(){var t=this.config,e=Math.ceil(this.displayWidth);Laya.Tween.to(this,{x:-1*e},this.options.duraing,Laya.Ease.linearIn,Laya.Handler.create(this,this._renderNextNotice),this.options.intervalTime[t.currentType])}}]),e}(Laya.Box);e.default=u},function(t,e,n){"use strict";function i(t,e){var n=this;n.dom={glr:t},n.config={},n.tmp={},n.initConfig(e),n.init()}Object.defineProperty(e,"__esModule",{value:!0});var o={origin_index:0,animate_time:500,item_space:10,move_scope_rate:1/6,pagination:!0,end_call_back:null},a=i.prototype;a.initConfig=function(t){var e=this;t||(t={}),e.config.cur_index=t.origin_index||o.origin_index,e.config.item_space=t.item_space||o.item_space,e.config.animate_time=t.animate_time||o.animate_time,e.config.pagination=t.pagination||o.pagination,e.config.end_call_back=t.end_call_back||o.end_call_back,t.item_width&&(e.config.move_space=t.item_width+e.config.item_space,e.config.move_scope=e.config.move_space*o.move_scope_rate)},a.init=function(){var t=this;t.initDom(),t.initEvent(),t.config.move_space||(t.config.move_space=t.dom.con.width+t.config.item_space,t.config.move_scope=t.config.move_space*o.move_scope_rate)},a.initDom=function(){var t=this,e=t.dom.glr;t.dom.con=e.getChildByName("con"),t.dom.list=t.dom.con.getChildByName("list"),t.replaceGlrList(),t.addMask(),t.dom.items=[];for(var n=0;n<t.dom.list.numChildren;n++)t.dom.items.push(t.dom.list.getChildAt(n));t.config.pagination&&(t.dom.pagination=e.getChildByName("pagination"))},a.addMask=function(){var t=this,e=t.dom.con;e.scrollRect=new laya.maths.Rectangle(0,0,e.width,e.height)},a.replaceGlrList=function(){var t=this,e=t.dom.con,n=t.dom.list,i=new Laya.Box;i.name="list";for(var a=[],r=0;r<n.numChildren;r++){var s=n.getChildAt(r);s.name="item",s.visible=!0,a.push(s)}for(var r=0;r<a.length;r++)a[r].visible=r==o.origin_index,i.addChild(a[r]);t.dom.list=i,e.addChild(i),i.space=o.item_space,i.cacheAs="none",i.x=n.x,i.y=n.y,e.removeChild(n),n.destroy()},a.initEvent=function(){var t=this,e=Laya.Event.MOUSE_DOWN,n=Laya.Event.MOUSE_MOVE,i=Laya.Event.MOUSE_UP,o=Laya.Event.MOUSE_OUT,a=t.dom.list;t.config.pagination&&(t.dom.pagination.selectHandler=Laya.Handler.create(t,t.paginationHandler,null,!1)),a.on(e,t,t.onTouchStart),a.on(n,t,t.onTouchMove),a.on(i,t,t.onTouchEnd),a.on(o,t,t.onTouchEnd)},a.paginationHandler=function(t){var e=this;e.dom.pagination;if("onEndAnimate"===e.getTouchStatus())return!0;var n,i,o=e.config.cur_index;i=t,n=o>t?"left":"right",e.handleMoveEffect(n,i),e.animateMove()},a.onTouchStart=function(t){var e=this,n=t.target;if("onEndAnimate"==e.getTouchStatus())return!0;e.tmp.start_point={x:t.stageX,y:t.stageY},e.tmp.origin_pos={x:n.x},e.setTouchStatus("start")},a.onTouchMove=function(t){var e=this,n=t.target;if("start"!==e.getTouchStatus()&&"move"!==e.getTouchStatus())return!0;"start"==e.getTouchStatus()&&e.setTouchStatus("move"),e.tmp.move_dist={x:t.stageX-e.tmp.start_point.x,y:t.stageY-e.tmp.start_point.y},n.x=e.tmp.origin_pos.x+e.tmp.move_dist.x,e.detectNextShowIndex()},a.detectNextShowIndex=function(){var t,e,n=this,i=n.config.cur_index,o=n.dom.items,a=o.length,r=n.tmp.move_dist.x;if(r>0)t="left";else{if(!(r<0))return n.tmp.next_show_index=i,!0;t="right"}e="left"==t?i-1:i+1,e<0?e=a-1:e>=a&&(e=0),n.handleMoveEffect(t,e)},a.handleMoveEffect=function(t,e){var n=this,i=n.config.cur_index,o=n.dom.items,a=n.config.move_space;if(t==n.tmp.move_direction&&e==n.tmp.next_show_index)return!0;n.tmp.move_direction=t,n.tmp.next_show_index=e;for(var r=0;r<o.length;r++)r!=i&&r!=e&&(o[r].x=0,o[r].visible=!1);var s=o[e];s.visible=!0,s.x="left"==t?-a:a},a.onTouchEnd=function(t){var e=this,n=e.tmp&&e.tmp.move_dist&&e.tmp.move_dist.x;if("move"!==e.getTouchStatus())return!0;if(!n)return!0;var n=e.tmp.move_dist.x;Math.abs(n)<e.config.move_scope&&(e.tmp.next_show_index=e.config.cur_index),e.animateMove()},a.animateMove=function(){function t(){e.config.pagination&&(e.dom.pagination.selectedIndex=e.config.cur_index),n&&"function"==typeof n&&n(e.config.cur_index),e.reset()}var e=this,n=e.config.end_call_back,i=e.tmp.next_show_index,o=e.config.move_space;e.setTouchStatus("onEndAnimate"),e.config.cur_index==i?o=0:(e.config.cur_index=i,"right"==e.tmp.move_direction&&(o=-o));var a=e.dom.list,r={x:o};(new Laya.Tween).to(a,r,e.config.animate_time,null,Laya.Handler.create(e,t))},a.reset=function(){var t=this;t.resetGlrCon(),t.tmp={},t.setTouchStatus("end")},a.resetGlrCon=function(){var t=this,e=t.dom.list,n=t.dom.items,i=t.config.cur_index;e.x=0,n[i].x=0;for(var o=0;o<n.length;o++)o==t.config.cur_index?n[o].x=0:n[o].visible=!1},a.setTouchStatus=function(t){this.dom.con._zsySlider_touchtatus=t},a.getTouchStatus=function(){return this.dom.con._zsySlider_touchtatus},e.default=i},function(t,e,n){"use strict";var i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};(function(){var r=this,s=r._,u=Array.prototype,l=Object.prototype,c=Function.prototype,h=u.push,f=u.slice,d=u.concat,p=l.toString,m=l.hasOwnProperty,y=Array.isArray,g=Object.keys,b=c.bind,v=function t(e){return e instanceof t?e:this instanceof t?void(this._wrapped=e):new t(e)};void 0!==t&&t.exports&&(e=t.exports=v),e._=v,v.VERSION="1.7.0";var _=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,o){return t.call(e,n,i,o)};case 4:return function(n,i,o,a){return t.call(e,n,i,o,a)}}return function(){return t.apply(e,arguments)}};v.iteratee=function(t,e,n){return null==t?v.identity:v.isFunction(t)?_(t,e,n):v.isObject(t)?v.matches(t):v.property(t)},v.each=v.forEach=function(t,e,n){if(null==t)return t;e=_(e,n);var i,o=t.length;if(o===+o)for(i=0;o>i;i++)e(t[i],i,t);else{var a=v.keys(t);for(i=0,o=a.length;o>i;i++)e(t[a[i]],a[i],t)}return t},v.map=v.collect=function(t,e,n){if(null==t)return[];e=v.iteratee(e,n);for(var i,o=t.length!==+t.length&&v.keys(t),a=(o||t).length,r=Array(a),s=0;a>s;s++)i=o?o[s]:s,r[s]=e(t[i],i,t);return r};var k="Reduce of empty array with no initial value";v.reduce=v.foldl=v.inject=function(t,e,n,i){null==t&&(t=[]),e=_(e,i,4);var o,a=t.length!==+t.length&&v.keys(t),r=(a||t).length,s=0;if(arguments.length<3){if(!r)throw new TypeError(k);n=t[a?a[s++]:s++]}for(;r>s;s++)o=a?a[s]:s,n=e(n,t[o],o,t);return n},v.reduceRight=v.foldr=function(t,e,n,i){null==t&&(t=[]),e=_(e,i,4);var o,a=t.length!==+t.length&&v.keys(t),r=(a||t).length;if(arguments.length<3){if(!r)throw new TypeError(k);n=t[a?a[--r]:--r]}for(;r--;)o=a?a[r]:r,n=e(n,t[o],o,t);return n},v.find=v.detect=function(t,e,n){var i;return e=v.iteratee(e,n),v.some(t,function(t,n,o){return e(t,n,o)?(i=t,!0):void 0}),i},v.filter=v.select=function(t,e,n){var i=[];return null==t?i:(e=v.iteratee(e,n),v.each(t,function(t,n,o){e(t,n,o)&&i.push(t)}),i)},v.reject=function(t,e,n){return v.filter(t,v.negate(v.iteratee(e)),n)},v.every=v.all=function(t,e,n){if(null==t)return!0;e=v.iteratee(e,n);var i,o,a=t.length!==+t.length&&v.keys(t),r=(a||t).length;for(i=0;r>i;i++)if(o=a?a[i]:i,!e(t[o],o,t))return!1;return!0},v.some=v.any=function(t,e,n){if(null==t)return!1;e=v.iteratee(e,n);var i,o,a=t.length!==+t.length&&v.keys(t),r=(a||t).length;for(i=0;r>i;i++)if(o=a?a[i]:i,e(t[o],o,t))return!0;return!1},v.contains=v.include=function(t,e){return null!=t&&(t.length!==+t.length&&(t=v.values(t)),v.indexOf(t,e)>=0)},v.invoke=function(t,e){var n=f.call(arguments,2),i=v.isFunction(e);return v.map(t,function(t){return(i?e:t[e]).apply(t,n)})},v.pluck=function(t,e){return v.map(t,v.property(e))},v.where=function(t,e){return v.filter(t,v.matches(e))},v.findWhere=function(t,e){return v.find(t,v.matches(e))},v.max=function(t,e,n){var i,o,a=-1/0,r=-1/0;if(null==e&&null!=t){t=t.length===+t.length?t:v.values(t);for(var s=0,u=t.length;u>s;s++)(i=t[s])>a&&(a=i)}else e=v.iteratee(e,n),v.each(t,function(t,n,i){((o=e(t,n,i))>r||o===-1/0&&a===-1/0)&&(a=t,r=o)});return a},v.min=function(t,e,n){var i,o,a=1/0,r=1/0;if(null==e&&null!=t){t=t.length===+t.length?t:v.values(t);for(var s=0,u=t.length;u>s;s++)i=t[s],a>i&&(a=i)}else e=v.iteratee(e,n),v.each(t,function(t,n,i){o=e(t,n,i),(r>o||1/0===o&&1/0===a)&&(a=t,r=o)});return a},v.shuffle=function(t){for(var e,n=t&&t.length===+t.length?t:v.values(t),i=n.length,o=Array(i),a=0;i>a;a++)e=v.random(0,a),e!==a&&(o[a]=o[e]),o[e]=n[a];return o},v.sample=function(t,e,n){return null==e||n?(t.length!==+t.length&&(t=v.values(t)),t[v.random(t.length-1)]):v.shuffle(t).slice(0,Math.max(0,e))},v.sortBy=function(t,e,n){return e=v.iteratee(e,n),v.pluck(v.map(t,function(t,n,i){return{value:t,index:n,criteria:e(t,n,i)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index-e.index}),"value")};var w=function(t){return function(e,n,i){var o={};return n=v.iteratee(n,i),v.each(e,function(i,a){var r=n(i,a,e);t(o,i,r)}),o}};v.groupBy=w(function(t,e,n){v.has(t,n)?t[n].push(e):t[n]=[e]}),v.indexBy=w(function(t,e,n){t[n]=e}),v.countBy=w(function(t,e,n){v.has(t,n)?t[n]++:t[n]=1}),v.sortedIndex=function(t,e,n,i){n=v.iteratee(n,i,1);for(var o=n(e),a=0,r=t.length;r>a;){var s=a+r>>>1;n(t[s])<o?a=s+1:r=s}return a},v.toArray=function(t){return t?v.isArray(t)?f.call(t):t.length===+t.length?v.map(t,v.identity):v.values(t):[]},v.size=function(t){return null==t?0:t.length===+t.length?t.length:v.keys(t).length},v.partition=function(t,e,n){e=v.iteratee(e,n);var i=[],o=[];return v.each(t,function(t,n,a){(e(t,n,a)?i:o).push(t)}),[i,o]},v.first=v.head=v.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:0>e?[]:f.call(t,0,e)},v.initial=function(t,e,n){return f.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},v.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:f.call(t,Math.max(t.length-e,0))},v.rest=v.tail=v.drop=function(t,e,n){return f.call(t,null==e||n?1:e)},v.compact=function(t){return v.filter(t,v.identity)};var x=function t(e,n,i,o){if(n&&v.every(e,v.isArray))return d.apply(o,e);for(var a=0,r=e.length;r>a;a++){var s=e[a];v.isArray(s)||v.isArguments(s)?n?h.apply(o,s):t(s,n,i,o):i||o.push(s)}return o};v.flatten=function(t,e){return x(t,e,!1,[])},v.without=function(t){return v.difference(t,f.call(arguments,1))},v.uniq=v.unique=function(t,e,n,i){if(null==t)return[];v.isBoolean(e)||(i=n,n=e,e=!1),null!=n&&(n=v.iteratee(n,i));for(var o=[],a=[],r=0,s=t.length;s>r;r++){var u=t[r];if(e)r&&a===u||o.push(u),a=u;else if(n){var l=n(u,r,t);v.indexOf(a,l)<0&&(a.push(l),o.push(u))}else v.indexOf(o,u)<0&&o.push(u)}return o},v.union=function(){return v.uniq(x(arguments,!0,!0,[]))},v.intersection=function(t){if(null==t)return[];for(var e=[],n=arguments.length,i=0,o=t.length;o>i;i++){var a=t[i];if(!v.contains(e,a)){for(var r=1;n>r&&v.contains(arguments[r],a);r++);r===n&&e.push(a)}}return e},v.difference=function(t){var e=x(f.call(arguments,1),!0,!0,[]);return v.filter(t,function(t){return!v.contains(e,t)})},v.zip=function(t){if(null==t)return[];for(var e=v.max(arguments,"length").length,n=Array(e),i=0;e>i;i++)n[i]=v.pluck(arguments,i);return n},v.object=function(t,e){if(null==t)return{};for(var n={},i=0,o=t.length;o>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},v.indexOf=function(t,e,n){if(null==t)return-1;var i=0,o=t.length;if(n){if("number"!=typeof n)return i=v.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,o+n):n}for(;o>i;i++)if(t[i]===e)return i;return-1},v.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=t.length;for("number"==typeof n&&(i=0>n?i+n+1:Math.min(i,n+1));--i>=0;)if(t[i]===e)return i;return-1},v.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=n||1;for(var i=Math.max(Math.ceil((e-t)/n),0),o=Array(i),a=0;i>a;a++,t+=n)o[a]=t;return o};var S=function(){};v.bind=function(t,e){var n,i;if(b&&t.bind===b)return b.apply(t,f.call(arguments,1));if(!v.isFunction(t))throw new TypeError("Bind must be called on a function");return n=f.call(arguments,2),i=function(){if(!(this instanceof i))return t.apply(e,n.concat(f.call(arguments)));S.prototype=t.prototype;var o=new S;S.prototype=null;var a=t.apply(o,n.concat(f.call(arguments)));return v.isObject(a)?a:o}},v.partial=function(t){var e=f.call(arguments,1);return function(){for(var n=0,i=e.slice(),o=0,a=i.length;a>o;o++)i[o]===v&&(i[o]=arguments[n++]);for(;n<arguments.length;)i.push(arguments[n++]);return t.apply(this,i)}},v.bindAll=function(t){var e,n,i=arguments.length;if(1>=i)throw new Error("bindAll must be passed function names");for(e=1;i>e;e++)n=arguments[e],t[n]=v.bind(t[n],t);return t},v.memoize=function(t,e){var n=function n(i){var o=n.cache,a=e?e.apply(this,arguments):i;return v.has(o,a)||(o[a]=t.apply(this,arguments)),o[a]};return n.cache={},n},v.delay=function(t,e){var n=f.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},v.defer=function(t){return v.delay.apply(v,[t,1].concat(f.call(arguments,1)))},v.throttle=function(t,e,n){var i,o,a,r=null,s=0;n||(n={});var u=function(){s=!1===n.leading?0:v.now(),r=null,a=t.apply(i,o),r||(i=o=null)};return function(){var l=v.now();s||!1!==n.leading||(s=l);var c=e-(l-s);return i=this,o=arguments,0>=c||c>e?(clearTimeout(r),r=null,s=l,a=t.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(u,c)),a}},v.debounce=function(t,e,n){var i,o,a,r,s,u=function u(){var l=v.now()-r;e>l&&l>0?i=setTimeout(u,e-l):(i=null,n||(s=t.apply(a,o),i||(a=o=null)))};return function(){a=this,o=arguments,r=v.now();var l=n&&!i;return i||(i=setTimeout(u,e)),l&&(s=t.apply(a,o),a=o=null),s}},v.wrap=function(t,e){return v.partial(e,t)},v.negate=function(t){return function(){return!t.apply(this,arguments)}},v.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}},v.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},v.before=function(t,e){var n;return function(){return--t>0?n=e.apply(this,arguments):e=null,n}},v.once=v.partial(v.before,2),v.keys=function(t){if(!v.isObject(t))return[];if(g)return g(t);var e=[];for(var n in t)v.has(t,n)&&e.push(n);return e},v.values=function(t){for(var e=v.keys(t),n=e.length,i=Array(n),o=0;n>o;o++)i[o]=t[e[o]];return i},v.pairs=function(t){for(var e=v.keys(t),n=e.length,i=Array(n),o=0;n>o;o++)i[o]=[e[o],t[e[o]]];return i},v.invert=function(t){for(var e={},n=v.keys(t),i=0,o=n.length;o>i;i++)e[t[n[i]]]=n[i];return e},v.functions=v.methods=function(t){var e=[];for(var n in t)v.isFunction(t[n])&&e.push(n);return e.sort()},v.extend=function(t){if(!v.isObject(t))return t;for(var e,n,i=1,o=arguments.length;o>i;i++){e=arguments[i];for(n in e)m.call(e,n)&&(t[n]=e[n])}return t},v.pick=function(t,e,n){var i,o={};if(null==t)return o;if(v.isFunction(e)){e=_(e,n);for(i in t){var a=t[i];e(a,i,t)&&(o[i]=a)}}else{var r=d.apply([],f.call(arguments,1));t=new Object(t);for(var s=0,u=r.length;u>s;s++)(i=r[s])in t&&(o[i]=t[i])}return o},v.omit=function(t,e,n){if(v.isFunction(e))e=v.negate(e);else{var i=v.map(d.apply([],f.call(arguments,1)),String);e=function(t,e){return!v.contains(i,e)}}return v.pick(t,e,n)},v.defaults=function(t){if(!v.isObject(t))return t;for(var e=1,n=arguments.length;n>e;e++){var i=arguments[e];for(var o in i)void 0===t[o]&&(t[o]=i[o])}return t},v.clone=function(t){return v.isObject(t)?v.isArray(t)?t.slice():v.extend({},t):t},v.tap=function(t,e){return e(t),t};var O=function t(e,n,i,o){if(e===n)return 0!==e||1/e==1/n;if(null==e||null==n)return e===n;e instanceof v&&(e=e._wrapped),n instanceof v&&(n=n._wrapped);var r=p.call(e);if(r!==p.call(n))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!=+e?+n!=+n:0==+e?1/+e==1/n:+e==+n;case"[object Date]":case"[object Boolean]":return+e==+n}if("object"!=(void 0===e?"undefined":a(e))||"object"!=(void 0===n?"undefined":a(n)))return!1;for(var s=i.length;s--;)if(i[s]===e)return o[s]===n;var u=e.constructor,l=n.constructor;if(u!==l&&"constructor"in e&&"constructor"in n&&!(v.isFunction(u)&&u instanceof u&&v.isFunction(l)&&l instanceof l))return!1;i.push(e),o.push(n);var c,h;if("[object Array]"===r){if(c=e.length,h=c===n.length)for(;c--&&(h=t(e[c],n[c],i,o)););}else{var f,d=v.keys(e);if(c=d.length,h=v.keys(n).length===c)for(;c--&&(f=d[c],h=v.has(n,f)&&t(e[f],n[f],i,o)););}return i.pop(),o.pop(),h};v.isEqual=function(t,e){return O(t,e,[],[])},v.isEmpty=function(t){if(null==t)return!0;if(v.isArray(t)||v.isString(t)||v.isArguments(t))return 0===t.length;for(var e in t)if(v.has(t,e))return!1;return!0},v.isElement=function(t){return!(!t||1!==t.nodeType)},v.isArray=y||function(t){return"[object Array]"===p.call(t)},v.isObject=function(t){var e=void 0===t?"undefined":a(t);return"function"===e||"object"===e&&!!t},v.each(["Arguments","Function","String","Number","Date","RegExp"],function(t){v["is"+t]=function(e){return p.call(e)==="[object "+t+"]"}}),v.isArguments(arguments)||(v.isArguments=function(t){return v.has(t,"callee")}),"function"!=typeof/./&&(v.isFunction=function(t){return"function"==typeof t||!1}),v.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},v.isNaN=function(t){return v.isNumber(t)&&t!==+t},v.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===p.call(t)},v.isNull=function(t){return null===t},v.isUndefined=function(t){return void 0===t},v.has=function(t,e){return null!=t&&m.call(t,e)},v.noConflict=function(){return r._=s,this},v.identity=function(t){return t},v.constant=function(t){return function(){return t}},v.noop=function(){},v.property=function(t){return function(e){return e[t]}},v.matches=function(t){var e=v.pairs(t),n=e.length;return function(t){if(null==t)return!n;t=new Object(t);for(var i=0;n>i;i++){var o=e[i],a=o[0];if(o[1]!==t[a]||!(a in t))return!1}return!0}},v.times=function(t,e,n){var i=Array(Math.max(0,t));e=_(e,n,1);for(var o=0;t>o;o++)i[o]=e(o);return i},v.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},v.now=Date.now||function(){return(new Date).getTime()};var C={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},A=v.invert(C),L=function(t){var e=function(e){return t[e]},n="(?:"+v.keys(t).join("|")+")",i=RegExp(n),o=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(o,e):t}};v.escape=L(C),v.unescape=L(A),v.result=function(t,e){if(null!=t){var n=t[e];return v.isFunction(n)?t[e]():n}};var M=0;v.uniqueId=function(t){var e=++M+"";return t?t+e:e},v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var E=/(.)^/,T={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},I=/\\|'|\r|\n|\u2028|\u2029/g,P=function(t){return"\\"+T[t]};v.template=function(t,e,n){!e&&n&&(e=n),e=v.defaults({},e,v.templateSettings);var i=RegExp([(e.escape||E).source,(e.interpolate||E).source,(e.evaluate||E).source].join("|")+"|$","g"),o=0,a="__p+='";t.replace(i,function(e,n,i,r,s){return a+=t.slice(o,s).replace(I,P),o=s+e.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?a+="'+\n((__t=("+i+"))==null?'':__t)+\n'":r&&(a+="';\n"+r+"\n__p+='"),e}),a+="';\n",e.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var r=new Function(e.variable||"obj","_",a)}catch(t){throw t.source=a,t}var s=function(t){return r.call(this,t,v)};return s.source="function("+(e.variable||"obj")+"){\n"+a+"}",s},v.chain=function(t){var e=v(t);return e._chain=!0,e};var j=function(t){return this._chain?v(t).chain():t};v.mixin=function(t){v.each(v.functions(t),function(e){var n=v[e]=t[e];v.prototype[e]=function(){var t=[this._wrapped];return h.apply(t,arguments),j.call(this,n.apply(v,t))}})},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=u[t];v.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],j.call(this,n)}}),v.each(["concat","join","slice"],function(t){var e=u[t];v.prototype[t]=function(){return j.call(this,e.apply(this._wrapped,arguments))}}),v.prototype.value=function(){return this._wrapped},n(43)&&(i=[],void 0!==(o=function(){return v}.apply(e,i))&&(t.exports=o))}).call(window)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.MessageCenterModule=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),s=function(t){return t&&t.__esModule?t:{default:t}}(r);e.MessageCenterModule=function(){function t(e){i(this,t),this.ajaxTimeout=3e4,this.socket=null,this.ajaxUrl=e.ajaxUrl||{},this.cmd={},this.registedAction={},this.websocketurl=e.websocketurl||"",this.lib=e.lib||"socketio",this.publicKey=e.publicKey||"",this._commKey="",this.encryptedString="",this.token=e.token,this.jwtToken="",this.endCallBack=e.endCallBack,this.unLoginCallBack=e.unLoginCallBack,this.logInfo=e.logInfo}return a(t,[{key:"registerAction",value:function(t,e){return"function"==typeof e&&(this.registedAction[t]=e),this}},{key:"unRegisterAction",value:function(t){return void 0!==this.registedAction[t]&&delete this.registedAction[t],this}},{key:"dispatchAction",value:function(t,e,n){var i=this.registedAction[t];"function"==typeof i?i("ajax"===n?e:e.res||e.rep):s.default.log("未注册行为："+t,e)}},{key:"emit",value:function(t,e,n,i){"function"==typeof e&&(i=e),"object"===(void 0===e?"undefined":o(e))&&(n=e),this.registerAction(t,i),"ajax"===e?this.emitAjax(t,n):this.emitSocket({cmd:t,params:n})}},{key:"emitAjax",value:function(t,e){var n=this,i=this.ajaxUrl[t];if("userAccount"===t){var o=(new Date).getTime();i=i.replace(/\*/,o)}window.$.ajax({url:i,data:e,timeout:this.ajaxTimeout,success:function(e){s.default.log(i,e),e=e||{},n.dispatchAction(t,e,"ajax")},error:function(){}})}},{key:"emitSocket",value:function(t){if(this.socket)if("socketio"===this.lib)console.log("推送：",t.cmd,t),this.socket.emit("router",Base64.encode(JSON.stringify(t)));else{t.params?t.params.jwt=this.jwtToken:t.params={jwt:this.jwtToken},t.status={time:(new Date).getTime()},s.default.log("推送：",JSON.stringify(t));var e=CryptoJS.AES.encrypt(JSON.stringify(t),CryptoJS.enc.Utf8.parse(this._commKey),{mode:CryptoJS.mode.ECB,padding:CryptoJS.pad.Pkcs7});this.socket.write(e.toString())}else this.endCallBack&&this.endCallBack()}},{key:"generateCommKey",value:function(){try{this._commKey=Date.parse(new Date).toString()+Date.parse(new Date).toString()+Date.parse(new Date).toString().substring(0,6)}catch(t){s.default.log("初始化commKey失败",t)}return this}},{key:"generateEncryptedString",value:function(){try{var t="jwt="+this.token+"&commKey="+this._commKey,e=new window.JSEncrypt;e.setPublicKey(this.publicKey),this.encryptedString=e.encrypt(t)}catch(t){s.default.log("初始化encryptedString失败",t)}return this}},{key:"connectSocket",value:function(){var t=this;"primus"===this.lib&&(this.generateCommKey(),this.generateEncryptedString());try{"socketio"===this.lib?this.socket=window.io&&window.io(this.websocketurl,{"force new connection":!0}):"primus"===this.lib&&(this.socket=window.Primus.connect(this.websocketurl))}catch(t){return void s.default.log(t)}"socketio"===this.lib?(this.socket.on("router",function(t){var e=JSON.parse(Base64.decode(t));s.default.log("接收数据：",e.cmd,e),this.dispatchAction(e.cmd,e,"socket")}.bind(this)),this.socket.on("connect",function(){s.default.log("连接已建立")}),this.socket.on("disconnect",function(t){s.default.log("连接已断开")}),this.socket.on("close",function(t){s.default.log("连接已关闭")}),this.socket.on("connect_error",function(t){s.default.log("连接发生错误")}),this.socket.on("reconnecting",function(){s.default.log("重连中")})):"primus"===this.lib&&(this.socket.on("outgoing::url",function(e){e.query="login="+t.encryptedString,console.log("outgoing::url",e.query)}),this.socket.on("open",function(){s.default.log("连接成功"),t.unLoginCallBack&&t.unLoginCallBack()}),this.socket.on("data",function(e){var n=CryptoJS.AES.decrypt(e,CryptoJS.enc.Utf8.parse(this._commKey),{mode:CryptoJS.mode.ECB,padding:CryptoJS.pad.Pkcs7}),i=n.toString(CryptoJS.enc.Utf8),o=JSON.parse(i);t.logInfo(o),"conn::init"===o.cmd&&(this.jwtToken=o.res),this.dispatchAction(o.cmd,o,"socket")}.bind(this)),this.socket.on("error",function(t){s.default.log("连接出错")}),this.socket.on("reconnect",function(){s.default.log("重连中")}),this.socket.on("end",function(){s.default.log("连接已关闭"),t.endCallBack&&t.endCallBack()}))}},{key:"disconnectSocket",value:function(){this.socket&&("socketio"===this.lib?(this.socket.close(),this.socket.removeAllListeners()):this.socket.end(),this.socket=null)}}]),t}()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e.ObserverModule=function(){function t(){i(this,t),this.subscribers={}}return o(t,[{key:"publish",value:function(t){var e=this.subscribers[t];if(e){for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];for(var a=0;a<e.length;a++)e[a].apply(e,i)}else console.log("未观察事件： ",t);return this}},{key:"subscribe",value:function(t,e){return void 0===this.subscribers[t]&&(this.subscribers[t]=[]),this.subscribers[t].push(e),this}},{key:"unsubscribe",value:function(t,e){var n=this.subscribers[t];if(n)if(e){for(var i=n.length-1;i>=0;i--)if(e===n[i]){n.splice(i,1);break}}else for(var o=n.length-1;o>=0;o--)n.splice(o,1);return this}}]),t}()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.SceneManagerModule=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(1);e.SceneManagerModule=function(){function t(){i(this,t),this.currentScene=null,this.nextScene=null}return o(t,[{key:"loadScene",value:function(t){this.nextScene=t||this.nextScene,null!=this.currentScene?(a.observer.subscribe(this.currentScene.sceneName+"_exit",this.loadNextScene.bind(this)),this.currentScene.onExit()):(this.currentScene=this.nextScene,Laya.stage.addChild(this.currentScene),a.observer.publish(this.currentScene.sceneName+"_enter"))}},{key:"loadNextScene",value:function(){a.observer.unsubscribe(this.currentScene.sceneName+"_exit"),this.currentScene=null,this.loadScene()}}]),t}()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,i)}if("value"in o)return o.value;var r=o.get;if(void 0!==r)return r.call(i)},u=n(5),l=n(0),c=(function(t){t&&t.__esModule}(l),function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.init(),t}return a(e,t),r(e,[{key:"registerAction",value:function(t){var e=(t.messageCenter,t.observer);e.subscribe("pop::baida",this.baidaPopup.bind(this)),e.subscribe("pop::match::start",this.matchPopup.bind(this))}},{key:"init",value:function(){var t={x:678,y:379};this.dom_skeleton=(0,u.createSkeleton)("images/animate/baidafj"),this.dom_skeleton.set(t),this.addChildAt(this.dom_skeleton,0),this.btn_confirm.on(Laya.Event.CLICK,this,this.close),this.btn_close.on(Laya.Event.CLICK,this,this.close)}},{key:"baidaPopup",value:function(t,e,n){window.UIConfig.closeDialogOnSide=!1,this.callBack=n;var i="转到"+t+"个百搭图案赢得\n"+e;this.popup(0,i)}},{key:"matchPopup",value:function(){this.popup(1,"美元战场开始啦！")}},{key:"popup",value:function(t,n){var i=this;this.dom_skeleton.once(Laya.Event.STOPPED,this,function(){i.dom_skeleton.play("loop",!0)}),this.dom_skeleton.play("start",!1),this.dom_amount.text=n,this.dom_title.index=t,Laya.timer.once(5e3,this,this.close),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"popup",this).call(this)}},{key:"close",value:function(){window.UIConfig.closeDialogOnSide=!0,this.dom_skeleton.stop(),this.dom_skeleton.offAll(),this.callBack&&this.callBack(),this.callBack=null,Laya.timer.clear(this,this.close),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"close",this).call(this)}}]),e}(baidafjPopUI));e.default=c},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e.CommonTipsPopDialog=function(t){function e(){var t;i(this,e);for(var n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];var s=o(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a)));return s.init(),s}return a(e,t),r(e,[{key:"init",value:function(){this.initDom(),this.initConfig(),this.initEvent()}},{key:"registerAction",value:function(t){t.messageCenter;t.observer.subscribe("common::tips",this.myShow.bind(this))}},{key:"initDom",value:function(){this.btn_close=this.getChildByName("close_btn"),this.btn_sure=this.getChildByName("btn_sure")}},{key:"initConfig",value:function(){this.config={limitTime:!1,popBgHeight:420,btnSureY:325},this.confirmCallBack=null,this.cancelCallBack=null}},{key:"initEvent",value:function(){var t=this;this.btn_close.on(Laya.Event.CLICK,this,function(){t.cancelCallBack&&t.cancelCallBack(),t.myClose()}),this.btn_sure.on(Laya.Event.CLICK,this,function(){t.confirmCallBack&&t.confirmCallBack(),t.myClose()})}},{key:"myShow",value:function(t,e,n){this.pop_bg.height=this.config.popBgHeight,this.btn_sure.y=this.config.btnSureY,this.txt_content.text=t;var i=this.txt_content.displayHeight;if(i>90){var o=i-90;this.pop_bg.height+=o,this.btn_sure.y+=o}this.confirmCallBack=e,this.cancelCallBack=n,n?window.UIConfig.closeDialogOnSide=!1:Laya.timer.once(5e3,this,this.myClose),this.popup()}},{key:"myClose",value:function(){this.close(),window.UIConfig.closeDialogOnSide=!0,this.confirmCallBack=null,this.cancelCallBack=null,Laya.timer.clear(this,this,this.myClose)}}]),e}(commonPopTipsUI),e.CommonMatchPopDialog=function(t){function e(){var t;i(this,e);for(var n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];var s=o(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a)));return s.init(),s}return a(e,t),r(e,[{key:"init",value:function(){this.initDom(),this.initConfig(),this.initEvent()}},{key:"registerAction",value:function(t){t.messageCenter;t.observer.subscribe("common::match",this.myShow.bind(this))}},{key:"initDom",value:function(){this.btn_close=this.getChildByName("close_btn"),this.btn_sure=this.getChildByName("btn_sure")}},{key:"initConfig",value:function(){this.config={limitTime:!1,popBgHeight:383,btnSureY:363},this.callback=null}},{key:"initEvent",value:function(){this.btn_close.on(Laya.Event.CLICK,this,this.close),this.btn_sure.on(Laya.Event.CLICK,this,this.myClose)}},{key:"myShow",value:function(t,e){this.pop_bg.height=this.config.popBgHeight,this.btn_sure.y=this.config.btnSureY,this.txt_content.text=t;var n=this.txt_content.displayHeight;if(n>70){var i=n-70;this.pop_bg.height+=i,this.btn_sure.y+=i}this.callback="function"==typeof e?e:null,this.popup(),Laya.timer.once(5e3,this,this.close)}},{key:"myClose",value:function(){Laya.timer.clear(this,this.close),"function"==typeof this.callback&&(this.callback(),this.callback=null),this.txt_content.text="",this.close()}}]),e}(commonPopMatchUI)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(1),u=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.init(),e.instance=t,t}return a(e,t),r(e,[{key:"init",value:function(){this.subscribe()}},{key:"subscribe",value:function(){s.observer.subscribe("pop::defaultbet",this.show.bind(this))}},{key:"show",value:function(t){this.dom_text.text=t,this.dom_text.y=(this.height-this.dom_text.displayHeight)/2,this.dom_text.zOrder=2,this.x=Laya.stage.width/2,this.y=Laya.stage.height/2,Laya.stage.addChild(this),Laya.Tween.from(this,{scaleX:0,scaleY:0},300,Laya.Ease.backOut),Laya.timer.once(3e3,this,this.removeSelf)}}],[{key:"getInstance",value:function(){return this.instance||new this}}]),e}(defaultBetPopUI);e.default=u},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.HelpPopDialog=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(22),u=function(t){return t&&t.__esModule?t:{default:t}}(s),l=n(1);e.HelpPopDialog=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.init(),t}return a(e,t),r(e,[{key:"init",value:function(){this.initDom(),this.initEvent()}},{key:"registerAction",value:function(t){var e=(t.messageCenter,t.observer);e.subscribe("cmd::help",this.renderBet.bind(this)),e.subscribe("pop::help",this.myShow.bind(this))}},{key:"initDom",value:function(){this.dom_btn_left=this.getChildByName("btn_left"),this.dom_btn_right=this.getChildByName("btn_right"),this.bet=this.help_glr.find("bet",!0),new u.default(this.help_glr)}},{key:"initEvent",value:function(){this.getChildByName("close_btn1").on(Laya.Event.CLICK,this,this.myClose),this.getChildByName("close_btn2").on(Laya.Event.CLICK,this,this.myClose),this.dom_btn_left.on(Laya.Event.CLICK,this,this.switchItem.bind(this,"left")),this.dom_btn_right.on(Laya.Event.CLICK,this,this.switchItem.bind(this,"right"))}},{key:"switchItem",value:function(t){var e=this.help_glr.getChildByName("pagination"),n=e.selectedIndex;switch(t){case"left":e.selectedIndex=n<1?3:n-1;break;case"right":e.selectedIndex=n>2?0:n+1}}},{key:"renderBet",value:function(t){var e=t.info;0===Number(t.code)&&(this.bet[0].text=e.trigger8,this.bet[1].text=e.trigger7,this.bet[2].text=e.trigger6,this.bet[3].text=e.trigger5)}},{key:"myShow",value:function(t){var e=this.help_glr.getChildByName("pagination");e.selectedIndex=t||0,l.messageCenter.emit("help"),this.popup()}},{key:"myClose",value:function(){this.help_glr.getChildByName("pagination").selectedIndex=0,this.close()}}]),e}(helpPopUI)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.MatchFinishPopDialog=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),u=function(t){return t&&t.__esModule?t:{default:t}}(s),l=n(1);e.MatchFinishPopDialog=function(t){function e(){var t;i(this,e);for(var n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];var s=o(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a)));return s.init(),s}return a(e,t),r(e,[{key:"init",value:function(){this.initDom(),this.initEvent(),this.initReset()}},{key:"registerAction",value:function(t){t.messageCenter;t.observer.subscribe("matchResult",this.renderMatchResult.bind(this))}},{key:"initDom",value:function(){this.dom_close_btn1=this.getChildByName("close_btn1"),this.dom_close_btn2=this.getChildByName("close_btn2")}},{key:"initEvent",value:function(){this.dom_close_btn1.on(Laya.Event.CLICK,this,this.confirmClose),this.dom_close_btn2.on(Laya.Event.CLICK,this,this.confirmClose),this.dom_unloaded.on(Laya.Event.CLICK,this,u.default.gotoLogin)}},{key:"initReset",value:function(){this.rankTitle.visible=!1,this.amountTitle.visible=!1,this.rankTips.visible=!1,this.matchFile.visible=!1}},{key:"isLoadingOrContent",value:function(t){0===t?(this.dom_loading.visible=!0,this.dom_loading.text="虚位以待……",this.awardResult.visible=!1,this.dom_unloaded.visible=!1):1===t?(this.dom_loading.visible=!0,this.dom_loading.text="加载中……",this.awardResult.visible=!1,this.dom_unloaded.visible=!1):2===t?(this.dom_loading.visible=!1,this.awardResult.visible=!0,this.dom_unloaded.visible=!1):3===t&&(this.dom_loading.visible=!1,this.awardResult.visible=!1,this.dom_unloaded.visible=!0)}},{key:"renderMatchResult",value:function(t){this.myshow();var e=t.result,n=t.myRank,i=[];if(0===Number(t.code)){this.initReset(),e.forEach(function(t,e){var n=t;i.push({rankIcon:e,rankNum:{text:e+1,visible:e>2},nick:u.default.getActiveStr(n.user_name,9),winAmount:u.default.getActiveStr(parseInt(n.win_amount),10),deviceAmount:u.default.getActiveStr(parseInt(n.extra_amount),10)})}),this.list_rank_all.array=i,Number(n.rank)>0&&Number(n.extra_amount)>0?(this.my_rank.text=n.rank,this.my_amount.text=n.extra_amount,this.rankTitle.visible=!0,this.amountTitle.visible=!0):Number(n.rank)>0&&Number(n.extra_amount)<=0?(this.my_rank.text=n.rank,this.rankTitle.visible=!0,this.rankTips.visible=!0):Number(n.rank)<=0&&Number(n.extra_amount)<=0&&(this.matchFile.visible=!0,this.nextTime.text=t.nextTime.start);var o=this.my_rank.displayWidth-20,a=this.my_amount.displayWidth-25;this.txt_title03.x=213+o,this.txt_title05.x=108+a,this.rankTitle.x=(1334-this.rankTitle.width)/2,this.amountTitle.x=(1334-this.amountTitle.width)/2,this.tipsTime.x=(880-this.tipsTime.width)/2,0===e.length?u.default.checkLoginStatus()?this.isLoadingOrContent(0):this.isLoadingOrContent(3):this.isLoadingOrContent(2)}}},{key:"myshow",value:function(){this.isLoadingOrContent(1),window.UIConfig.closeDialogOnSide=!1,this.popup()}},{key:"confirmClose",value:function(){l.messageCenter.emit("confirm"),window.UIConfig.closeDialogOnSide=!0,this.close()}}]),e}(matchFinishPopUI)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.MatchHistoryPopDialog=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),u=function(t){return t&&t.__esModule?t:{default:t}}(s);n(1),e.MatchHistoryPopDialog=function(t){function e(){var t;i(this,e);for(var n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];var s=o(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a)));return s.init(),s}return a(e,t),r(e,[{key:"init",value:function(){this.initDom(),this.initConfig(),this.initEvent()}},{key:"registerAction",value:function(t){var e=(t.messageCenter,t.observer);e.subscribe("lastMatch",this.renderRankResult.bind(this)),e.subscribe("pop::match::history",this.myshow.bind(this))}},{key:"initDom",value:function(){this.dom_close_btn1=this.getChildByName("close_btn1"),this.dom_close_btn2=this.getChildByName("close_btn2")}},{key:"initConfig",value:function(){this.config={isFirst:!0}}},{key:"initEvent",value:function(){this.dom_close_btn1.on(Laya.Event.CLICK,this,this.close),this.dom_close_btn2.on(Laya.Event.CLICK,this,this.close),this.dom_unloaded.on(Laya.Event.CLICK,this,u.default.gotoLogin)}},{key:"isLoadingOrContent",value:function(t){0===t?(this.dom_loading.visible=!0,this.dom_loading.text="虚位以待……",this.awardResult.visible=!1,this.dom_unloaded.visible=!1):1===t?(this.dom_loading.visible=!0,this.dom_loading.text="加载中……",this.awardResult.visible=!1,this.dom_unloaded.visible=!1):2===t?(this.dom_loading.visible=!1,this.awardResult.visible=!0,this.dom_unloaded.visible=!1):3===t&&(this.dom_loading.visible=!1,this.awardResult.visible=!1,this.dom_unloaded.visible=!0)}},{key:"renderRankResult",value:function(t){var e=t.info,n=t.userInfo,i=[];0===Number(t.code)&&(e.forEach(function(t,n){var o=e[n];i.push({rankIcon:n,rankNum:{text:n+1,visible:n>2},nick:u.default.getActiveStr(o.user_name,9),winAmount:u.default.getActiveStr(parseInt(o.win_amount),10),deviceAmount:u.default.getActiveStr(parseInt(o.extra_amount),10)})}),this.list_rank_all.array=i,this.last_extra_time.text=t.time,this.my_rank.text=n.rank,this.my_amount.text=n.extra_amount,0===e.length?u.default.checkLoginStatus()?this.isLoadingOrContent(0):this.isLoadingOrContent(3):this.isLoadingOrContent(2))}},{key:"myshow",value:function(t){this.isLoadingOrContent(1),this.popup()}}]),e}(matchHistoryPopUI)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.RankPopDialog=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(0),u=function(t){return t&&t.__esModule?t:{default:t}}(s),l=n(1);e.RankPopDialog=function(t){function e(){var t;i(this,e);for(var n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];var s=o(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a)));return s.init(),s}return a(e,t),r(e,[{key:"init",value:function(){this.initDom(),this.initConfig(),this.initEvent()}},{key:"registerAction",value:function(t){var e=t.messageCenter,n=t.observer;e.registerAction("day",this.renderRankList.bind(this)),e.registerAction("week",this.renderRankList.bind(this)),e.registerAction("month",this.renderRankList.bind(this)),e.registerAction("top3",this.renderRichList.bind(this)),e.registerAction("poolLog",this.renderPoolLog.bind(this)),e.registerAction("myPrizeLog",this.rendermMyPrizeLog.bind(this)),n.subscribe("pop::rank",this.myShow.bind(this))}},{key:"dispatchAction",value:function(t){this.isLoadingOrContent(1),t.emitAjax("day"),t.emit("poolLog"),t.emit("myPrizeLog"),t.emit("top3")}},{key:"initDom",value:function(){this.dom_close_btn=this.getChildByName("close_btn"),this.my_rank_box=this.getChildByName("myRankBox"),this.dom_rich_list=this.getChildByName("richList").find("item",!0)}},{key:"initConfig",value:function(){this.config={isFirstMyList:!0,perioArr:["day","week","month"],isFirst:!0}}},{key:"initEvent",value:function(){this.dom_close_btn.on(Laya.Event.CLICK,this,this.close),this.dom_unloaded.on(Laya.Event.CLICK,this,u.default.gotoLogin),this.tab_nav.selectHandler=Laya.Handler.create(this,this.tabSwitchHandler,null,!1)}},{key:"tabSwitchHandler",value:function(t){var e=0,n=void 0;3===t?(e=1,this.isLoadingOrContent(1),l.messageCenter.emit("poolLog"),this.my_rank_box.visible=!1):4===t?(e=2,this.isLoadingOrContent(1),l.messageCenter.emit("myPrizeLog"),this.my_rank_box.visible=!1):(e=0,n=this.config.perioArr[t],this.isLoadingOrContent(1),l.messageCenter.emitAjax(n),this.my_rank_box.visible=!0),this.tab_con.selectedIndex=e}},{key:"isLoadingOrContent",value:function(t){0===t?(this.dom_loading.visible=!0,this.dom_loading.text="暂无数据……",this.tab_con.visible=!1,this.dom_unloaded.visible=!1):1===t?(this.dom_loading.visible=!0,this.dom_loading.text="加载中……",this.tab_con.visible=!1,this.dom_unloaded.visible=!1):2===t?(this.dom_loading.visible=!1,this.tab_con.visible=!0,this.dom_unloaded.visible=!1):3===t&&(this.dom_loading.visible=!1,this.tab_con.visible=!1,this.dom_unloaded.visible=!0)}},{key:"renderRichList",value:function(t){var e=t.info;0===t.code&&this.dom_rich_list.forEach(function(t,n){var i=e[n],o=t.getChildByName("rank"),a=t.getChildByName("name"),r=t.getChildByName("point");i?(o.index=n,a.text=u.default.getActiveStr(i.user_name,9),r.text=u.default.getActiveStr(parseInt(i.amount),10)):(o.index=n,a.text="虚位以待……",a.y=27,r.visible=!1)})}},{key:"renderPoolLog",value:function(t){var e=t.info,n=[];0===t.code&&(e.forEach(function(t,i){var o=e[i];n.push({name:o.user_name,award:Number(o.pool)+3+"百搭",amount:u.default.getActiveStr(parseInt(o.amount),10),time:o.raw_add_time})}),this.list_rank_award.array=n,0===e.length?u.default.checkLoginStatus()?this.isLoadingOrContent(0):this.isLoadingOrContent(3):this.isLoadingOrContent(2))}},{key:"rendermMyPrizeLog",value:function(t){var e=t.info,n=[];0===t.code&&(e.forEach(function(t,i){var o=e[i];n.push({order:i+1,amount:u.default.getActiveStr(parseInt(o.win_amount),10),time:o.raw_add_time})}),this.list_rank_gains.array=n,0===e.length?u.default.checkLoginStatus()?this.isLoadingOrContent(0):this.isLoadingOrContent(3):this.isLoadingOrContent(2))}},{key:"renderRankList",value:function(t){if(0===Number(t.code)){var e=[],n=Number(t.myRank);t.data.forEach(function(t,n){var i=Number(t.rank_trend);e.push({rankIcon:n,rankNum:{text:n+1,visible:n>2},name:u.default.getActiveStr(t.nickname,9),point:u.default.getActiveStr(parseInt(t.amount),10),trend:{index:3===i?0:i}})}),this.tab_con.selectedIndex=0,this.list_rank_all.array=e,0===t.data.length?u.default.checkLoginStatus()?(this.isLoadingOrContent(0),this.myrank.text="当前排名>50",this.my_rank_box.x=50):(this.isLoadingOrContent(0),this.myrank.text="您尚未登录！",this.my_rank_box.x=50):(this.isLoadingOrContent(2),n>0&&n<51?(this.myrank.text=n,this.my_rank_box.x=90):n>50?(this.myrank.text="当前排名>50",this.my_rank_box.x=50):(this.myrank.text="您尚未登录！",this.my_rank_box.x=50))}}},{key:"myShow",value:function(t){this.config.isFirst&&(this.dispatchAction(t),this.config.isFirst=!1),this.popup()}}]),e}(rankPopUI)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e.RechargePopDialog=function(t){function e(){var t;i(this,e);for(var n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];var s=o(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a)));return s.init(),s}return a(e,t),r(e,[{key:"init",value:function(){this.initDom(),this.initConfig(),this.initEvent(),this.keyBoardNumber=new window.Tools.KeyBoardNumber}},{key:"registerAction",value:function(t){t.messageCenter;t.observer.subscribe("pop::recharge",this.myShow.bind(this))}},{key:"initDom",value:function(){this.dom_close_btn=this.getChildByName("close_btn"),this.input_txt=this.btn_input.getChildByName("input_txt"),this.input_txt.text="100"}},{key:"initConfig",value:function(){this.config={rechargeNum:["10","50","100","200"],info:"请输入大于0的整数"}}},{key:"initEvent",value:function(){this.dom_close_btn.on(Laya.Event.CLICK,this,this.close),this.btn_buy.on(Laya.Event.CLICK,this,this.ensureFn),this.btn_input.on(Laya.Event.CLICK,this,this.showKeyBoardNumber.bind(this)),this.tab_nav.selectHandler=Laya.Handler.create(this,this.tabBtnChoose,null,!1)}},{key:"showKeyBoardNumber",value:function(){this.keyBoardNumber.enter("",{length:8,close:this.hideKeyBoardNumber.bind(this),input:null})}},{key:"hideKeyBoardNumber",value:function(t,e){var n=this.config.rechargeNum.indexOf(String(e));"confirm"===t&&e?(this.input_txt.text=e,this.tab_nav.selectedIndex=n):"confirm"!==t||e||(this.input_txt.text=this.config.rechargeNum[2],this.tab_nav.selectedIndex=2)}},{key:"tabBtnChoose",value:function(t){-1!==t&&(this.input_txt.text=this.config.rechargeNum[t])}},{key:"ensureFn",value:function(){var t=window.gameId,e=window.tradeName,n=this.input_txt.text,i=window.platform,o=window.redirect_uri,a="";Number(n)>0&&(a="/?act=payment&gameId="+t+"&tradeName="+e+"&amount="+n+"&platform="+i+"&redirect_uri="+o,window.location.href=a)}},{key:"myShow",value:function(){this.popup()}}]),e}(rechargePopUI)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,i)}if("value"in o)return o.value;var r=o.get;if(void 0!==r)return r.call(i)},l=n(5),c=n(0),h=i(c),f=n(2),d=i(f),p=function(t){function e(){o(this,e);var t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.init(),t}return r(e,t),s(e,[{key:"registerAction",value:function(t){t.messageCenter;t.observer.subscribe("pop::win",this.popup.bind(this))}},{key:"init",value:function(){var t={x:670,y:712};this.flag=!1,this.dom_skeleton=(0,l.createSkeleton)("images/animate/winpop"),this.dom_skeleton.set(t),this.addChildAt(this.dom_skeleton,0),this.on(Laya.Event.CLICK,this,this.close)}},{key:"popup",value:function(t,n,i){var o=this;d.default.getInstance().play("coin"),this.flag=!0,window.UIConfig.closeDialogOnSide=!1,this.callBack=i,this.dom_skeleton.once(Laya.Event.STOPPED,this,function(){o.dom_skeleton.play("loop",!0)}),this.dom_skeleton.play("start",!1),this.renderWinAmount(t,function(){o.flag=!1,Laya.timer.once(3e3,o,o.close)}),this.dom_win_title.index=this.renderRate(t,n),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"popup",this).call(this)}},{key:"renderWinAmount",value:function(t,e){var n=this.dom_amount,i=Number(t),o=0,a=Math.max(1,Math.floor(2*i/100));!function t(){o+=a,o>=i?(o=i,e&&e()):Laya.timer.frameOnce(2,null,t),n.text="$"+h.default.addThousandSymbol(o)}()}},{key:"renderRate",value:function(t,e){var n=t/e,i=0;return n>5&&n<=10?i=0:n>10&&n<=30?i=1:n>30&&(i=2),i}},{key:"close",value:function(){this.flag||(window.UIConfig.closeDialogOnSide=!0,this.dom_skeleton.stop(),this.dom_skeleton.offAll(),this.callBack&&this.callBack(),this.callBack=null,Laya.timer.clear(this,this.close),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"close",this).call(this))}}]),e}(winPopUI);e.default=p},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(8),l=i(u),c=n(0),h=i(c),f=n(4),d=i(f),p=n(3),m=n(11),y=i(m),g=n(7),b=(i(g),n(1)),v=n(38),_=i(v),k=n(9),w=(i(k),n(10)),x=(i(w),n(5)),S=n(6),O=i(S),C=n(2),A=i(C),L=Laya.Event.CLICK,M=function(t){function e(){o(this,e);var t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.init(),e.instance=t,t}return r(e,t),s(e,[{key:"init",value:function(){this.initDom(),this.initConfig(),this.initEvent(),this.subscribe()}},{key:"subscribe",value:function(){b.observer.subscribe("lapa::stop",this.lapaStop.bind(this)),b.observer.subscribe("bet::success",this.betSuccess.bind(this)),b.observer.subscribe("bet::inputamount",this.updateDomInput.bind(this)),b.observer.subscribe("game::reset",this.reset.bind(this))}},{key:"initConfig",value:function(){this.config={gameStatus:"ready",MIN_INPUT:250,MAX_INPUT:5e5,base:250,user_input_text:250,isAuto:0,autoTimes:0}}},{key:"initDom",value:function(){var t=this,e={buttonUrl:"images/room/btn_bg.png",bgUrl:"images/load/morebg.png",labelFont:"button_font"};e.itemList=p.DEFAULT_AMOUNT,e.clickHandler=function(e){t.btnDisAble()||(A.default.getInstance().play("btn"),t.updateDomInput(e))},this.defaultbet_box.addChild(new _.default(e)),e.itemList=p.AUTOPLAY_TIMES,e.clickHandler=function(e){t.checkEnoughBet()&&(A.default.getInstance().play("btn_start"),t.renderStartBtnStatus("auto",e))},this.autoplay_box.addChild(new _.default(e))}},{key:"initEvent",value:function(){var t=this;this.btn_sub.on(L,this,this.addSubHandler.bind(this,"sub")),this.btn_add.on(L,this,this.addSubHandler.bind(this,"add")),this.btn_max.on(L,this,this.maxHandler),this.btn_input.on(L,this,function(){t.btnDisAble()||t.defaultbet_box.getChildAt(0).toggle()}),this.btn_i.on(L,this,function(){A.default.getInstance().play("btn"),b.observer.publish(l.default.POP__HELP)}),(0,x.addLongClickEvent)(this.btn_start,this.startGame.bind(this),this.showAutoPlay.bind(this)),(0,x.clickOtherAreaHandler)(this.btn_input,this.defaultbet_box),(0,x.clickOtherAreaHandler)(this.btn_start,this.autoplay_box)}},{key:"startGame",value:function(){switch(this.config.gameStatus){case"ready":this.checkEnoughBet()&&(this.emit(),this.renderStartBtnStatus("going"),A.default.getInstance().play("btn_start"),this.config.gameStatus="going");break;case"going":console.log("游戏进行中不可点...");break;case"auto":this.renderStartBtnStatus("going")}}},{key:"renderStartBtnStatus",value:function(t,e){switch(t){case"ready":this.dom_start_sk.play("ready",!0);break;case"going":this.autoplay_box.getChildAt(0).hide(),this.dom_auto.visible=!1,this.dom_auto.text=0,this.config.isAuto=0,this.config.autoTimes=0,this.dom_start_sk.play("disable",!1);break;case"auto":if(this.config.isAuto=1,this.config.autoTimes=Number(e)-1,this.dom_auto.text=this.config.autoTimes,this.dom_auto.visible=!0,this.dom_start_sk.play("auto",!1),this.emit(),0===this.config.autoTimes)return void this.renderStartBtnStatus("going")}this.config.gameStatus=t}},{key:"showAutoPlay",value:function(){this.btnDisAble()||(A.default.getInstance().play("btn"),this.autoplay_box.getChildAt(0).toggle())}},{key:"lapaStop",value:function(t,e){var n=this;if(t>0){if("auto"!==this.config.gameStatus){var i=function(){var e=function(){n.renderWinAmount(t),n.gameNext()};t/n.config.user_input_text<=5?e():Laya.timer.once(2e3,n,function(){return b.observer.publish("pop::win",t,n.config.user_input_text,e)})};Number(e.extra_amount)>0?Laya.timer.once(2e3,this,function(){return b.observer.publish("pop::baida",Number(e.num),Number(e.extra_amount),i)}):i()}else this.renderWinAmount(t,function(){return Laya.timer.once(2e3,n,n.gameNext)});b.observer.publish("update::useraccount",t)}else O.default.getInstance().jiujijin(),"auto"===this.config.gameStatus?Laya.timer.once(1500,this,this.gameNext):this.gameNext()}},{key:"gameNext",value:function(){"auto"===this.config.gameStatus?this.renderStartBtnStatus("auto",this.config.autoTimes):this.renderStartBtnStatus("ready"),b.observer.publish("game::stop")}},{key:"emit",value:function(){this.dom_25.index=0,this.dom_win.visible=!1,b.observer.publish(l.default.GAME__START),b.messageCenter.emit(l.default.SOCKET__BET,{amount:this.config.user_input_text,isAuto:this.config.isAuto})}},{key:"betSuccess",value:function(){b.observer.publish("update::useraccount",-1*this.config.user_input_text),h.default.setCookie("defaultBet"+GM.gameId+GM.user_id,this.config.user_input_text)}},{key:"maxHandler",value:function(){if(!h.default.willGotoLogin()&&!this.btnDisAble()){A.default.getInstance().play("btn_add");var t=y.default.getInstance(),e=Math.max(t.config.yuNum,t.config.tingDou);e-=e%this.config.base,e=Math.max(e,this.config.MIN_INPUT),e=Math.min(e,this.config.MAX_INPUT),this.btn_max.disabled=!0,this.updateDomInput(e)}}},{key:"addSubHandler",value:function(t){if(!h.default.willGotoLogin()&&!this.btnDisAble()){var e=this.config,n=h.default.addSubHandler(t,e.base,e.MIN_INPUT,e.MAX_INPUT,e.user_input_text);this.btn_max.disabled=!1,A.default.getInstance().play("btn_"+t),this.updateDomInput(n)}}},{key:"updateDomInput",value:function(t){var e=Number(t)||this.config.MIN_INPUT;this.input_txt.text=e,this.config.user_input_text=e,e===this.config.MIN_INPUT?this.btn_sub.disabled=!0:this.btn_sub.disabled=!1,e===this.config.MAX_INPUT?(this.btn_add.disabled=!0,this.btn_max.disabled=!0):(this.btn_add.disabled=!1,this.btn_max.disabled=!1),b.observer.publish("jackpot::open",e)}},{key:"renderWinAmount",value:function(t,e){this.dom_25.index=1;var n=this.dom_win;n.visible=!0;var i=Number(t),o=0,a=Math.max(1,Math.floor(2*i/100));!function t(){o+=a,o>=i?(o=i,e&&e()):n.visible&&Laya.timer.frameOnce(2,null,t),n.text="$"+h.default.addThousandSymbol(o)}()}},{key:"checkEnoughBet",value:function(){if(!h.default.willGotoLogin()){var t=y.default.getInstance(),e=t.config.yuNum,n=t.config.tingDou,i=this.config.user_input_text,o=d.default.localStatus||e>=i||n>=i;return o||b.observer.publish("common::tips","余额不足，请充值...",function(){return b.observer.publish("pop::recharge")}),o}}},{key:"btnDisAble",value:function(){var t="ready"!==this.config.gameStatus;return t&&console.log("不可点..."),t}},{key:"reset",value:function(){this.renderStartBtnStatus("ready"),this.config.isAuto=0,this.config.autoTimes=0,this.dom_auto.visible=!1}}],[{key:"getInstance",value:function(){return this.instance||new this}}]),e}(bottomUI);e.default=M},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(6),l=i(u),c=n(0),h=i(c),f=n(4),d=i(f),p=n(1),m=n(2),y=i(m),g=function(t){function e(){o(this,e);var t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.init(),e.instance=t,t}return r(e,t),s(e,[{key:"init",value:function(){l.default.getInstance().noticeSystem(this,421),this.initEvent(),this.initSoundState(),this.hide()}},{key:"initEvent",value:function(){var t=this;this.btn_voice.on(Laya.Event.CLICK,this,function(){t.visible=!1,t.changeSoundState()}),this.btn_help.on(Laya.Event.CLICK,this,function(){y.default.getInstance().play("btn"),t.visible=!1,p.observer.publish("pop::help")})}},{key:"initSoundState",value:function(){"false"===h.default.getCookie(d.default.SOUND_STATE_KEY)?(this.btn_voice.index=1,p.observer.publish("game::voice",!1)):(h.default.setCookie(d.default.SOUND_STATE_KEY,"true"),this.btn_voice.index=0,p.observer.publish("game::voice",!0))}},{key:"changeSoundState",value:function(){var t=h.default.getCookie(d.default.SOUND_STATE_KEY),e=void 0;"true"===t?(t="false",this.btn_voice.index=1,e=!1):(y.default.getInstance().play("btn"),t="true",this.btn_voice.index=0,e=!0),p.observer.publish("game::voice",e),h.default.setCookie(d.default.SOUND_STATE_KEY,t)}},{key:"setAnchor",value:function(){var t=null;t=0===this.x?{pivotX:.5*this.width,x:.5*this.width}:{pivotX:0,x:0},this.set(t)}},{key:"toggle",value:function(){this.visible?this.hide():this.show()}},{key:"show",value:function(){this.visible=!0,this.setAnchor(),Laya.Tween.from(this,{scaleX:0,scaleY:0},200,Laya.Ease.backOut,Laya.Handler.create(this,this.setAnchor))}},{key:"hide",value:function(){this.visible=!1}}],[{key:"getInstance",value:function(){return this.instance||new this}}]),e}(menuUI);e.default=g},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.options=t,n.init(),n}return a(e,t),r(e,[{key:"init",value:function(){this.options=Object.assign({initX:11,disY:8},this.options),this.options.buttonSource=Laya.loader.getRes(this.options.buttonUrl);var t=this.computeSize();this.set(t),this.createBg(t),this.createButtons(),this.initEvent(),this.hide()}},{key:"computeSize",value:function(){var t=this.options.buttonSource.sourceWidth,e=this.options.buttonSource.sourceHeight,n=this.options.itemList.length;return{width:t+2*this.options.initX,height:n*e+this.options.disY*(n+1)}}},{key:"createBg",value:function(t){var e=new Laya.Image(this.options.bgUrl);e.sizeGrid="25,25,25,25",e.set(t),this.addChild(e)}},{key:"createButtons",value:function(){var t=this,e=this.options.buttonSource.sourceHeight;this.options.itemList.forEach(function(n,i){var o=new Laya.Button(t.options.buttonUrl,n);o.set({stateNum:1,labelFont:t.options.labelFont,x:t.options.initX,y:e*i+t.options.disY*(i+1)}),t.addChild(o)})}},{key:"initEvent",value:function(){var t=this;this.findType("Button").forEach(function(e,n){e.on(Laya.Event.CLICK,t,function(){t.options.clickHandler(t.options.itemList[n]),t.hide()})})}},{key:"toggle",value:function(){this.visible?this.hide():this.show()}},{key:"setAnchor",value:function(){var t=null;t=0===this.x?{pivotX:.5*this.width,pivotY:this.height,x:.5*this.width,y:0}:{pivotX:0,pivotY:0,x:0,y:-1*this.height},this.set(t)}},{key:"show",value:function(){this.visible=!0,this.setAnchor(),Laya.Tween.from(this,{scaleX:0,scaleY:0},200,Laya.Ease.backOut,Laya.Handler.create(this,this.setAnchor))}},{key:"hide",value:function(){this.visible=!1}}]),e}(Laya.Sprite);e.default=s},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.MatchOpenUIView=e.MatchCloseUIView=e.RoomMatch=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(1),l=n(6),c=(i(l),n(23)),h=(n(3),n(0)),f=i(h),d=n(8),p=i(d),m=n(7),y=i(m),g=Laya.Event.CLICK,b=c._.debounce(function(){u.observer.publish("match::tab")},600,!0),v=e.RoomMatch=function(t){function e(){o(this,e);var t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.init(),e.instance=t,t}return r(e,t),s(e,[{key:"init",value:function(){this.isInMatch=!1,this.nextTime=null,this.domMatchCloseUi=_.getInstance(),this.domMatchOpenUi=k.getInstance(),this.addChildren(this.domMatchCloseUi,this.domMatchOpenUi),this.timeCountDown=f.default.createTimeCountDown()}},{key:"updateDataInfo",value:function(t){var e=this,n=t.isInMatch>0&&"0"!==String(t.endTime),i="0"!==String(t.nextTime.start);this.nextTime=null,this.domMatchCloseUi.renderCountDownInfo(!1);var o=this.dealWithPrevueInfo(t.nextTime),a=o.titleTxt,r=o.contentTxt;switch(this.domMatchCloseUi.renderPrevueInfo(a,r),!0){case!n&&!i:this.updateMatchState(!1),this.domMatchOpenUi.renderMiddleBoxInfo(a,r);break;case!n&&i:this.updateMatchState(!1),this.domMatchOpenUi.renderMiddleBoxInfo(a,r);var s=parseInt(t.restSeconds);this.nextTime=t.nextTime,this.timeCountDown&&this.timeCountDown.clear(),this.timeCountDown.start(s,function(t){e.domMatchCloseUi.renderCountDownInfo("下次开启剩余",f.default.toDetailTime(t))},function(){e.updateDataInfo({isInMatch:1,endTime:e.nextTime.end,currentTime:e.nextTime.start,nextTime:{start:"0"}}),y.default.getInstance().addBacklogList(function(){return u.observer.publish("pop::match::start")})});break;case n&&!i:case n&&i:this.updateMatchState(!0);var s=parseInt(t.restSeconds);this.timeCountDown&&this.timeCountDown.clear(),this.timeCountDown.start(s,function(t){var n=f.default.toDetailTime(t);e.domMatchCloseUi.renderCountDownInfo("当前比赛剩余时间",n),e.domMatchOpenUi.renderMiddleBoxInfo("当前比赛剩余时间",n)},function(){e.domMatchCloseUi.renderCountDownInfo("当前比赛结算中...",""),e.domMatchOpenUi.renderMiddleBoxInfo("当前比赛结算中...","")}),this.emitMatchRank(),Laya.timer.clear(this,this.emitMatchRank),Laya.timer.loop(3e4,this,this.emitMatchRank)}}},{key:"emitMatchRank",value:function(){u.messageCenter.emit(p.default.SOCKET__MATCH__RANK)}},{key:"emitLastMatch",value:function(){u.messageCenter.emit(p.default.SOCKET__LAST__MATCH),Laya.timer.clear(this,this.emitMatchRank)}},{key:"matchResultHandler",value:function(t){this.domMatchOpenUi.matchResultHandler(t),Laya.timer.clear(this,this.emitMatchRank)}},{key:"dealWithPrevueInfo",value:function(t){var e=void 0,n=void 0;if(0===Number(t.start))n="敬请期待";else{var i=t.start.split(" "),o=i[0],a=i[1].slice(0,i[1].lastIndexOf(":")),r=t.end.split(" ")[1];r=r.slice(0,r.lastIndexOf(":")),n=o+"\n"+a+" - "+r}return e="下次比赛",{titleTxt:e,contentTxt:n}}},{key:"updateMatchState",value:function(t){this.isInMatch=t}},{key:"renderAmount",value:function(t){this.domMatchCloseUi.renderAmount(t),this.domMatchOpenUi.renderAmount(t)}}],[{key:"getInstance",value:function(){return this.instance||new this}}]),e}(Laya.Box),_=e.MatchCloseUIView=function(t){function e(){o(this,e);var t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.init(),e.instance=t,t}return r(e,t),s(e,[{key:"init",value:function(){this.visible=!1,this.initEvent(),u.observer.subscribe("match::tab",this.stateChange.bind(this))}},{key:"renderPrevueInfo",value:function(t,e){this.prevue_box.dataSource={title:t,content:e}}},{key:"renderCountDownInfo",value:function(t,e){this.count_down_box.visible=!1,t&&(this.count_down_box.dataSource={title:t,content:e},this.count_down_box.visible=!0)}},{key:"initEvent",value:function(){this.btn_tab.on(g,this,b)}},{key:"renderAmount",value:function(t){t&&(this.domAmount.text=t)}},{key:"stateChange",value:function(){this.visible=!this.visible}}],[{key:"getInstance",value:function(){return this.instance||new this}}]),e}(match_closeUI),k=e.MatchOpenUIView=function(t){function e(){o(this,e);var t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.init(),e.instance=t,t}return r(e,t),s(e,[{key:"init",value:function(){this.initEvent(),u.observer.subscribe("match::tab",this.stateChange.bind(this))}},{key:"initEvent",value:function(){this.btn_tab.on(g,this,b),this.btn_last.on(g,this,function(){u.messageCenter.emit("lastMatch"),u.observer.publish("pop::match::history")}),this.btn_match.on(g,this,function(){u.observer.publish(p.default.POP__HELP,2)})}},{key:"stateChange",value:function(){this.visible=!this.visible}},{key:"lastMatchHandler",value:function(t){v.getInstance().isInMatch||(this.tabTitleBox("last"),this.renderList(t.info),this.myRank(t.userInfo))}},{key:"matchRankHandler",value:function(t){v.getInstance().isInMatch&&(this.tabTitleBox("match"),this.renderList(t.info),this.myRank(t.myRank))}},{key:"tabTitleBox",value:function(t){this.tab_title_box.getChildByName("last").visible=!1,this.tab_title_box.getChildByName("match").visible=!1,this.tab_title_box.getChildByName(t).visible=!0}},{key:"renderAmount",value:function(t){t&&(this.domAmount.text=t)}},{key:"matchResultHandler",value:function(t){this.tabTitleBox("last"),this.renderList(t.result),this.myRank(t.myRank)}},{key:"renderMiddleBoxInfo",value:function(t,e){this.middle_box.dataSource={title:t,content:e}}},{key:"renderList",value:function(t){var e=[];if(!t.length)return this.dom_nobody.visible=!0,void(this.list_box.visible=!1);t.forEach(function(t,n){e.push({icon:n,rank:n+1,name:f.default.getActiveStr(t.user_name,6),amount:f.default.toWanSymbol(t.win_amount||t.extra_amount)})}),this.dom_nobody.visible=!1,this.list_box.visible=!0,this.list_box.array=e}},{key:"myRank",value:function(t){var e=t.rank,n=void 0,i=void 0;t.hasOwnProperty("extra_amount")?(n=t.extra_amount,i="分得总额: "):(n=t.win_amount,i="赢取总额: "),this.bottom_box.dataSource={title:"我的排名: "+(Number(e)?e:">50"),content:i+n}}}],[{key:"getInstance",value:function(){return this.instance||new this}}]),e}(match_openUI)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(1),l=n(42),c=i(l),h=n(12),f=i(h),d=n(3),p=n(8),m=i(p),y=n(0),g=i(y),b=n(2),v=i(b),_=function(t){function e(){o(this,e);var t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.init(),t.result_data={},e.instance=t,t}return r(e,t),s(e,[{key:"init",value:function(){this.x=137,this.isGameGoing=!1,this.addScrollRect(),this.jackpot_box.addChild(f.default.getInstance()),this.addChildrenLine(),this.subscribe()}},{key:"subscribe",value:function(){var t=this;u.observer.subscribe(m.default.MATCH__TAB,this.posChange.bind(this)),u.observer.subscribe(m.default.GAME__START,this.go.bind(this)),u.observer.subscribe("game::reset",function(){t.isGameGoing&&t.stop()})}},{key:"addScrollRect",value:function(){this.lapa_box.scrollRect=new Laya.Rectangle(-45,0,this.lapa_box.width,this.lapa_box.height)}},{key:"addChildrenLine",value:function(){var t=this;d.STATE_LIST.forEach(function(e,n){Laya.timer.once(100*n,t,function(){var i=d.getStateList.call(e);t.lapa_box.addChild(new c.default(i,n,t.stopHandler.bind(t),d.LOSE_LINE[n]))})})}},{key:"go",value:function(){var t=this;this.isGameGoing=!0,this.lapa_box._childs.forEach(function(e,n){Laya.timer.once(100*n,t,function(){e.go()})})}},{key:"stop",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.pic||d.LOSE_LINE;this.lapa_box._childs.forEach(function(e,i){Laya.timer.once(150*i,t,function(){e.stop(n[i])})}),this.result_data=e}},{key:"posChange",value:function(){var t=0===this.x?137:0;Laya.Tween.to(this,{x:t},300,Laya.Ease.circOut)}},{key:"stopHandler",value:function(t){var e=this;if(4===t){if(this.result_data.allMatch&&Number(this.result_data.allMatch.num)>=3){var n={isBaidaIcon:!0};this.result_data.lines.push(n)}var i=0,o=0;!function t(n){if(n);else if(++i!==o)return;i=0;var a=e.result_data.lines||[],r=a.shift();if(void 0!==r){a.push(r),g.default.log("继续下一条线。。。");var s=null;r.isBaidaIcon?(s=function(n,i){return n.playBaida(e.result_data.pic[i],t)},o=e.result_data.allMatch.num):(o=r.num,s=function(e,n){return e.playLine(d.LINES_25[r.no][n],d.POS_LINE[n],r.num,t)}),e.lapa_box._childs.forEach(s)}}(!0),this.isGameGoing=!1,u.observer.publish("lapa::stop",Number(this.result_data.total),this.result_data.allMatch),v.default.getInstance().play("lapa_stop"),g.default.log("该局游戏结束。。。")}}}],[{key:"getInstance",value:function(){return this.instance||new this}}]),e}(lapaUI);e.default=_},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(5),u=n(0),l=function(t){return t&&t.__esModule?t:{default:t}}(u),c=n(3),h=window.requestAnimationFrame,f=window.cancelAnimationFrame,d=function(t){function e(t,n,a,r){i(this,e);var s=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return s.stateList=t,s.initState=n,s.currentState=n,s.initSkin=r,s.endCallBack=a,s.init(),s}return a(e,t),r(e,[{key:"init",value:function(){this.shouldStop=!1,0!==this.initState&&this.addSkeleton(),this.renderDollarSkin(this.initSkin)}},{key:"addSkeleton",value:function(){var t=this.domSkele=(0,s.createSkeleton)("images/animate/icon",60);t.visible=!1,t.set({scaleX:1.2,scaleY:.8}),t.set(this.stateList[this.currentState]),t.y=t.y+7,this.addChild(t)}},{key:"renderDollarSkin",value:function(t){t=t?c.DOLLAR_TYPE_LIST[t-1]:0===this.initState?c.DOLLAR_TYPE_LIST[this.initSkin-1]:c.DOLLAR_TYPE_LIST[l.default.randomNumber(c.DOLLAR_TYPE_LIST.length-1)],this.createAnimation(t)}},{key:"createAnimation",value:function(t){this.domDollar&&(this.domDollar.destroy(!0),this.domDollar=null);var e=new Laya.Animation;e.loadAtlas("images/animate/"+t+".atlas");var n=e.getGraphicBounds();e.pivot(n.width/2-8,n.height/2),e.set(this.stateList[this.currentState]),e.interval="baida"===t?30:40,e.x="baida"===t?e.x-8:e.x,this.domDollar=e,this.addChild(e)}},{key:"go",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;arguments.length>1&&void 0!==arguments[1]?arguments[1]:Laya.Ease.linearIn;this.domDollar.gotoAndStop(0),this.domDollar.off(Laya.Event.COMPLETE),this.domSkele&&(this.domSkele.isPlaying&&this.domSkele.stop(),this.domSkele.visible=!1),this.currentState++,this.currentState===this.stateList.length?(this.currentState=0,this.renderDollarSkin(),this.goon(t)):this.animateToNextState()}},{key:"animateToNextState",value:function(){var t=this,e=(this.stateList[this.currentState-1],this.stateList[this.currentState]),n=this.domDollar,i=e.y;this.isStop=!1,this.timer=null;var o=function o(){t.isStop?(f(t.timer),t.timer=null,t.goon()):(n.y+=35,n.y>=i&&(n.set({x:e.x,y:i,skewX:e.skewX}),t.isStop=!0),t.timer=h(o))};this.timer=h(o)}},{key:"goon",value:function(t){if(this.currentState===this.initState&&this.shouldStop)this.renderDollarSkin(this.skin),this.endCallBack(this.initState),this.shouldStop=!1;else{var e=Laya.Ease.linearIn,n=this.initState-1==-1?this.stateList.length:this.initState-1;this.currentState===n&&this.shouldStop&&(e=Laya.Ease.elasticOut),this.go(t,e)}}},{key:"stop",value:function(t){this.shouldStop=!0,this.skin=t}},{key:"reset",value:function(){this.shouldStop=!1}},{key:"play",value:function(t,e,n){var i=this;0!==this.initState&&(t?(e&&(this.domDollar.once(Laya.Event.COMPLETE,this,function(){i.domDollar.gotoAndStop(0),i.domSkele.stop(),i.domSkele.visible=!1,n()}),this.domDollar.play(0,!1)),this.domSkele.visible=!0,this.domSkele.play("start",!0)):(this.domSkele.visible=!1,this.domSkele.stop()))}}]),e}(Laya.Sprite);e.default=d},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(41),u=function(t){return t&&t.__esModule?t:{default:t}}(s),l=function(t){function e(t,n,a,r){i(this,e);var s=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return s.stateList=t,s.initIndex=n,s.endCallBack=a,s.lose_lineArr=r,s.init(),s}return a(e,t),r(e,[{key:"init",value:function(){this.addChildrenCell()}},{key:"addChildrenCell",value:function(){for(var t=0;t<4;t++)this.addChild(new u.default(this.stateList,t,this.stopHandler.bind(this),this.lose_lineArr[t]))}},{key:"go",value:function(){this.startAnimate(),this.forEachChildren(function(t){t.go()})}},{key:"stop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.forEachChildren(function(e,n){e.stop(t[n])})}},{key:"forEachChildren",value:function(t){for(var e=0,n=this.numChildren;e<n;e++)t(this.getChildAt(e),e)}},{key:"startAnimate",value:function(){Laya.Tween.from(this,{y:-100},100,Laya.Ease.backOut)}},{key:"playLine",value:function(t,e,n,i){var o=e.indexOf(t),a=[0,0,0];a[o]=1,a.unshift(0);var r=this.initIndex<n;this.forEachChildren(function(t,e){t.play(a[e],r,i)})}},{key:"playBaida",value:function(t,e){this.forEachChildren(function(n,i){var o=7===t[i];n.play(o,!0,e)})}},{key:"stopHandler",value:function(t){var e=this;3===t&&Laya.Tween.from(this,{y:200},150,Laya.Ease.backOut,Laya.Handler.create(this,function(){e.endCallBack(e.initIndex)}))}}]),e}(Laya.Sprite);e.default=l},function(t,e){(function(e){t.exports=e}).call(e,{})}]);