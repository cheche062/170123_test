!function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=30)}([function(t,e,i){"use strict";var n=window.app;n.sceneManager=null,n.observer=null,n.messageCenter=null,n.gameConfig={count:0,isLogin:!1},Object.assign(n,{init:function(){this.initDebug(),this.layaInit(),this.moduleInit(),this.loadingPageShow()},initDebug:function(){this.config.debug=n.utils.initDebug("debugFE","1"),window.onerror=function(t){var e=function(){window.location.reload()};n.messageCenter.disconnectSocket(),n.observer.publish("commonPopShow","长时间离开，已断开连接，确定后重试",e,e),n.utils.initDebug("error","1")&&alert(t)},this.config.localStatus=!n.utils.initDebug("act","game_triangle")},layaInit:function(){var t=this.config;Laya.init(t.gameWidth,t.gameHeight,Laya.WebGL),n.utils.initDebug("stat","1")&&Laya.Stat.show(0,0),Laya.stage.scaleMode=t.scaleMode,Laya.stage.screenMode=t.screenMode,Laya.stage.alignH=t.alignH,Laya.stage.alignV=t.alignV,Laya.URL.basePath="string"==typeof window.cdnpath?window.cdnpath:"",Laya.URL.version=t.GAME_VERSION},moduleInit:function(){this.audio=new this.AudioMudule;var t={};n.config.localStatus||(t={websocketurl:window.websocketurl,lib:void 0===window.Primus?"socketio":"primus",publicKey:void 0===window.publicKey?"":window.publicKey,token:window.token,ajaxUrl:{day:"/?act=game_superstars&st=get_bet_rank&type=day",week:"/?act=game_superstars&st=get_bet_rank&type=week",month:"/?act=game_superstars&st=get_bet_rank&type=month",userAccount:"/?act=game_gamebase&st=queryUserAccount&data=*&gameId="+gameId+"&type=1"}},this.audio.initResource()),this.messageCenter=new window.messageCenterModule(t),window.checheEmit=this.messageCenter.emit.bind(this.messageCenter),this.sceneManager=new window.sceneManagerModule,this.observer=new window.observerModule},loadFontAndImage:function(){var t=this,e=0,i=this.config.RESOURCE.fonts.length;this.config.RESOURCE.fonts.forEach(function(n,o,r){var a=new Laya.BitmapFont;a.loadFont(n.url,Laya.Handler.create(t,function(){Laya.Text.registerBitmapFont(n.name,a),++e===i&&t.loadImages()}))})},loadImages:function(){Laya.loader.load(this.config.RESOURCE.disLoadingRes,Laya.Handler.create(this,this.onLoaded),Laya.Handler.create(this.loading_ui_view,this.loading_ui_view.loading,null,!1))},loadingPageShow:function(){var t=this;Laya.loader.load(this.config.RESOURCE.loadingRes,Laya.Handler.create(this,function(){t.loading_ui_view=new t.LoadingScene,t.sceneManager.loadScene(t.loading_ui_view),t.addResizeHandler(),t.loadFontAndImage()}))},addResizeHandler:function(){Laya.stage.on(Laya.Event.RESIZE,this,this.setViewCenter)},onLoaded:function(){console.warn("大厅&房间————资源加载完成"),this.initAllPop(),this.initGame(),n.config.localStatus?this.enterRoom(!0):this.messageCenter.connectSocket()},initGame:function(){var t=this;n.messageCenter.registerAction("conn::init",function(){t.enterRoom(!0)}),n.messageCenter.registerAction("conn::error",function(e){t.connError(e)})},enterRoom:function(t){this.gameConfig.isLogin=t,n.room_ui_view=new n.RoomScene,n.sceneManager.loadScene(n.room_ui_view)},initAllPop:function(){n.keyBoardNumber_ui_pop=new window.Tools.KeyBoardNumber,new n.SurprisePopUIView,new n.CommonPopUIDialog,new n.BigPrizePopUIView,new n.HelpPopUIDialog,new n.Rechargepopup,new n.RankList},connError:function(t){switch(Number(t.code)){case 1003:var e=function(){window.location.reload()};n.messageCenter.disconnectSocket(),n.observer.publish("commonPopShow","异地登录，请刷新页面",e,e)}},setViewCenter:function(){var t=Laya.stage.height;n.sceneManager.currentScene.height=t}}),n.init()},function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};window.Bezier=function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){t.exports=i(1)},function(t,e,i){var o="function"==typeof Symbol&&"symbol"==n(Symbol.iterator)?function(t){return void 0===t?"undefined":n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":void 0===t?"undefined":n(t)};!function(){function e(t,e,i,n,o){void 0===o&&(o=.5);var r=p.projectionratio(o,t),a=1-r,s={x:r*e.x+a*n.x,y:r*e.y+a*n.y},u=p.abcratio(o,t);return{A:{x:i.x+(i.x-s.x)/u,y:i.y+(i.y-s.y)/u},B:i,C:s}}var n=Math.abs,r=Math.min,a=Math.max,s=Math.cos,u=Math.sin,c=Math.acos,l=Math.sqrt,h=Math.PI,f={x:0,y:0,z:0},p=i(2),d=i(3),m=function(t){var e=t&&t.forEach?t:[].slice.call(arguments),i=!1;if("object"===o(e[0])){i=e.length;var r=[];e.forEach(function(t){["x","y","z"].forEach(function(e){void 0!==t[e]&&r.push(t[e])})}),e=r}var a=!1,s=e.length;if(i){if(i>4){if(1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");a=!0}}else if(6!==s&&8!==s&&9!==s&&12!==s&&1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");var u=!a&&(9===s||12===s)||t&&t[0]&&void 0!==t[0].z;this._3d=u;for(var c=[],l=0,h=u?3:2;s>l;l+=h){var f={x:e[l],y:e[l+1]};u&&(f.z=e[l+2]),c.push(f)}this.order=c.length-1,this.points=c;var d=["x","y"];u&&d.push("z"),this.dims=d,this.dimlen=d.length,function(t){for(var e=t.order,i=t.points,o=p.align(i,{p1:i[0],p2:i[e]}),r=0;r<o.length;r++)if(n(o[r].y)>1e-4)return void(t._linear=!1);t._linear=!0}(this),this._t1=0,this._t2=1,this.update()};m.fromSVG=function(t){var e=t.match(/[-+]?\d*\.?\d+(?:[eE][-+]?\d+)?/g).map(parseFloat);return/[cq]/.test(t)?(e=e.map(function(t,i){return 2>i?t:t+e[i%2]}),new m(e)):new m(e)},m.quadraticFromPoints=function(t,i,n,o){if(void 0===o&&(o=.5),0===o)return new m(i,i,n);if(1===o)return new m(t,i,i);var r=e(2,t,i,n,o);return new m(t,r.A,n)},m.cubicFromPoints=function(t,i,n,o,r){void 0===o&&(o=.5);var a=e(3,t,i,n,o);void 0===r&&(r=p.dist(i,a.C));var s=r*(1-o)/o,u=p.dist(t,n),c=(n.x-t.x)/u,l=(n.y-t.y)/u,h=r*c,f=r*l,d=s*c,g=s*l,y={x:i.x-h,y:i.y-f},v={x:i.x+d,y:i.y+g},b=a.A,x={x:b.x+(y.x-b.x)/(1-o),y:b.y+(y.y-b.y)/(1-o)},_={x:b.x+(v.x-b.x)/o,y:b.y+(v.y-b.y)/o},w={x:t.x+(x.x-t.x)/o,y:t.y+(x.y-t.y)/o},k={x:n.x+(_.x-n.x)/(1-o),y:n.y+(_.y-n.y)/(1-o)};return new m(t,w,k,n)};var g=function(){return p};m.getUtils=g,m.prototype={getUtils:g,valueOf:function(){return this.toString()},toString:function(){return p.pointsToString(this.points)},toSVG:function(t){if(this._3d)return!1;for(var e=this.points,i=e[0].x,n=e[0].y,o=["M",i,n,2===this.order?"Q":"C"],r=1,a=e.length;a>r;r++)o.push(e[r].x),o.push(e[r].y);return o.join(" ")},update:function(){this.dpoints=[];for(var t=this.points,e=t.length,i=e-1;e>1;e--,i--){for(var n,o=[],r=0;i>r;r++)n={x:i*(t[r+1].x-t[r].x),y:i*(t[r+1].y-t[r].y)},this._3d&&(n.z=i*(t[r+1].z-t[r].z)),o.push(n);this.dpoints.push(o),t=o}this.computedirection()},computedirection:function(){var t=this.points,e=p.angle(t[0],t[this.order],t[1]);this.clockwise=e>0},length:function(){return p.length(this.derivative.bind(this))},_lut:[],getLUT:function(t){if(t=t||100,this._lut.length===t)return this._lut;this._lut=[];for(var e=0;t>=e;e++)this._lut.push(this.compute(e/t));return this._lut},on:function(t,e){e=e||5;for(var i,n=this.getLUT(),o=[],r=0,a=0;a<n.length;a++)i=n[a],p.dist(i,t)<e&&(o.push(i),r+=a/n.length);return!!o.length&&(r/=o.length)},project:function(t){var e=this.getLUT(),i=e.length-1,n=p.closest(e,t),o=n.mdist,r=n.mpos;if(0===r||r===i){var a=r/i,s=this.compute(a);return s.t=a,s.d=o,s}var u,a,c,l,h=(r-1)/i,f=(r+1)/i,d=.1/i;for(o+=1,a=h,u=a;f+d>a;a+=d)c=this.compute(a),l=p.dist(t,c),o>l&&(o=l,u=a);return c=this.compute(u),c.t=u,c.d=o,c},get:function(t){return this.compute(t)},point:function(t){return this.points[t]},compute:function(t){if(0===t)return this.points[0];if(1===t)return this.points[this.order];var e=this.points,i=1-t;if(1===this.order)return c={x:i*e[0].x+t*e[1].x,y:i*e[0].y+t*e[1].y},this._3d&&(c.z=i*e[0].z+t*e[1].z),c;if(this.order<4){var n,o,r,a=i*i,s=t*t,u=0;2===this.order?(e=[e[0],e[1],e[2],f],n=a,o=i*t*2,r=s):3===this.order&&(n=a*i,o=a*t*3,r=i*s*3,u=t*s);var c={x:n*e[0].x+o*e[1].x+r*e[2].x+u*e[3].x,y:n*e[0].y+o*e[1].y+r*e[2].y+u*e[3].y};return this._3d&&(c.z=n*e[0].z+o*e[1].z+r*e[2].z+u*e[3].z),c}for(var l=JSON.parse(JSON.stringify(this.points));l.length>1;){for(var h=0;h<l.length-1;h++)l[h]={x:l[h].x+(l[h+1].x-l[h].x)*t,y:l[h].y+(l[h+1].y-l[h].y)*t},void 0!==l[h].z&&(l[h]=l[h].z+(l[h+1].z-l[h].z)*t);l.splice(l.length-1,1)}return l[0]},raise:function(){for(var t,e,i,n=this.points,o=[n[0]],r=n.length,t=1;r>t;t++)e=n[t],i=n[t-1],o[t]={x:(r-t)/r*e.x+t/r*i.x,y:(r-t)/r*e.y+t/r*i.y};return o[r]=n[r-1],new m(o)},derivative:function(t){var e,i,n=1-t,o=0,r=this.dpoints[0];2===this.order&&(r=[r[0],r[1],f],e=n,i=t),3===this.order&&(e=n*n,i=n*t*2,o=t*t);var a={x:e*r[0].x+i*r[1].x+o*r[2].x,y:e*r[0].y+i*r[1].y+o*r[2].y};return this._3d&&(a.z=e*r[0].z+i*r[1].z+o*r[2].z),a},inflections:function(){return p.inflections(this.points)},normal:function(t){return this._3d?this.__normal3(t):this.__normal2(t)},__normal2:function(t){var e=this.derivative(t),i=l(e.x*e.x+e.y*e.y);return{x:-e.y/i,y:e.x/i}},__normal3:function(t){var e=this.derivative(t),i=this.derivative(t+.01),n=l(e.x*e.x+e.y*e.y+e.z*e.z),o=l(i.x*i.x+i.y*i.y+i.z*i.z);e.x/=n,e.y/=n,e.z/=n,i.x/=o,i.y/=o,i.z/=o;var r={x:i.y*e.z-i.z*e.y,y:i.z*e.x-i.x*e.z,z:i.x*e.y-i.y*e.x},a=l(r.x*r.x+r.y*r.y+r.z*r.z);r.x/=a,r.y/=a,r.z/=a;var s=[r.x*r.x,r.x*r.y-r.z,r.x*r.z+r.y,r.x*r.y+r.z,r.y*r.y,r.y*r.z-r.x,r.x*r.z-r.y,r.y*r.z+r.x,r.z*r.z];return{x:s[0]*e.x+s[1]*e.y+s[2]*e.z,y:s[3]*e.x+s[4]*e.y+s[5]*e.z,z:s[6]*e.x+s[7]*e.y+s[8]*e.z}},hull:function(t){var e,i=this.points,n=[],o=[],r=0,a=0,s=0;for(o[r++]=i[0],o[r++]=i[1],o[r++]=i[2],3===this.order&&(o[r++]=i[3]);i.length>1;){for(n=[],a=0,s=i.length-1;s>a;a++)e=p.lerp(t,i[a],i[a+1]),o[r++]=e,n.push(e);i=n}return o},split:function(t,e){if(0===t&&e)return this.split(e).left;if(1===e)return this.split(t).right;var i=this.hull(t),n={left:new m(2===this.order?[i[0],i[3],i[5]]:[i[0],i[4],i[7],i[9]]),right:new m(2===this.order?[i[5],i[4],i[2]]:[i[9],i[8],i[6],i[3]]),span:i};return n.left._t1=p.map(0,0,1,this._t1,this._t2),n.left._t2=p.map(t,0,1,this._t1,this._t2),n.right._t1=p.map(t,0,1,this._t1,this._t2),n.right._t2=p.map(1,0,1,this._t1,this._t2),e?(e=p.map(e,t,1,0,1),n.right.split(e).left):n},extrema:function(){var t,e,i=this.dims,n={},o=[];return i.forEach(function(i){e=function(t){return t[i]},t=this.dpoints[0].map(e),n[i]=p.droots(t),3===this.order&&(t=this.dpoints[1].map(e),n[i]=n[i].concat(p.droots(t))),n[i]=n[i].filter(function(t){return t>=0&&1>=t}),o=o.concat(n[i].sort())}.bind(this)),o=o.sort().filter(function(t,e){return o.indexOf(t)===e}),n.values=o,n},bbox:function(){var t=this.extrema(),e={};return this.dims.forEach(function(i){e[i]=p.getminmax(this,i,t[i])}.bind(this)),e},overlaps:function(t){var e=this.bbox(),i=t.bbox();return p.bboxoverlap(e,i)},offset:function(t,e){if(void 0!==e){var i=this.get(t),n=this.normal(t),o={c:i,n:n,x:i.x+n.x*e,y:i.y+n.y*e};return this._3d&&(o.z=i.z+n.z*e),o}if(this._linear){var r=this.normal(0),a=this.points.map(function(e){var i={x:e.x+t*r.x,y:e.y+t*r.y};return e.z&&n.z&&(i.z=e.z+t*r.z),i});return[new m(a)]}return this.reduce().map(function(e){return e.scale(t)})},simple:function(){if(3===this.order){var t=p.angle(this.points[0],this.points[3],this.points[1]),e=p.angle(this.points[0],this.points[3],this.points[2]);if(t>0&&0>e||0>t&&e>0)return!1}var i=this.normal(0),o=this.normal(1),r=i.x*o.x+i.y*o.y;this._3d&&(r+=i.z*o.z);var a=n(c(r));return h/3>a},reduce:function(){var t,e,i=0,o=0,r=.01,a=[],s=[],u=this.extrema().values;for(-1===u.indexOf(0)&&(u=[0].concat(u)),-1===u.indexOf(1)&&u.push(1),i=u[0],t=1;t<u.length;t++)o=u[t],e=this.split(i,o),e._t1=i,e._t2=o,a.push(e),i=o;return a.forEach(function(t){for(i=0,o=0;1>=o;)for(o=i+r;1+r>=o;o+=r)if(e=t.split(i,o),!e.simple()){if(o-=r,n(i-o)<r)return[];e=t.split(i,o),e._t1=p.map(i,0,1,t._t1,t._t2),e._t2=p.map(o,0,1,t._t1,t._t2),s.push(e),i=o;break}1>i&&(e=t.split(i,1),e._t1=p.map(i,0,1,t._t1,t._t2),e._t2=t._t2,s.push(e))}),s},scale:function(t){var e=this.order,i=!1;if("function"==typeof t&&(i=t),i&&2===e)return this.raise().scale(i);var n=this.clockwise,o=i?i(0):t,r=i?i(1):t,a=[this.offset(0,10),this.offset(1,10)],s=p.lli4(a[0],a[0].c,a[1],a[1].c);if(!s)throw new Error("cannot scale this curve. Try reducing it first.");var u=this.points,c=[];return[0,1].forEach(function(t){var i=c[t*e]=p.copy(u[t*e]);i.x+=(t?r:o)*a[t].n.x,i.y+=(t?r:o)*a[t].n.y}.bind(this)),i?([0,1].forEach(function(o){if(2!==this.order||!o){var r=u[o+1],a={x:r.x-s.x,y:r.y-s.y},h=i?i((o+1)/e):t;i&&!n&&(h=-h);var f=l(a.x*a.x+a.y*a.y);a.x/=f,a.y/=f,c[o+1]={x:r.x+h*a.x,y:r.y+h*a.y}}}.bind(this)),new m(c)):([0,1].forEach(function(t){if(2!==this.order||!t){var i=c[t*e],n=this.derivative(t),o={x:i.x+n.x,y:i.y+n.y};c[t+1]=p.lli4(i,o,s,u[t+1])}}.bind(this)),new m(c))},outline:function(t,e,i,n){function o(t,e,i,n,o){return function(r){var a=n/i,s=(n+o)/i,u=e-t;return p.map(r,0,1,t+a*u,t+s*u)}}e=void 0===e?t:e;var r,a=this.reduce(),s=a.length,u=[],c=[],l=0,h=this.length(),f=void 0!==i&&void 0!==n;a.forEach(function(r){w=r.length(),f?(u.push(r.scale(o(t,i,h,l,w))),c.push(r.scale(o(-e,-n,h,l,w)))):(u.push(r.scale(t)),c.push(r.scale(-e))),l+=w}),c=c.map(function(t){return r=t.points,r[3]?t.points=[r[3],r[2],r[1],r[0]]:t.points=[r[2],r[1],r[0]],t}).reverse();var m=u[0].points[0],g=u[s-1].points[u[s-1].points.length-1],y=c[s-1].points[c[s-1].points.length-1],v=c[0].points[0],b=p.makeline(y,m),x=p.makeline(g,v),_=[b].concat(u).concat([x]).concat(c),w=_.length;return new d(_)},outlineshapes:function(t,e,i){e=e||t;for(var n=this.outline(t,e).curves,o=[],r=1,a=n.length;a/2>r;r++){var s=p.makeshape(n[r],n[a-r],i);s.startcap.virtual=r>1,s.endcap.virtual=a/2-1>r,o.push(s)}return o},intersects:function(t,e){return t?t.p1&&t.p2?this.lineIntersects(t):(t instanceof m&&(t=t.reduce()),this.curveintersects(this.reduce(),t,e)):this.selfintersects(e)},lineIntersects:function(t){var e=r(t.p1.x,t.p2.x),i=r(t.p1.y,t.p2.y),n=a(t.p1.x,t.p2.x),o=a(t.p1.y,t.p2.y),s=this;return p.roots(this.points,t).filter(function(t){var r=s.get(t);return p.between(r.x,e,n)&&p.between(r.y,i,o)})},selfintersects:function(t){var e,i,n,o,r=this.reduce(),a=r.length-2,s=[];for(e=0;a>e;e++)n=r.slice(e,e+1),o=r.slice(e+2),i=this.curveintersects(n,o,t),s=s.concat(i);return s},curveintersects:function(t,e,i){var n=[];t.forEach(function(t){e.forEach(function(e){t.overlaps(e)&&n.push({left:t,right:e})})});var o=[];return n.forEach(function(t){var e=p.pairiteration(t.left,t.right,i);e.length>0&&(o=o.concat(e))}),o},arcs:function(t){t=t||.5;var e=[];return this._iterate(t,e)},_error:function(t,e,i,o){var r=(o-i)/4,a=this.get(i+r),s=this.get(o-r),u=p.dist(t,e),c=p.dist(t,a),l=p.dist(t,s);return n(c-u)+n(l-u)},_iterate:function(t,e){var i,n=0,o=1;do{i=0,o=1;var r,a,c,l,h,f=this.get(n),d=!1,m=!1,g=o,y=1,v=0;do{m=d,l=c,g=(n+o)/2,v++,r=this.get(g),a=this.get(o),c=p.getccenter(f,r,a),c.interval={start:n,end:o};if(d=t>=this._error(c,f,n,o),h=m&&!d,h||(y=o),d){if(o>=1){if(c.interval.end=y=1,l=c,o>1){var b={x:c.x+c.r*s(c.e),y:c.y+c.r*u(c.e)};c.e+=p.angle({x:c.x,y:c.y},b,this.get(1))}break}o+=(o-n)/2}else o=g}while(!h&&i++<100);if(i>=100)break;l=l||c,e.push(l),n=y}while(1>o);return e}},t.exports=m}()},function(t,e,i){!function(){var e=Math.abs,n=Math.cos,o=Math.sin,r=Math.acos,a=Math.atan2,s=Math.sqrt,u=Math.pow,c=function(t){return 0>t?-u(-t,1/3):u(t,1/3)},l=Math.PI,h=2*l,f=l/2,p=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER,m={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(t,e){var i=e(t),n=i.x*i.x+i.y*i.y;return void 0!==i.z&&(n+=i.z*i.z),s(n)},between:function(t,e,i){return t>=e&&i>=t||m.approximately(t,e)||m.approximately(t,i)},approximately:function(t,i,n){return e(t-i)<=(n||1e-6)},length:function(t){var e,i,n=0,o=m.Tvalues.length;for(e=0;o>e;e++)i=.5*m.Tvalues[e]+.5,n+=m.Cvalues[e]*m.arcfn(i,t);return.5*n},map:function(t,e,i,n,o){return n+(t-e)/(i-e)*(o-n)},lerp:function(t,e,i){var n={x:e.x+t*(i.x-e.x),y:e.y+t*(i.y-e.y)};return e.z&&i.z&&(n.z=e.z+t*(i.z-e.z)),n},pointToString:function(t){var e=t.x+"/"+t.y;return void 0!==t.z&&(e+="/"+t.z),e},pointsToString:function(t){return"["+t.map(m.pointToString).join(", ")+"]"},copy:function(t){return JSON.parse(JSON.stringify(t))},angle:function(t,e,i){var n=e.x-t.x,o=e.y-t.y,r=i.x-t.x,s=i.y-t.y;return a(n*s-o*r,n*r+o*s)},round:function(t,e){var i=""+t,n=i.indexOf(".");return parseFloat(i.substring(0,n+1+e))},dist:function(t,e){var i=t.x-e.x,n=t.y-e.y;return s(i*i+n*n)},closest:function(t,e){var i,n,o=u(2,63);return t.forEach(function(t,r){n=m.dist(e,t),o>n&&(o=n,i=r)}),{mdist:o,mpos:i}},abcratio:function(t,i){if(2!==i&&3!==i)return!1;if(void 0===t)t=.5;else if(0===t||1===t)return t;var n=u(t,i)+u(1-t,i);return e((n-1)/n)},projectionratio:function(t,e){if(2!==e&&3!==e)return!1;if(void 0===t)t=.5;else if(0===t||1===t)return t;var i=u(1-t,e);return i/(u(t,e)+i)},lli8:function(t,e,i,n,o,r,a,s){var u=(t*n-e*i)*(o-a)-(t-i)*(o*s-r*a),c=(t*n-e*i)*(r-s)-(e-n)*(o*s-r*a),l=(t-i)*(r-s)-(e-n)*(o-a);return 0!=l&&{x:u/l,y:c/l}},lli4:function(t,e,i,n){var o=t.x,r=t.y,a=e.x,s=e.y,u=i.x,c=i.y,l=n.x,h=n.y;return m.lli8(o,r,a,s,u,c,l,h)},lli:function(t,e){return m.lli4(t,t.c,e,e.c)},makeline:function(t,e){var n=i(1),o=t.x,r=t.y,a=e.x,s=e.y,u=(a-o)/3,c=(s-r)/3;return new n(o,r,o+u,r+c,o+2*u,r+2*c,a,s)},findbbox:function(t){var e=p,i=p,n=d,o=d;return t.forEach(function(t){var r=t.bbox();e>r.x.min&&(e=r.x.min),i>r.y.min&&(i=r.y.min),n<r.x.max&&(n=r.x.max),o<r.y.max&&(o=r.y.max)}),{x:{min:e,mid:(e+n)/2,max:n,size:n-e},y:{min:i,mid:(i+o)/2,max:o,size:o-i}}},shapeintersections:function(t,e,i,n,o){if(!m.bboxoverlap(e,n))return[];var r=[],a=[t.startcap,t.forward,t.back,t.endcap],s=[i.startcap,i.forward,i.back,i.endcap];return a.forEach(function(e){e.virtual||s.forEach(function(n){if(!n.virtual){var a=e.intersects(n,o);a.length>0&&(a.c1=e,a.c2=n,a.s1=t,a.s2=i,r.push(a))}})}),r},makeshape:function(t,e,i){var n=e.points.length,o=t.points.length,r=m.makeline(e.points[n-1],t.points[0]),a=m.makeline(t.points[o-1],e.points[0]),s={startcap:r,forward:t,back:e,endcap:a,bbox:m.findbbox([r,t,e,a])},u=m;return s.intersections=function(t){return u.shapeintersections(s,s.bbox,t,t.bbox,i)},s},getminmax:function(t,e,i){if(!i)return{min:0,max:0};var n,o,r=p,a=d;-1===i.indexOf(0)&&(i=[0].concat(i)),-1===i.indexOf(1)&&i.push(1);for(var s=0,u=i.length;u>s;s++)n=i[s],o=t.get(n),o[e]<r&&(r=o[e]),o[e]>a&&(a=o[e]);return{min:r,mid:(r+a)/2,max:a,size:a-r}},align:function(t,e){var i=e.p1.x,r=e.p1.y,s=-a(e.p2.y-r,e.p2.x-i),u=function(t){return{x:(t.x-i)*n(s)-(t.y-r)*o(s),y:(t.x-i)*o(s)+(t.y-r)*n(s)}};return t.map(u)},roots:function(t,e){e=e||{p1:{x:0,y:0},p2:{x:1,y:0}};var i=t.length-1,o=m.align(t,e),a=function(t){return t>=0&&1>=t};if(2===i){var u=o[0].y,l=o[1].y,f=o[2].y,p=u-2*l+f;if(0!==p){var d=-s(l*l-u*f),g=-u+l,y=-(d+g)/p;return[y,-(-d+g)/p].filter(a)}return l!==f&&0===p?[(2*l-f)/2*(l-f)].filter(a):[]}var v,y,b,x,_,w=o[0].y,k=o[1].y,S=o[2].y,C=o[3].y,p=3*k-w-3*S+C,u=(3*w-6*k+3*S)/p,l=(-3*w+3*k)/p,f=w/p,o=(3*l-u*u)/3,A=o/3,L=(2*u*u*u-9*u*l+27*f)/27,E=L/2,O=E*E+A*A*A;if(0>O){var T=-o/3,N=T*T*T,B=s(N),M=-L/(2*B),P=-1>M?-1:M>1?1:M,z=r(P),I=c(B),D=2*I;return b=D*n(z/3)-u/3,x=D*n((z+h)/3)-u/3,_=D*n((z+2*h)/3)-u/3,[b,x,_].filter(a)}if(0===O)return v=0>E?c(-E):-c(E),b=2*v-u/3,x=-v-u/3,[b,x].filter(a);var j=s(O);return v=c(-E+j),y=c(E+j),[v-y-u/3].filter(a)},droots:function(t){if(3===t.length){var e=t[0],i=t[1],n=t[2],o=e-2*i+n;if(0!==o){var r=-s(i*i-e*n),a=-e+i;return[-(r+a)/o,-(-r+a)/o]}return i!==n&&0===o?[(2*i-n)/(2*(i-n))]:[]}if(2===t.length){var e=t[0],i=t[1];return e!==i?[e/(e-i)]:[]}},inflections:function(t){if(t.length<4)return[];var e=m.align(t,{p1:t[0],p2:t.slice(-1)[0]}),i=e[2].x*e[1].y,n=e[3].x*e[1].y,o=e[1].x*e[2].y,r=e[3].x*e[2].y,a=18*(-3*i+2*n+3*o-r),s=18*(3*i-n-3*o),u=18*(o-i);if(m.approximately(a,0)){if(!m.approximately(s,0)){var c=-u/s;if(c>=0&&1>=c)return[c]}return[]}var l=s*s-4*a*u,h=Math.sqrt(l),r=2*a;return m.approximately(r,0)?[]:[(h-s)/r,-(s+h)/r].filter(function(t){return t>=0&&1>=t})},bboxoverlap:function(t,i){var n,o,r,a,s,u=["x","y"],c=u.length;for(n=0;c>n;n++)if(o=u[n],r=t[o].mid,a=i[o].mid,s=(t[o].size+i[o].size)/2,e(r-a)>=s)return!1;return!0},expandbox:function(t,e){e.x.min<t.x.min&&(t.x.min=e.x.min),e.y.min<t.y.min&&(t.y.min=e.y.min),e.z&&e.z.min<t.z.min&&(t.z.min=e.z.min),e.x.max>t.x.max&&(t.x.max=e.x.max),e.y.max>t.y.max&&(t.y.max=e.y.max),e.z&&e.z.max>t.z.max&&(t.z.max=e.z.max),t.x.mid=(t.x.min+t.x.max)/2,t.y.mid=(t.y.min+t.y.max)/2,t.z&&(t.z.mid=(t.z.min+t.z.max)/2),t.x.size=t.x.max-t.x.min,t.y.size=t.y.max-t.y.min,t.z&&(t.z.size=t.z.max-t.z.min)},pairiteration:function(t,e,i){var n=t.bbox(),o=e.bbox(),r=1e5,a=i||.5;if(n.x.size+n.y.size<a&&o.x.size+o.y.size<a)return[(r*(t._t1+t._t2)/2|0)/r+"/"+(r*(e._t1+e._t2)/2|0)/r];var s=t.split(.5),u=e.split(.5),c=[{left:s.left,right:u.left},{left:s.left,right:u.right},{left:s.right,right:u.right},{left:s.right,right:u.left}];c=c.filter(function(t){return m.bboxoverlap(t.left.bbox(),t.right.bbox())});var l=[];return 0===c.length?l:(c.forEach(function(t){l=l.concat(m.pairiteration(t.left,t.right,a))}),l=l.filter(function(t,e){return l.indexOf(t)===e}))},getccenter:function(t,e,i){var r,s=e.x-t.x,u=e.y-t.y,c=i.x-e.x,l=i.y-e.y,p=s*n(f)-u*o(f),d=s*o(f)+u*n(f),g=c*n(f)-l*o(f),y=c*o(f)+l*n(f),v=(t.x+e.x)/2,b=(t.y+e.y)/2,x=(e.x+i.x)/2,_=(e.y+i.y)/2,w=v+p,k=b+d,S=x+g,C=_+y,A=m.lli8(v,b,w,k,x,_,S,C),L=m.dist(A,t),E=a(t.y-A.y,t.x-A.x),O=a(e.y-A.y,e.x-A.x),T=a(i.y-A.y,i.x-A.x);return T>E?((E>O||O>T)&&(E+=h),E>T&&(r=T,T=E,E=r)):O>T&&E>O?(r=T,T=E,E=r):T+=h,A.s=E,A.e=T,A.r=L,A}};t.exports=m}()},function(t,e,i){!function(){var e=i(2),n=function(t){this.curves=[],this._3d=!1,t&&(this.curves=t,this._3d=this.curves[0]._3d)};n.prototype={valueOf:function(){return this.toString()},toString:function(){return"["+this.curves.map(function(t){return e.pointsToString(t.points)}).join(", ")+"]"},addCurve:function(t){this.curves.push(t),this._3d=this._3d||t._3d},length:function(){return this.curves.map(function(t){return t.length()}).reduce(function(t,e){return t+e})},curve:function(t){return this.curves[t]},bbox:function(){for(var t=this.curves,i=t[0].bbox(),n=1;n<t.length;n++)e.expandbox(i,t[n].bbox());return i},offset:function(t){var e=[];return this.curves.forEach(function(i){e=e.concat(i.offset(t))}),new n(e)}},t.exports=n}()}])},function(t,e,i){"use strict";!function(){var t=window.myUtil={};t.log=function(){window.GM&&"function"==typeof GM.log?GM.log.apply(GM,arguments):1==t.debugFE&&console.log.apply(console,arguments)},t.console_log=function(){console.log.apply(console,arguments)},t.notLogged=function(){var e=t.config.userLogged;return e||(window.location.href=t.config.userLoginUrl),!e},t.pubsub=function(){return function(){var t={},e=Array.prototype.slice,i=Array.prototype.shift,n=Array.prototype.unshift,o=function(t,e,i){i[t]||(i[t]=[]),i[t].push(e)},r=function(t,e,i){if(e[t])if(i){var n=e[t];if(!n||!n.length)return;for(var o=0,r=n.length;o<r;o++)n[o].fnOrg===i.fnOrg&&(n.splice(o,1),o--,r--);0===r&&delete e[t]}else delete e[t]},a=function(){var t=i.call(arguments),e=i.call(arguments),n=arguments,o=t[e];if(o&&o.length)for(var a=0,s=o.length;a<s;a++){var u=o[a];u.fnOrg.EXCUTED_ONCE&&(r(e,t,u),a--,s--),u.apply(null,n)}};return{create:function(i){var i=i||"default",s={},u=[],c=!1,l=function(t,e){for(var i=0,n=u.length;i<n;i++){var o=u[i];if(o.key===t){e.apply(null,o.data),e.EXCUTED_ONCE&&r(t,s,e),o.isOnce&&(u.splice(i,1),i--,n--);break}}};return ret={listenOnce:function(t,e,i){return e.EXCUTED_ONCE=!0,this.listen(t,e,i),this},listen:function(t,e,i){var n=e&&e.bind(i||window);return n&&(n.fnOrg=e),o(t,n,s),l(t,n),this},remove:function(t,e,i){var n=e&&e.bind(i||window);return 0===arguments.length?(s={},u=[]):(n&&(n.fnOrg=e),r(t,s,n)),this},fire:function(){return n.call(arguments,s),a.apply(null,arguments),this},fireForceOnce:function(){return c=!0,this.fireForce.apply(this,arguments),this},fireForce:function(){var t=arguments,i=t[0];return s[i]&&(this.fire.apply(this,t),c)?(isMustOnce=!1,this):(u.push({key:i,isOnce:c,data:e.call(arguments,1)}),isMustOnce=!1,this)}},i?t[i]?t[i]:t[i]=ret:ret}}}()}(),t.asyn=function(){var e={},i=[];return{hook:function(){var e=t.util.slice.call(arguments);return i=i.concat(e),this},unHook:function(){var e,n,o=t.util.slice.call(arguments),r=o.length,a=i.length;if(0==r)i=[];else for(e=0;e<a;e++)for(n=0;n<r;n++)if(i[e]==o[n]){i.splice(e,1),e--,a--;break}return this},_done:function(){return i.forEach(function(t,e){t&&t()}),i=[],this},isReady:{},ready:function(t){return this.isReady[t]=!0,delete e[t],0===Object.keys(e).length&&this._done(),this},wait:function(t){return e[t]="wait",this}}},t.DownTimeMsec=function(t,e){this.time=parseInt(t,10),this.loopTime=e||50,this.timeout=null},t.DownTimeMsec.prototype={constructor:t.DownTimeMsec,_loopTime:function(t,e,i){var n=this,o=new Date;return function r(){var a=new Date,s=a-o,u=t-s;u=u<0?0:u;var c=Math.floor(u/1e3);"function"==typeof e&&e(u,c),u>0?(clearTimeout(n.timeout),n.timeout=setTimeout(r,n.loopTime)):"function"==typeof i&&i()}(),this},start:function(t,e){return this.func=t,this.callback=e,this._loopTime(this.time,t,e),this},setTime:function(t){this.stop(),this._loopTime(t,this.func,this.callback)},stop:function(){return clearTimeout(this.timeout),this}},t.DownTime=function(t,e){this.time=parseInt(t,10),this.timeOrg=this.time,this.leftTime=this.time,this.flag=e,this.timeout=null},t.DownTime.prototype={constructor:t.DownTime,_format:function(t){var e=(this.el,this.flag),i=t/60;i=Math.floor(i),(i=i<0?0:i)<10&&1===e&&(i="0"+i);var n=t%60;return n=Math.floor(n),n=n<0?0:n,n<10&&(n="0"+n),i+":"+n},_loopTime:function(t,e,i){var n=new Date,o=function(){var r=new Date,a=(r-n)/1e3;a=Math.floor(a);var s=t-a;s=s<0?0:s,"function"==typeof e&&e(s,this._format(s)),this.leftTime=s,s>0?(clearTimeout(this.timeout),this.timeout=setTimeout(o,1e3)):"function"==typeof i&&i()}.bind(this);o()},start:function(t,e){return this.func=t,this.callback=e,this._loopTime(this.time,t,e),this},reStart:function(){this.time=this.timeOrg,this.start.apply(this,arguments)},recover:function(){this._loopTime(this.leftTime,this.func,this.callback)},setTime:function(t){this.stop(),this._loopTime(t,this.func,this.callback)},stop:function(){return clearTimeout(this.timeout),this}},Laya.Node.prototype.localToTarget=function(t){for(var e={x:0,y:0},i=this;i&&i!=t&&i!=Laya.stage;)e=i.toParentPoint(e),i=i.parent;return e},Laya.Node.prototype.find=function(t,e){var i=function i(n){var o,r=n._childs,a=[];if(!r)return a;for(var s=0,u=r.length;s<u;s++){var c=r[s];if(c.name===t){if(a.push(c),!0!==e)break}else if(o=i(c),a=a.concat(o),o.length>0&&!0!==e)break}return a}(this),n=i.length;return e?i:(0==n?i=null:1==n&&(i=i[0]),i)},Laya.Node.prototype.findType=function(t,e){function i(t){for(var e,i=t.split("."),n=0;n<i.length;n++){var o=i[n];if(!(e=0===n?laya.ui[o]||ui[o]||laya.display[o]:e[o]))break}return e}laya.ui.DialogManager.prototype._closeOnSide=function(){if(window.UIConfig.closeDialogOnSide){var t=this.getChildAt(this.numChildren-1);t instanceof laya.ui.Dialog&&t.close("side")}};var n=function e(n){var o=[],r=i(t);if(!r)return o;for(var a=0;a<n.numChildren;a++)n.getChildAt(a)instanceof r&&o.push(n.getChildAt(a));for(var a=0;a<n.numChildren;a++)o=o.concat(e(n.getChildAt(a)));return o}(this),o=n.length;return e?n:(0==o?n=null:1==o&&(n=n[0]),n)},window.convertXMLToNode=function(t){function e(t){var i=t.type;if(!laya.ui[i])return null;var n=new laya.ui[i],o=t.props;for(var r in o){var a=o[r];isNaN(Number(a))||(a=Number(a)),n[r]=a}for(var s=t.childs,u=0;u<s.length;u++){var c=s[u],l=e(c);l&&n.addChild(l)}return n}function i(t,e){var o={};o.type=n(t),o.childs=[];for(var r=t.childNodes,a=0;a<r.length;a++){var s=r.item(a),u=(n(s),i(s));o.childs.push(u)}if(t.attributes){o.props={};for(var c=0;c<t.attributes.length;c++){var l=t.attributes.item(c);o.props[l.name]=l.value}}return o}function n(t){var e=t.localName;return null===e&&(e=t.baseName),null!==e&&""!==e||(e=t.nodeName),e}function o(t){if(void 0===t)return null;var e,i;window.DOMParser&&(i=new window.DOMParser);try{e=i.parseFromString(t,"text/xml").firstChild}catch(t){e=null}return e}return e(function(t){var e=o(t);return null!==e?i(e):null}(t))},t.timeOnPageControl={fire:function(e,i){t.Socket.pubsub.fire(e,i)},pageOffReset:function(){clearTimeout(this.pageOffTimeout),t.config.timeOffPage=0,this.fire("timeOffPage",t.config.timeOffPage)},pageOffStart:function(){var e=(new Date).getTime(),i=function(){var n=(new Date).getTime();t.config.timeOffPage=n-e,this.fire("timeOffPage",t.config.timeOffPage),clearTimeout(this.pageOffTimeout),this.pageOffTimeout=setTimeout(i,1e3)}.bind(this);i()},pageOnReset:function(){clearTimeout(this.pageOnTimeout),t.config.timeOnPage=0,this.fire("timeOnPage",t.config.timeOnPage)},pageOnStart:function(){var e=(new Date).getTime(),i=function(){var n=(new Date).getTime();t.config.timeOnPage=n-e,this.fire("timeOnPage",t.config.timeOnPage),clearTimeout(this.pageOnTimeout),this.pageOnTimeout=setTimeout(i,1e3)}.bind(this);i()},pageHide:function(){t.timeOnPageControl.pageOnReset(),t.timeOnPageControl.pageOffStart()},pageOn:function(){t.timeOnPageControl.pageOnStart(),t.timeOnPageControl.pageOffReset()},init:function(){this.pageOnStart()}},t.visibleChangeListen=function(){function e(){"hidden"==Laya.Browser.document[i]?t.timeOnPageControl.pageHide():t.timeOnPageControl.pageOn()}var i="visibilityState",n="visibilitychange",o=window.document;void 0!==o.hidden?(n="visibilitychange",i="visibilityState"):void 0!==o.mozHidden?(n="mozvisibilitychange",i="mozVisibilityState"):void 0!==o.msHidden?(n="msvisibilitychange",i="msVisibilityState"):void 0!==o.webkitHidden&&(n="webkitvisibilitychange",i="webkitVisibilityState"),window.document.addEventListener(n,e)},Function.prototype._before=function(t){var e=this;return function(){if(!1!==t.apply(this,arguments))return e.apply(this,arguments)}},Function.prototype._after=function(t){var e=this;return function(){var i=e.apply(this,arguments);return t.apply(this,arguments),i}}}()},function(t,e,i){"use strict";!function(){function t(t,e){var i=this;i.dom={glr:t},i.config={},i.tmp={},i.initConfig(e),i.init()}var e={origin_index:0,animate_time:500,item_space:10,move_scope_rate:1/6,pagination:!0,end_call_back:null};Laya.class(t,"zsySlider");var i=t.prototype;i.initConfig=function(t){var i=this;t||(t={}),i.config.cur_index=t.origin_index||e.origin_index,i.config.item_space=t.item_space||e.item_space,i.config.animate_time=t.animate_time||e.animate_time,i.config.pagination=t.pagination||e.pagination,i.config.end_call_back=t.end_call_back||e.end_call_back,t.item_width&&(i.config.move_space=t.item_width+i.config.item_space,i.config.move_scope=i.config.move_space*e.move_scope_rate)},i.init=function(){var t=this;t.initDom(),t.initEvent(),t.config.move_space||(t.config.move_space=t.dom.con.width+t.config.item_space,t.config.move_scope=t.config.move_space*e.move_scope_rate)},i.initDom=function(){var t=this,e=t.dom.glr;t.dom.con=e.getChildByName("con"),t.dom.list=t.dom.con.getChildByName("list"),t.replaceGlrList(),t.addMask(),t.dom.items=[];for(var i=0;i<t.dom.list.numChildren;i++)t.dom.items.push(t.dom.list.getChildAt(i));t.config.pagination&&(t.dom.pagination=e.getChildByName("pagination"))},i.addMask=function(){var t=this,e=t.dom.con;e.scrollRect=new laya.maths.Rectangle(0,0,e.width,e.height)},i.replaceGlrList=function(){var t=this,i=t.dom.con,n=t.dom.list,o=new Laya.Box;o.name="list";for(var r=[],a=0;a<n.numChildren;a++){var s=n.getChildAt(a);s.name="item",s.visible=!0,r.push(s)}for(var a=0;a<r.length;a++)r[a].visible=a==e.origin_index,o.addChild(r[a]);t.dom.list=o,i.addChild(o),o.space=e.item_space,o.cacheAs="none",o.x=n.x,o.y=n.y,i.removeChild(n),n.destroy()},i.initEvent=function(){var t=this,e=Laya.Event.MOUSE_DOWN,i=Laya.Event.MOUSE_MOVE,n=Laya.Event.MOUSE_UP,o=Laya.Event.MOUSE_OUT,r=t.dom.list;t.config.pagination&&(t.dom.pagination.selectHandler=Laya.Handler.create(t,t.paginationHandler,null,!1)),r.on(e,t,t.onTouchStart),r.on(i,t,t.onTouchMove),r.on(n,t,t.onTouchEnd),r.on(o,t,t.onTouchEnd)},i.paginationHandler=function(t){var e=this;e.dom.pagination;if("onEndAnimate"===e.getTouchStatus())return!0;var i,n,o=e.config.cur_index;n=t,i=o>t?"left":"right",e.handleMoveEffect(i,n),e.animateMove()},i.onTouchStart=function(t){var e=this,i=t.target;if("onEndAnimate"==e.getTouchStatus())return!0;e.tmp.start_point={x:t.stageX,y:t.stageY},e.tmp.origin_pos={x:i.x},e.setTouchStatus("start")},i.onTouchMove=function(t){var e=this,i=t.target;if("start"!==e.getTouchStatus()&&"move"!==e.getTouchStatus())return!0;"start"==e.getTouchStatus()&&e.setTouchStatus("move"),e.tmp.move_dist={x:t.stageX-e.tmp.start_point.x,y:t.stageY-e.tmp.start_point.y},i.x=e.tmp.origin_pos.x+e.tmp.move_dist.x,e.detectNextShowIndex()},i.detectNextShowIndex=function(){var t,e,i=this,n=i.config.cur_index,o=i.dom.items,r=o.length,a=i.tmp.move_dist.x;if(a>0)t="left";else{if(!(a<0))return i.tmp.next_show_index=n,!0;t="right"}e="left"==t?n-1:n+1,e<0?e=r-1:e>=r&&(e=0),i.handleMoveEffect(t,e)},i.handleMoveEffect=function(t,e){var i=this,n=i.config.cur_index,o=i.dom.items,r=i.config.move_space;if(t==i.tmp.move_direction&&e==i.tmp.next_show_index)return!0;i.tmp.move_direction=t,i.tmp.next_show_index=e;for(var a=0;a<o.length;a++)a!=n&&a!=e&&(o[a].x=0,o[a].visible=!1);var s=o[e];s.visible=!0,s.x="left"==t?-r:r},i.onTouchEnd=function(t){var e=this,i=e.tmp&&e.tmp.move_dist&&e.tmp.move_dist.x;if("move"!==e.getTouchStatus())return!0;if(!i)return!0;var i=e.tmp.move_dist.x;Math.abs(i)<e.config.move_scope&&(e.tmp.next_show_index=e.config.cur_index),e.animateMove()},i.animateMove=function(){function t(){e.config.pagination&&(e.dom.pagination.selectedIndex=e.config.cur_index),i&&"function"==typeof i&&i(e.config.cur_index),e.reset()}var e=this,i=e.config.end_call_back,n=e.tmp.next_show_index,o=e.config.move_space;e.setTouchStatus("onEndAnimate"),e.config.cur_index==n?o=0:(e.config.cur_index=n,"right"==e.tmp.move_direction&&(o=-o));var r=e.dom.list,a={x:o};(new Laya.Tween).to(r,a,e.config.animate_time,null,Laya.Handler.create(e,t))},i.reset=function(){var t=this;t.resetGlrCon(),t.tmp={},t.setTouchStatus("end")},i.resetGlrCon=function(){var t=this,e=t.dom.list,i=t.dom.items,n=t.config.cur_index;e.x=0,i[n].x=0;for(var o=0;o<i.length;o++)o==t.config.cur_index?i[o].x=0:i[o].visible=!1},i.setTouchStatus=function(t){this.dom.con._zsySlider_touchtatus=t},i.getTouchStatus=function(){return this.dom.con._zsySlider_touchtatus}}()},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=window.app,c=function(t){function e(t,i){n(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.init(t,i),r}return r(e,t),s(e,[{key:"init",value:function(t,e){var i={duraing:3e3,intervalTime:{nomal:1e4,win:3e3},modelData:["恭喜*赢了*，实在是太厉害了！","祝贺*赢取*，积少成多从现在开始。","恭喜*赢取*，满屏掌声献给他！"],fontSize:30,bold:!1,color:"#fff",colorHigh:"#75e8ff",font:"微软雅黑"};if(!(t instanceof Laya.Node))return void console.log(new Error("父元素Error..."));this.parentNode=t,this.options=Object.assign({},i,e),this._initConfig(),this._addMask(),this._createChild(),this.parentNode.addChild(this)}},{key:"_initConfig",value:function(){this.config={MASKWIDTH:this.parentNode.displayWidth,MASKHEIGHT:this.parentNode.displayHeight,currentType:"nomal",isDataLoop:!1,count:0,noticeArr:[],isGoing:!1},this._labelChildren=null}},{key:"_addMask",value:function(){this.parentNode.mask=new Laya.Sprite,this.parentNode.mask.graphics.clear(),this.parentNode.mask.graphics.drawRect(0,0,this.config.MASKWIDTH,this.config.MASKHEIGHT,"#000000")}},{key:"_createChild",value:function(){for(var t=[],e=0;e<5;e++){var i=new Laya.Label;i.fontSize=this.options.fontSize,i.font=this.options.font,i.bold=this.options.bold,t.push(i)}this._labelChildren=t}},{key:"start",value:function(t){"string"==typeof t||"number"==typeof t?this.config.noticeArr.unshift(t):Array.isArray(t)&&(this.config.noticeArr=t.concat(this.config.noticeArr)),this._marqueeGo()}},{key:"_marqueeGo",value:function(t){var e=this.config;e.isGoing||(e.isGoing=!0,this._renderNextNotice())}},{key:"_renderNextNotice",value:function(){var t=this.config,e=t.noticeArr,i=e.shift();if(void 0===i)return void(this.config.isGoing=!1);t.isDataLoop&&e.push(i);var n=this._dealWithMsg(i);this._renderLabel(n),this._currentNoticeIn()}},{key:"_dealWithMsg",value:function(t){var e=[t];if("string"==typeof t){var i=t.indexOf("恭喜"),n=t.indexOf("赢取"),o=t.indexOf("，"),r=t.indexOf("赢得了");-1!==i&&-1!==n?e=[t.slice(0,i+2),t.slice(i+2,n),t.slice(n,n+2),t.slice(n+2)]:-1!==o&&-1!==r&&(e=[t.slice(0,o+1),t.slice(o+1,r),t.slice(r,r+3),t.slice(r+3)])}if("object"===(void 0===t?"undefined":a(t))&&"name"in t&&"award"in t){var s=this.options.modelData[this.config.count++%3].split("*");e=[s[0],t.name,s[1],t.award,s[2]]}return e}},{key:"_renderLabel",value:function(t){var e=this;this.removeChildren(),this.config.currentType=1===t.length?"nomal":"win",t.forEach(function(t,i){var n="";e._labelChildren[i].text=t,n=1===i?e.options.colorHigh:3===i?e.options.colorHigh2||e.options.colorHigh:e.options.color,e._labelChildren[i].color=n});for(var i=0;i<t.length;i++)0!==i&&(this._labelChildren[i].x=this._labelChildren[i-1].x+this._labelChildren[i-1].displayWidth+2),this.addChild(this._labelChildren[i])}},{key:"_currentNoticeIn",value:function(t){this.x=this.config.MASKWIDTH,Laya.Tween.to(this,{x:0},this.options.duraing,Laya.Ease.linearIn,Laya.Handler.create(this,this._currentNoticeOut))}},{key:"_currentNoticeOut",value:function(){var t=this.config,e=Math.ceil(this.displayWidth);Laya.Tween.to(this,{x:-1*e},this.options.duraing,Laya.Ease.linearIn,Laya.Handler.create(this,this._renderNextNotice),this.options.intervalTime[t.currentType])}}]),e}(Laya.Box);u.MarqueeLaya=c},function(t,e,i){"use strict";!function(){for(var t=0,e=["webkit","moz"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,i){var n=(new Date).getTime(),o=Math.max(0,16.7-(n-t)),r=window.setTimeout(function(){e(n+o)},o);return t=n+o,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}()},function(t,e,i){"use strict";var n,o,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};(function(){var a=this,s=a._,u=Array.prototype,c=Object.prototype,l=Function.prototype,h=u.push,f=u.slice,p=u.concat,d=c.toString,m=c.hasOwnProperty,g=Array.isArray,y=Object.keys,v=l.bind,b=function t(e){return e instanceof t?e:this instanceof t?void(this._wrapped=e):new t(e)};void 0!==t&&t.exports&&(e=t.exports=b),e._=b,b.VERSION="1.7.0";var x=function(t,e,i){if(void 0===e)return t;switch(null==i?3:i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,o){return t.call(e,i,n,o)};case 4:return function(i,n,o,r){return t.call(e,i,n,o,r)}}return function(){return t.apply(e,arguments)}};b.iteratee=function(t,e,i){return null==t?b.identity:b.isFunction(t)?x(t,e,i):b.isObject(t)?b.matches(t):b.property(t)},b.each=b.forEach=function(t,e,i){if(null==t)return t;e=x(e,i);var n,o=t.length;if(o===+o)for(n=0;o>n;n++)e(t[n],n,t);else{var r=b.keys(t);for(n=0,o=r.length;o>n;n++)e(t[r[n]],r[n],t)}return t},b.map=b.collect=function(t,e,i){if(null==t)return[];e=b.iteratee(e,i);for(var n,o=t.length!==+t.length&&b.keys(t),r=(o||t).length,a=Array(r),s=0;r>s;s++)n=o?o[s]:s,a[s]=e(t[n],n,t);return a};var _="Reduce of empty array with no initial value";b.reduce=b.foldl=b.inject=function(t,e,i,n){null==t&&(t=[]),e=x(e,n,4);var o,r=t.length!==+t.length&&b.keys(t),a=(r||t).length,s=0;if(arguments.length<3){if(!a)throw new TypeError(_);i=t[r?r[s++]:s++]}for(;a>s;s++)o=r?r[s]:s,i=e(i,t[o],o,t);return i},b.reduceRight=b.foldr=function(t,e,i,n){null==t&&(t=[]),e=x(e,n,4);var o,r=t.length!==+t.length&&b.keys(t),a=(r||t).length;if(arguments.length<3){if(!a)throw new TypeError(_);i=t[r?r[--a]:--a]}for(;a--;)o=r?r[a]:a,i=e(i,t[o],o,t);return i},b.find=b.detect=function(t,e,i){var n;return e=b.iteratee(e,i),b.some(t,function(t,i,o){return e(t,i,o)?(n=t,!0):void 0}),n},b.filter=b.select=function(t,e,i){var n=[];return null==t?n:(e=b.iteratee(e,i),b.each(t,function(t,i,o){e(t,i,o)&&n.push(t)}),n)},b.reject=function(t,e,i){return b.filter(t,b.negate(b.iteratee(e)),i)},b.every=b.all=function(t,e,i){if(null==t)return!0;e=b.iteratee(e,i);var n,o,r=t.length!==+t.length&&b.keys(t),a=(r||t).length;for(n=0;a>n;n++)if(o=r?r[n]:n,!e(t[o],o,t))return!1;return!0},b.some=b.any=function(t,e,i){if(null==t)return!1;e=b.iteratee(e,i);var n,o,r=t.length!==+t.length&&b.keys(t),a=(r||t).length;for(n=0;a>n;n++)if(o=r?r[n]:n,e(t[o],o,t))return!0;return!1},b.contains=b.include=function(t,e){return null!=t&&(t.length!==+t.length&&(t=b.values(t)),b.indexOf(t,e)>=0)},b.invoke=function(t,e){var i=f.call(arguments,2),n=b.isFunction(e);return b.map(t,function(t){return(n?e:t[e]).apply(t,i)})},b.pluck=function(t,e){return b.map(t,b.property(e))},b.where=function(t,e){return b.filter(t,b.matches(e))},b.findWhere=function(t,e){return b.find(t,b.matches(e))},b.max=function(t,e,i){var n,o,r=-1/0,a=-1/0;if(null==e&&null!=t){t=t.length===+t.length?t:b.values(t);for(var s=0,u=t.length;u>s;s++)(n=t[s])>r&&(r=n)}else e=b.iteratee(e,i),b.each(t,function(t,i,n){((o=e(t,i,n))>a||o===-1/0&&r===-1/0)&&(r=t,a=o)});return r},b.min=function(t,e,i){var n,o,r=1/0,a=1/0;if(null==e&&null!=t){t=t.length===+t.length?t:b.values(t);for(var s=0,u=t.length;u>s;s++)n=t[s],r>n&&(r=n)}else e=b.iteratee(e,i),b.each(t,function(t,i,n){o=e(t,i,n),(a>o||1/0===o&&1/0===r)&&(r=t,a=o)});return r},b.shuffle=function(t){for(var e,i=t&&t.length===+t.length?t:b.values(t),n=i.length,o=Array(n),r=0;n>r;r++)e=b.random(0,r),e!==r&&(o[r]=o[e]),o[e]=i[r];return o},b.sample=function(t,e,i){return null==e||i?(t.length!==+t.length&&(t=b.values(t)),t[b.random(t.length-1)]):b.shuffle(t).slice(0,Math.max(0,e))},b.sortBy=function(t,e,i){return e=b.iteratee(e,i),b.pluck(b.map(t,function(t,i,n){return{value:t,index:i,criteria:e(t,i,n)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return t.index-e.index}),"value")};var w=function(t){return function(e,i,n){var o={};return i=b.iteratee(i,n),b.each(e,function(n,r){var a=i(n,r,e);t(o,n,a)}),o}};b.groupBy=w(function(t,e,i){b.has(t,i)?t[i].push(e):t[i]=[e]}),b.indexBy=w(function(t,e,i){t[i]=e}),b.countBy=w(function(t,e,i){b.has(t,i)?t[i]++:t[i]=1}),b.sortedIndex=function(t,e,i,n){i=b.iteratee(i,n,1);for(var o=i(e),r=0,a=t.length;a>r;){var s=r+a>>>1;i(t[s])<o?r=s+1:a=s}return r},b.toArray=function(t){return t?b.isArray(t)?f.call(t):t.length===+t.length?b.map(t,b.identity):b.values(t):[]},b.size=function(t){return null==t?0:t.length===+t.length?t.length:b.keys(t).length},b.partition=function(t,e,i){e=b.iteratee(e,i);var n=[],o=[];return b.each(t,function(t,i,r){(e(t,i,r)?n:o).push(t)}),[n,o]},b.first=b.head=b.take=function(t,e,i){return null==t?void 0:null==e||i?t[0]:0>e?[]:f.call(t,0,e)},b.initial=function(t,e,i){return f.call(t,0,Math.max(0,t.length-(null==e||i?1:e)))},b.last=function(t,e,i){return null==t?void 0:null==e||i?t[t.length-1]:f.call(t,Math.max(t.length-e,0))},b.rest=b.tail=b.drop=function(t,e,i){return f.call(t,null==e||i?1:e)},b.compact=function(t){return b.filter(t,b.identity)};var k=function t(e,i,n,o){if(i&&b.every(e,b.isArray))return p.apply(o,e);for(var r=0,a=e.length;a>r;r++){var s=e[r];b.isArray(s)||b.isArguments(s)?i?h.apply(o,s):t(s,i,n,o):n||o.push(s)}return o};b.flatten=function(t,e){return k(t,e,!1,[])},b.without=function(t){return b.difference(t,f.call(arguments,1))},b.uniq=b.unique=function(t,e,i,n){if(null==t)return[];b.isBoolean(e)||(n=i,i=e,e=!1),null!=i&&(i=b.iteratee(i,n));for(var o=[],r=[],a=0,s=t.length;s>a;a++){var u=t[a];if(e)a&&r===u||o.push(u),r=u;else if(i){var c=i(u,a,t);b.indexOf(r,c)<0&&(r.push(c),o.push(u))}else b.indexOf(o,u)<0&&o.push(u)}return o},b.union=function(){return b.uniq(k(arguments,!0,!0,[]))},b.intersection=function(t){if(null==t)return[];for(var e=[],i=arguments.length,n=0,o=t.length;o>n;n++){var r=t[n];if(!b.contains(e,r)){for(var a=1;i>a&&b.contains(arguments[a],r);a++);a===i&&e.push(r)}}return e},b.difference=function(t){var e=k(f.call(arguments,1),!0,!0,[]);return b.filter(t,function(t){return!b.contains(e,t)})},b.zip=function(t){if(null==t)return[];for(var e=b.max(arguments,"length").length,i=Array(e),n=0;e>n;n++)i[n]=b.pluck(arguments,n);return i},b.object=function(t,e){if(null==t)return{};for(var i={},n=0,o=t.length;o>n;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},b.indexOf=function(t,e,i){if(null==t)return-1;var n=0,o=t.length;if(i){if("number"!=typeof i)return n=b.sortedIndex(t,e),t[n]===e?n:-1;n=0>i?Math.max(0,o+i):i}for(;o>n;n++)if(t[n]===e)return n;return-1},b.lastIndexOf=function(t,e,i){if(null==t)return-1;var n=t.length;for("number"==typeof i&&(n=0>i?n+i+1:Math.min(n,i+1));--n>=0;)if(t[n]===e)return n;return-1},b.range=function(t,e,i){arguments.length<=1&&(e=t||0,t=0),i=i||1;for(var n=Math.max(Math.ceil((e-t)/i),0),o=Array(n),r=0;n>r;r++,t+=i)o[r]=t;return o};var S=function(){};b.bind=function(t,e){var i,n;if(v&&t.bind===v)return v.apply(t,f.call(arguments,1));if(!b.isFunction(t))throw new TypeError("Bind must be called on a function");return i=f.call(arguments,2),n=function(){if(!(this instanceof n))return t.apply(e,i.concat(f.call(arguments)));S.prototype=t.prototype;var o=new S;S.prototype=null;var r=t.apply(o,i.concat(f.call(arguments)));return b.isObject(r)?r:o}},b.partial=function(t){var e=f.call(arguments,1);return function(){for(var i=0,n=e.slice(),o=0,r=n.length;r>o;o++)n[o]===b&&(n[o]=arguments[i++]);for(;i<arguments.length;)n.push(arguments[i++]);return t.apply(this,n)}},b.bindAll=function(t){var e,i,n=arguments.length;if(1>=n)throw new Error("bindAll must be passed function names");for(e=1;n>e;e++)i=arguments[e],t[i]=b.bind(t[i],t);return t},b.memoize=function(t,e){var i=function i(n){var o=i.cache,r=e?e.apply(this,arguments):n;return b.has(o,r)||(o[r]=t.apply(this,arguments)),o[r]};return i.cache={},i},b.delay=function(t,e){var i=f.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},b.defer=function(t){return b.delay.apply(b,[t,1].concat(f.call(arguments,1)))},b.throttle=function(t,e,i){var n,o,r,a=null,s=0;i||(i={});var u=function(){s=!1===i.leading?0:b.now(),a=null,r=t.apply(n,o),a||(n=o=null)};return function(){var c=b.now();s||!1!==i.leading||(s=c);var l=e-(c-s);return n=this,o=arguments,0>=l||l>e?(clearTimeout(a),a=null,s=c,r=t.apply(n,o),a||(n=o=null)):a||!1===i.trailing||(a=setTimeout(u,l)),r}},b.debounce=function(t,e,i){var n,o,r,a,s,u=function u(){var c=b.now()-a;e>c&&c>0?n=setTimeout(u,e-c):(n=null,i||(s=t.apply(r,o),n||(r=o=null)))};return function(){r=this,o=arguments,a=b.now();var c=i&&!n;return n||(n=setTimeout(u,e)),c&&(s=t.apply(r,o),r=o=null),s}},b.wrap=function(t,e){return b.partial(e,t)},b.negate=function(t){return function(){return!t.apply(this,arguments)}},b.compose=function(){var t=arguments,e=t.length-1;return function(){for(var i=e,n=t[e].apply(this,arguments);i--;)n=t[i].call(this,n);return n}},b.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},b.before=function(t,e){var i;return function(){return--t>0?i=e.apply(this,arguments):e=null,i}},b.once=b.partial(b.before,2),b.keys=function(t){if(!b.isObject(t))return[];if(y)return y(t);var e=[];for(var i in t)b.has(t,i)&&e.push(i);return e},b.values=function(t){for(var e=b.keys(t),i=e.length,n=Array(i),o=0;i>o;o++)n[o]=t[e[o]];return n},b.pairs=function(t){for(var e=b.keys(t),i=e.length,n=Array(i),o=0;i>o;o++)n[o]=[e[o],t[e[o]]];return n},b.invert=function(t){for(var e={},i=b.keys(t),n=0,o=i.length;o>n;n++)e[t[i[n]]]=i[n];return e},b.functions=b.methods=function(t){var e=[];for(var i in t)b.isFunction(t[i])&&e.push(i);return e.sort()},b.extend=function(t){if(!b.isObject(t))return t;for(var e,i,n=1,o=arguments.length;o>n;n++){e=arguments[n];for(i in e)m.call(e,i)&&(t[i]=e[i])}return t},b.pick=function(t,e,i){var n,o={};if(null==t)return o;if(b.isFunction(e)){e=x(e,i);for(n in t){var r=t[n];e(r,n,t)&&(o[n]=r)}}else{var a=p.apply([],f.call(arguments,1));t=new Object(t);for(var s=0,u=a.length;u>s;s++)(n=a[s])in t&&(o[n]=t[n])}return o},b.omit=function(t,e,i){if(b.isFunction(e))e=b.negate(e);else{var n=b.map(p.apply([],f.call(arguments,1)),String);e=function(t,e){return!b.contains(n,e)}}return b.pick(t,e,i)},b.defaults=function(t){if(!b.isObject(t))return t;for(var e=1,i=arguments.length;i>e;e++){var n=arguments[e];for(var o in n)void 0===t[o]&&(t[o]=n[o])}return t},b.clone=function(t){return b.isObject(t)?b.isArray(t)?t.slice():b.extend({},t):t},b.tap=function(t,e){return e(t),t};var C=function t(e,i,n,o){if(e===i)return 0!==e||1/e==1/i;if(null==e||null==i)return e===i;e instanceof b&&(e=e._wrapped),i instanceof b&&(i=i._wrapped);var a=d.call(e);if(a!==d.call(i))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+e==""+i;case"[object Number]":return+e!=+e?+i!=+i:0==+e?1/+e==1/i:+e==+i;case"[object Date]":case"[object Boolean]":return+e==+i}if("object"!=(void 0===e?"undefined":r(e))||"object"!=(void 0===i?"undefined":r(i)))return!1;for(var s=n.length;s--;)if(n[s]===e)return o[s]===i;var u=e.constructor,c=i.constructor;if(u!==c&&"constructor"in e&&"constructor"in i&&!(b.isFunction(u)&&u instanceof u&&b.isFunction(c)&&c instanceof c))return!1;n.push(e),o.push(i);var l,h;if("[object Array]"===a){if(l=e.length,h=l===i.length)for(;l--&&(h=t(e[l],i[l],n,o)););}else{var f,p=b.keys(e);if(l=p.length,h=b.keys(i).length===l)for(;l--&&(f=p[l],h=b.has(i,f)&&t(e[f],i[f],n,o)););}return n.pop(),o.pop(),h};b.isEqual=function(t,e){return C(t,e,[],[])},b.isEmpty=function(t){if(null==t)return!0;if(b.isArray(t)||b.isString(t)||b.isArguments(t))return 0===t.length;for(var e in t)if(b.has(t,e))return!1;return!0},b.isElement=function(t){return!(!t||1!==t.nodeType)},b.isArray=g||function(t){return"[object Array]"===d.call(t)},b.isObject=function(t){var e=void 0===t?"undefined":r(t);return"function"===e||"object"===e&&!!t},b.each(["Arguments","Function","String","Number","Date","RegExp"],function(t){b["is"+t]=function(e){return d.call(e)==="[object "+t+"]"}}),b.isArguments(arguments)||(b.isArguments=function(t){return b.has(t,"callee")}),"function"!=typeof/./&&(b.isFunction=function(t){return"function"==typeof t||!1}),b.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},b.isNaN=function(t){return b.isNumber(t)&&t!==+t},b.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===d.call(t)},b.isNull=function(t){return null===t},b.isUndefined=function(t){return void 0===t},b.has=function(t,e){return null!=t&&m.call(t,e)},b.noConflict=function(){return a._=s,this},b.identity=function(t){return t},b.constant=function(t){return function(){return t}},b.noop=function(){},b.property=function(t){return function(e){return e[t]}},b.matches=function(t){var e=b.pairs(t),i=e.length;return function(t){if(null==t)return!i;t=new Object(t);for(var n=0;i>n;n++){var o=e[n],r=o[0];if(o[1]!==t[r]||!(r in t))return!1}return!0}},b.times=function(t,e,i){var n=Array(Math.max(0,t));e=x(e,i,1);for(var o=0;t>o;o++)n[o]=e(o);return n},b.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},b.now=Date.now||function(){return(new Date).getTime()};var A={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},L=b.invert(A),E=function(t){var e=function(e){return t[e]},i="(?:"+b.keys(t).join("|")+")",n=RegExp(i),o=RegExp(i,"g");return function(t){return t=null==t?"":""+t,n.test(t)?t.replace(o,e):t}};b.escape=E(A),b.unescape=E(L),b.result=function(t,e){if(null!=t){var i=t[e];return b.isFunction(i)?t[e]():i}};var O=0;b.uniqueId=function(t){var e=++O+"";return t?t+e:e},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var T=/(.)^/,N={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\u2028|\u2029/g,M=function(t){return"\\"+N[t]};b.template=function(t,e,i){!e&&i&&(e=i),e=b.defaults({},e,b.templateSettings);var n=RegExp([(e.escape||T).source,(e.interpolate||T).source,(e.evaluate||T).source].join("|")+"|$","g"),o=0,r="__p+='";t.replace(n,function(e,i,n,a,s){return r+=t.slice(o,s).replace(B,M),o=s+e.length,i?r+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?r+="'+\n((__t=("+n+"))==null?'':__t)+\n'":a&&(r+="';\n"+a+"\n__p+='"),e}),r+="';\n",e.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{var a=new Function(e.variable||"obj","_",r)}catch(t){throw t.source=r,t}var s=function(t){return a.call(this,t,b)};return s.source="function("+(e.variable||"obj")+"){\n"+r+"}",s},b.chain=function(t){var e=b(t);return e._chain=!0,e};var P=function(t){return this._chain?b(t).chain():t};b.mixin=function(t){b.each(b.functions(t),function(e){var i=b[e]=t[e];b.prototype[e]=function(){var t=[this._wrapped];return h.apply(t,arguments),P.call(this,i.apply(b,t))}})},b.mixin(b),b.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=u[t];b.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!==t&&"splice"!==t||0!==i.length||delete i[0],P.call(this,i)}}),b.each(["concat","join","slice"],function(t){var e=u[t];b.prototype[t]=function(){return P.call(this,e.apply(this._wrapped,arguments))}}),b.prototype.value=function(){return this._wrapped},i(29)&&(n=[],void 0!==(o=function(){return b}.apply(e,n))&&(t.exports=o))}).call(window)},function(t,e,i){"use strict";var n=window.app||{},o=n.config={};o.localStatus=!0,o.debug=!0,o.gameWidth=1334,o.gameHeight=750,o.screenMode=Laya.Stage.SCREEN_HORIZONTAL,o.scaleMode=Laya.Stage.SCALE_FIXED_WIDTH,o.alignH=Laya.Stage.ALIGN_CENTER,o.alignV=Laya.Stage.ALIGN_MIDDLE,o.RESOURCE={},o.GAME_VERSION={}},function(t,e,i){"use strict";var n=window.app||{};n.data={COLOR_TO_NUMBER:["gray","purple","cyan","pink","green","blue","orange","colors"],ALL_ANGLE:[{n:0,c:1,b:0},{n:1,c:2,b:0},{n:2,c:3,b:0},{n:3,c:4,b:0},{n:4,c:5,b:0},{n:5,c:6,b:0},{n:6,c:7,b:0},{n:7,c:3,b:0},{n:8,c:1,b:0},{n:9,c:2,b:0},{n:10,c:3,b:0},{n:11,c:4,b:0},{n:12,c:5,b:0},{n:13,c:6,b:0},{n:14,c:7,b:0},{n:15,c:3,b:0}],BEZIER_MIDDLEPOS:[{x:0,y:313},{x:0,y:388},{x:0,y:288},{x:0,y:268},{x:115,y:146},{x:40,y:160},{x:0,y:130},{x:-90,y:157},{x:-140,y:120},{x:90,y:180},{x:0,y:170},{x:0,y:200},{x:-90,y:124},{x:-100,y:100},{x:-120,y:90},{x:-200,y:100}],END_POSITION_LIST:[{isUp:!0,x:307,y:125},{isUp:!0,x:245,y:251},{isUp:!1,x:311,y:234},{isUp:!0,x:388,y:236},{isUp:!0,x:182,y:371},{isUp:!1,x:249,y:360},{isUp:!0,x:326,y:358},{isUp:!1,x:392,y:344},{isUp:!0,x:467,y:346},{isUp:!0,x:120,y:494},{isUp:!1,x:185,y:478},{isUp:!0,x:261,y:478},{isUp:!1,x:329,y:465},{isUp:!0,x:405,y:467},{isUp:!1,x:472,y:454},{isUp:!0,x:549,y:454}],CANCEL_LIGHT_POS:[{direction:0,x:299,y:145},{direction:1,x:238,y:226},{direction:1,x:322,y:224},{direction:0,x:236,y:272},{direction:0,x:380,y:258},{direction:1,x:171,y:343},{direction:1,x:251,y:340},{direction:1,x:325,y:337},{direction:1,x:401,y:332},{direction:0,x:171,y:392},{direction:0,x:317,y:378},{direction:0,x:460,y:365},{direction:1,x:112,y:474},{direction:1,x:187,y:471},{direction:1,x:256,y:454},{direction:1,x:332,y:457},{direction:1,x:405,y:444},{direction:1,x:480,y:437}],LIGHT_AND_INDEX_TABLE:{"0-2":0,"1-2":1,"2-3":2,"1-5":3,"3-7":4,"4-5":5,"5-6":6,"6-7":7,"7-8":8,"4-10":9,"6-12":10,"8-14":11,"9-10":12,"10-11":13,"11-12":14,"12-13":15,"13-14":16,"14-15":17},LOCAL_DATA:{code:0,type:1,initial:[{n:0,c:2,b:1},{n:1,c:1,b:1},{n:2,c:6,b:0},{n:3,c:1,b:0},{n:4,c:8,b:0},{n:5,c:1,b:0},{n:6,c:2,b:0},{n:7,c:6,b:0},{n:8,c:8,b:0},{n:9,c:7,b:0},{n:10,c:1,b:0},{n:11,c:8,b:0},{n:12,c:3,b:0},{n:13,c:7,b:0},{n:14,c:3,b:0},{n:15,c:7,b:0}],change:[{remove:[{triangle:[{n:3,c:1,b:0},{n:4,c:8,b:0},{n:5,c:1,b:0},{n:11,c:8,b:0},{n:10,c:1,b:0}],prize_color:4,prize:.5,prize_amount:100},{triangle:[{n:7,c:1,b:0},{n:8,c:8,b:0},{n:12,c:1,b:0},{n:13,c:8,b:0},{n:15,c:1,b:0}],prize_color:5,prize:.5,prize_amount:2e3}],fill:[{n:3,c:2,b:0},{n:4,c:1,b:0},{n:5,c:8,b:0},{n:11,c:6,b:0},{n:10,c:3,b:0},{n:7,c:2,b:0},{n:8,c:1,b:0},{n:12,c:8,b:0},{n:13,c:6,b:0},{n:15,c:3,b:0}]}],rate:.5,winAmount:50,times:1},ERROR_TEXT:{2:"获取奖池信息失败",3:"参数有误",4:"用户正在投币，请勿刷接口",5:"余额不足，请充值",6:"平台账号已被禁用",7:"游戏账号已被禁用",8:"服务器开小差了，投币额以欢乐值的形式已退回到您的账号了哟~",23:"替换位置有误",24:"长时间未操作，惊喜奖励已结束",25:"该位置已替换",50:"万里通单笔消费达上限",51:"万里通单日积分消费达上限",81:"OTP",82:"支付渠道被禁用",31:"地球信号不好，请稍后重试~"}}},function(t,e,i){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=window.app,a=r.config.RESOURCE,s=Laya.Loader.XML,u=Laya.Loader.IMAGE,c=Laya.Loader.ATLAS,l=Laya.Loader.BUFFER,h=[{url:"images/font/light_font.fnt",name:"light_font",type:s},{url:"images/font/win_font.fnt",name:"win_font",type:s},{url:"images/font/blue.fnt",name:"blue",type:s},{url:"images/font/colors.fnt",name:"colors",type:s},{url:"images/font/cyan.fnt",name:"cyan",type:s},{url:"images/font/gray.fnt",name:"gray",type:s},{url:"images/font/green.fnt",name:"green",type:s},{url:"images/font/orange.fnt",name:"orange",type:s},{url:"images/font/pink.fnt",name:"pink",type:s},{url:"images/font/purple.fnt",name:"purple",type:s}],f=[{url:"images/load/bg.png",type:u},{url:"images/load/fangchenmi.png",type:u},{url:"images/load/logo.png",type:u},{url:"images/animation/loding.sk",type:l},{url:"images/animation/loding.png",type:u},{url:"res/atlas/images/load.json",type:c}],p=[{url:"images/room/trianglebg.png",type:u},{url:"images/room/bg.jpg",type:u},{url:"images/room/bottom.png",type:u},{url:"images/room/marquee.png",type:u},{url:"images/room/top.png",type:u},{url:"images/room/upbg.png",type:u},{url:"images/animation/triangle/blue.sk",type:l},{url:"images/animation/triangle/blue.png",type:u},{url:"images/animation/triangle/colors.sk",type:l},{url:"images/animation/triangle/colors.png",type:u},{url:"images/animation/triangle/cyan.sk",type:l},{url:"images/animation/triangle/cyan.png",type:u},{url:"images/animation/triangle/gray.sk",type:l},{url:"images/animation/triangle/gray.png",type:u},{url:"images/animation/triangle/green.sk",type:l},{url:"images/animation/triangle/green.png",type:u},{url:"images/animation/triangle/orange.sk",type:l},{url:"images/animation/triangle/orange.png",type:u},{url:"images/animation/triangle/pink.sk",type:l},{url:"images/animation/triangle/pink.png",type:u},{url:"images/animation/triangle/purple.sk",type:l},{url:"images/animation/triangle/purple.png",type:u},{url:"images/animation/bonus.sk",type:l},{url:"images/animation/bonus.png",type:u},{url:"images/animation/btn_start.sk",type:l},{url:"images/animation/btn_start.png",type:u},{url:"images/animation/surprise.sk",type:l},{url:"images/animation/surprise.png",type:u},{url:"images/animation/coins.sk",type:l},{url:"images/animation/coins.png",type:u},{url:"images/animation/fudai.sk",type:l},{url:"images/animation/fudai.png",type:u},{url:"images/animation/fantastic.sk",type:l},{url:"images/animation/fantastic.png",type:u},{url:"images/animation/perfect.sk",type:l},{url:"images/animation/perfect.png",type:u},{url:"images/animation/bonusAward.sk",type:l},{url:"images/animation/bonusAward.png",type:u},{url:"images/animation/finger.sk",type:l},{url:"images/animation/finger.png",type:u},{url:"images/animation/notice.sk",type:l},{url:"images/animation/notice.png",type:u},{url:"images/animation/yellow_light.sk",type:l},{url:"images/animation/yellow_light.png",type:u},{url:"images/animation/win.sk",type:l},{url:"images/animation/win.png",type:u}],d=[{url:"res/atlas/images/room.json",type:c},{url:"res/atlas/images/pop.json",type:c}],m=[{url:"images/pop/btn_chong.png",type:u},{url:"images/pop/help_0.png",type:u},{url:"images/pop/help_1.png",type:u},{url:"images/pop/help_bg.png",type:u},{url:"images/pop/helpt.png",type:u},{url:"images/pop/inputbg.png",type:u},{url:"images/pop/popbg.png",type:u},{url:"images/pop/rechargeT.png",type:u},{url:"images/pop/rg1.png",type:u},{url:"images/pop/rt.png",type:u}];a.fonts=h,a.loadingRes=f,a.disLoadingRes=[].concat(p,d,m),a.images=[].concat(p,d,f,m);var g=[].concat(n(a.fonts),n(a.images)),y=r.config.GAME_VERSION,v=window.staticVertion||Date.now();!function t(e){"object"===(void 0===e?"undefined":o(e))&&e.forEach(function(e,i){var n=void 0,o=void 0,r=void 0;"string"==typeof e.url?(o=e.url.indexOf(".json"),r=e.url.indexOf(".fnt"),o>-1?n=e.url.substr(0,o)+".png":r>-1&&(n=e.url.substr(0,r)+".png"),n&&(y[n]=v),y[e.url]=v):t(e)})}(g)},function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=window.app,r=window.GM,a=o.utils={};a.log=function(){var t;o.config.debug&&window.console&&(t=window.console).log.apply(t,arguments)},a.warn=function(){var t;o.config.debug&&window.console&&(t=window.console).warn.apply(t,arguments)},a.info=function(){var t;o.config.debug&&window.console&&(t=window.console).info.apply(t,arguments)},a.initDebug=function(t,e){var i=location.search.slice(1).split("&"),n=!1;return i.forEach(function(i){var o=i.split("=");o[0]===t&&o[1]===e&&(n=!0)}),n},a.randomNumber=function(t,e){var i=t,n=e;return void 0===e&&(i=0,n=t),Math.round(Math.random()*(n-i)+i)},a.gotoLogin=function(){location.href=r.userLoginUrl},a.checkLoginStatus=function(){return o.config.localStatus||window.token&&r.userLogged},a.otpCheckHandler=function(){location.href="/?act=otp&st=otpPage"},a.willGotoLogin=function(){if(!a.checkLoginStatus())return a.gotoLogin(),!0},a.checkOtherYxb=function(){window.GM&&r.whereYxb&&r.whereYxb()},a.getStringLength=function(){return(""+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/[^\x00-\xff]/gi,"ox")).length},a.getActiveStr=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,i=0;t=String(t);var n=t.length,o="";if(0===n)return"";for(var r=0;r<n;r++){if(t.charCodeAt(r)>128?i+=2:i+=1,i>e)return o+"...";o+=t.charAt(r)}return o},a.extendDeep=function(t,e){var e=e||{},i=Object.prototype.toString;for(var o in t)t.hasOwnProperty(o)&&("object"===("undefined"==typeof _val?"undefined":n(_val))?(e[o]="[object Array]"===i.call(t[o])?[]:{},extendDeep(t[o],e[o])):e[o]=t[o]);return e}},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(){n(this,t),this.init()}return o(t,[{key:"init",value:function(){Laya.SoundManager.setMusicVolume(.3),Laya.SoundManager.setSoundVolume(1),this.config={audioSources:["bg","bonus","change","click","coin","enter","exit","fantastic","fudai","line","perfect","rotate","win"],soundStateKey:"sound"+GM.gameId,stateSound:""}}},{key:"initResource",value:function(){var t=this;this.config.audioSources.forEach(function(e,i){"bg"!==e&&t.play(e)}),this.stopAllSound()}},{key:"stopAllSound",value:function(){Laya.SoundManager.stopAllSound()}},{key:"play",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i="audio/"+t+".mp3?v="+window.staticVertion;this.config.audioSources.includes(t)&&("bg"===t?Laya.SoundManager.playMusic(i,0):Laya.SoundManager.playSound(i,e))}},{key:"setMuted",value:function(){Laya.SoundManager.muted=!0}},{key:"setMutedNot",value:function(){Laya.SoundManager.muted=!1,this.play("bg")}},{key:"stopBgMusic",value:function(){Laya.SoundManager.stopMusic()}},{key:"setCookie",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7,n=new Date;n.setTime(n.getTime()+24*i*60*1e3);var o="expires="+n.toUTCString();document.cookie=t+"="+e+";"+o}},{key:"getCookie",value:function(t){for(var e=t+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var o=i[n];""===o.charAt(0).trim();)o=o.substring(1);if(-1!==o.indexOf(e))return o.substring(e.length,o.length)}return""}},{key:"clearCookie",value:function(t){this.setCookie(t,"",-1)}},{key:"initSoundState",value:function(t){var e=this.getCookie(this.config.soundStateKey);if("false"===e)return this.config.stateSound="false",t.index=1,void this.setMuted();""===e&&this.setCookie(this.config.soundStateKey,"true"),this.config.stateSound="true",t.index=0,this.setMutedNot()}},{key:"changeSoundState",value:function(t){this.play("click"),"true"===this.config.stateSound?(this.config.stateSound="false",t.index=1,this.setMuted()):(this.config.stateSound="true",t.index=0,this.setMutedNot()),this.setCookie(this.config.soundStateKey,this.config.stateSound)}}]),t}();app.AudioMudule=r},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=window.GM,a=window.app,s=a.data.ERROR_TEXT,u=function(){function t(){n(this,t),this.init()}return o(t,[{key:"init",value:function(){this.registerAction()}},{key:"registerAction",value:function(){a.messageCenter.registerAction("losePointStatus",this.losePointStatusFn.bind(this)).registerAction("losePoint",this.losePointFn.bind(this)).registerAction("marquee",this.noticeMainHandler.bind(this))}},{key:"initMarquee",value:function(t){var e={colorHigh:"#75e8ff",fontSize:20,bold:!0};this.marquee_ui_box=new a.MarqueeLaya(t,e)}},{key:"noticeMainHandler",value:function(t){0===Number(t.code)&&this.marquee_ui_box.start(t.notice)}},{key:"isShowBtnBackHandler",value:function(t){window.GM&&1===r.isCall_out&&r.isShowBtnBack_out&&r.btnBackCall_out&&(t.visible=!0,t.on(Laya.Event.CLICK,null,r.btnBackCall_out))}},{key:"isShowBtnHomeHandler",value:function(t){r.backHomeUrl&&(t.visible=!0,t.on(Laya.Event.CLICK,null,function(){location.href=r.backHomeUrl}))}},{key:"noticeSystem",value:function(t,e){var i=this,n=t.getChildByName("btn_notice"),o=n.getChildByName("red"),a=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.isShowNotice&&(a.isShowRedPoint&&(o.visible=!0),n.on(Laya.Event.CLICK,i,function(){o.visible=!1,t.visible=!1,r.noticePopShow_out&&r.noticePopShow_out()}),n.visible=!0,t.getChildByName("bg").height=e)};window.GM&&1===r.isCall_out&&r.noticeStatus_out&&r.noticeStatus_out(a)}},{key:"defaultInputNotice",value:function(t,e){var i=t>e?t:e,n=void 0,o=!1;if(i<=1e4)n=100;else{n=Math.ceil(i/100),n=String(n);for(var r=1,a=n.length;r<a;r++)"0"!==n[r]&&(o=!0);n=o?Number(n[0])+1+n.slice(1).replace(/\d/g,"0"):n}return n=Number(n),n=n>5e5?5e5:n}},{key:"losePointFn",value:function(t){var e=t,i=e.level,n="您的输分金额已达上限，故账户禁用开始时间："+e.beginTime+"，禁用结束时间："+e.endTime;2!==i&&3!==i||a.observer.publish("commonPopShow",n),a.observer.publish("resetGame")}},{key:"losePointStatusFn",value:function(t){a.observer.publish("commonPopShow","客官，您已被输分禁用，请联系客服！"),a.observer.publish("resetGame")}},{key:"jiujijin",value:function(){Laya.timer.once(3e3,this,function(){window.GM&&window.GM.socket_RJ&&window.GM.socket_RJ.exec&&(window.GM.socket_RJ.exec(),a.messageCenter.emitAjax("userAccount"))})}},{key:"errorHandler",value:function(t){var e=String(t.code),i="",n=null,o=null;if("81"===e)return void a.utils.otpCheckHandler();"5"===e&&(n=function(){a.observer.publish("rechargePopShow")}),"24"===e&&(n=o=function(){window.location.reload()}),e in s||(e="31"),i=s[e],a.observer.publish("commonPopShow",i,n,o)}}]),t}();a.CommonGameModule=u},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=window.app,s=window.CryptoJS,u=window.Base64,c=function(){function t(e){n(this,t),this.ajaxTimeout=3e4,this.socket=null,this.ajaxUrl=e.ajaxUrl||{},this.cmd={},this.registedAction={},this.websocketurl=e.websocketurl||"",this.lib=e.lib||"socketio",this.publicKey=e.publicKey||"",this._commKey="",this.encryptedString="",this.token=e.token,this.jwtToken="",this.init()}return r(t,[{key:"init",value:function(){this.cmd={}}},{key:"registerAction",value:function(t,e){return"function"==typeof e&&(this.registedAction[t]=e),this}},{key:"unRegisterAction",value:function(t){return void 0!==this.registedAction[t]&&delete this.registedAction[t],this}},{key:"dispatchAction",value:function(t,e,i){var n=this.registedAction[t];"function"==typeof n?n("ajax"===i?e:e.res||e.rep):a.utils.log("未注册行为："+t,e)}},{key:"emit",value:function(t,e,i,n){"function"==typeof e&&(n=e),"object"===(void 0===e?"undefined":o(e))&&(i=e),this.registerAction(t,n),"ajax"===e?this.emitAjax(t,i):this.emitSocket({cmd:t,params:i})}},{key:"emitAjax",value:function(t,e){var i=this,n=this.ajaxUrl[t];if("userAccount"===t){var o=(new Date).getTime();n=n.replace(/\*/,o)}window.$.ajax({url:n,data:e,timeout:this.ajaxTimeout,success:function(e){a.utils.log(n,e),e=e||{},i.dispatchAction(t,e,"ajax")},error:function(){}})}},{key:"emitSocket",value:function(t){if(this.socket)if("socketio"===this.lib)console.log("推送：",t.cmd,t),this.socket.emit("router",u.encode(JSON.stringify(t)));else{t.params?t.params.jwt=this.jwtToken:t.params={jwt:this.jwtToken},t.status={time:(new Date).getTime()},a.utils.log("推送：",JSON.stringify(t));var e=s.AES.encrypt(JSON.stringify(t),s.enc.Utf8.parse(this._commKey),{mode:s.mode.ECB,padding:s.pad.Pkcs7});this.socket.write(e.toString())}}},{key:"generateCommKey",value:function(){try{this._commKey=Date.parse(new Date).toString()+Date.parse(new Date).toString()+Date.parse(new Date).toString().substring(0,6)}catch(t){a.utils.log("初始化commKey失败",t)}return this}},{key:"generateEncryptedString",value:function(){try{var t="jwt="+this.token+"&commKey="+this._commKey,e=new window.JSEncrypt;e.setPublicKey(this.publicKey),this.encryptedString=e.encrypt(t)}catch(t){a.utils.log("初始化encryptedString失败",t)}return this}},{key:"connectSocket",value:function(){var t=this;"primus"===this.lib&&(this.generateCommKey(),this.generateEncryptedString());try{"socketio"===this.lib?this.socket=window.io&&window.io(this.websocketurl,{"force new connection":!0}):"primus"===this.lib&&(this.socket=window.Primus.connect(this.websocketurl))}catch(t){return void a.utils.log(t)}"socketio"===this.lib?(this.socket.on("router",function(t){var e=JSON.parse(u.decode(t));console.log("接收数据：",e.cmd,e),this.dispatchAction(e.cmd,e,"socket")}.bind(this)),this.socket.on("connect",function(){a.utils.log("连接已建立")}),this.socket.on("disconnect",function(t){a.utils.log("连接已断开")}),this.socket.on("close",function(t){a.utils.log("连接已关闭")}),this.socket.on("connect_error",function(t){a.utils.log("连接发生错误")}),this.socket.on("reconnecting",function(){a.utils.log("重连中")})):"primus"===this.lib&&(this.socket.on("outgoing::url",function(e){e.query="login="+t.encryptedString,console.log("outgoing::url",e.query)}),this.socket.on("open",function(){a.utils.log("连接成功"),a.utils.checkLoginStatus()||(a.enterRoom(!1),console.log("open~~~未登录。。。"))}),this.socket.on("data",function(t){var e=s.AES.decrypt(t,s.enc.Utf8.parse(this._commKey),{mode:s.mode.ECB,padding:s.pad.Pkcs7}),i=e.toString(s.enc.Utf8),n=JSON.parse(i);"marquee"!==n.cmd?a.utils.log("接收数据：===>",n.cmd,JSON.stringify(n,null,4)):a.utils.log("接收数据：===>",n.cmd,n),"conn::init"===n.cmd&&(this.jwtToken=n.res),this.dispatchAction(n.cmd,n,"socket")}.bind(this)),this.socket.on("error",function(t){a.utils.log("连接出错")}),this.socket.on("reconnect",function(){a.utils.log("重连中"),t.disconnectSocket(),setTimeout(function(){window.location.reload()},2e3)}),this.socket.on("end",function(){a.utils.log("连接已关闭")}))}},{key:"disconnectSocket",value:function(){this.socket&&("socketio"===this.lib?(this.socket.close(),this.socket.removeAllListeners()):this.socket.end(),this.socket=null)}}]),t}();window.messageCenterModule=c},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(e){n(this,t),this.subscribers={}}return o(t,[{key:"publish",value:function(t){var e=this.subscribers[t];if(e){for(var i=arguments.length,n=Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];for(var r=0;r<e.length;r++)e[r].apply(e,n)}return this}},{key:"subscribe",value:function(t,e){return void 0===this.subscribers[t]&&(this.subscribers[t]=[]),this.subscribers[t].push(e),this}},{key:"unsubscribe",value:function(t,e){var i=this.subscribers[t];if(i)if(e){for(var n=i.length-1;n>=0;n--)if(e===i[n]){i.splice(n,1);break}}else for(var o=i.length-1;o>=0;o--)i.splice(o,1);return this}}]),t}();window.observerModule=r},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(e){n(this,t),this.currentScene=null,this.nextScene=null,this.init()}return o(t,[{key:"init",value:function(){}},{key:"loadScene",value:function(t){this.nextScene=t||this.nextScene,null!=this.currentScene?(app.observer.subscribe(this.currentScene.sceneName+"_exit",this.loadNextScene.bind(this)),this.currentScene.onExit()):(this.currentScene=this.nextScene,Laya.stage.addChild(this.currentScene),app.observer.publish(this.currentScene.sceneName+"_enter"))}},{key:"loadNextScene",value:function(){app.observer.unsubscribe(this.currentScene.sceneName+"_exit"),this.currentScene=null,this.loadScene()}}]),t}();window.sceneManagerModule=r},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=window.app,u=window.pop_helpUI,c=function(t){function e(){var t;n(this,e);for(var i=arguments.length,r=Array(i),a=0;a<i;a++)r[a]=arguments[a];var s=o(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(r)));return s.init(),s}return r(e,t),a(e,[{key:"init",value:function(){this.initDom(),this.initConfig(),this.initEvent(),this.registerAction()}},{key:"registerAction",value:function(){s.observer.subscribe("helpPopShow",this.myShow.bind(this)),s.observer.subscribe("helpRenderTate",this.renderRateHandler.bind(this))}},{key:"dispatchAction",value:function(){}},{key:"initDom",value:function(){new window.zsySlider(this.help_glr)}},{key:"initConfig",value:function(){this.config={}}},{key:"initEvent",value:function(){this.getChildByName("close1").on(Laya.Event.CLICK,this,this.close),this.getChildByName("close2").on(Laya.Event.CLICK,this,this.close)}},{key:"renderRateHandler",value:function(t){this.dom_text.text=t.max+"%"}},{key:"myShow",value:function(){this.popup()}}]),e}(u);s.HelpPopUIDialog=c},function(t,e,i){"use strict";!function(){function t(){t.super(this),this.init()}Laya.class(t,"app.RankList",ui.pop.pop_rankUI);var e=t.prototype;e.init=function(){this.myList1.vScrollBarSkin="",this.myList2.vScrollBarSkin="",this.smallList.vScrollBarSkin="",this.bindEvent(),this.loading0.visible=!1,this.inLoading1.visible=!1,this.inLoading2.visible=!1,this.noLogin.visible=!1,this.myList0.array=[],this.myList2.array=[],this.myList1.array=[],this.dom_richList=this.getChildByName("richList"),app.messageCenter.registerAction("top3",this.show.bind(this)),app.messageCenter.registerAction("bpLog",this.myprizelist.bind(this)),app.messageCenter.registerAction("myPrize",this.mywinlist.bind(this)),app.observer.subscribe("rankPopShow",this.popup.bind(this)),this.initRichList()},e.initRichList=function(){this.dom_richList._childs.forEach(function(t,e){t.getChildByName("icon").skin="images/pop/icon"+(e+1)+".png",t.getChildByName("title").skin="images/pop/title"+(e+1)+".png"})},e.bindEvent=function(){this.tabList.on(Laya.Event.CLICK,this,function(){app.audio.play("click");var t=this.tabList.selectedIndex;if(this.tabPage.selectedIndex=t,0==t)this.myList0.visible=!0,this.myList1.visible=!1,this.myList2.visible=!1,this.smallTab.selectedIndex=0,this.rankingList(0);else if(1==t)this.myList0.visible=!1,this.myList1.visible=!0,this.myList2.visible=!1,app.messageCenter.emit("bpLog");else if(2==t){if(this.myList0.visible=!1,this.myList1.visible=!1,this.myList2.visible=!0,""==window.token)return void this.mywinlist();app.messageCenter.emit("myPrize")}}),this.noLogin.on(Laya.Event.CLICK,this,function(){location.href=GM.userLoginUrl}),this.smallTab.on(Laya.Event.CLICK,this,function(){var t=this.smallTab.selectedIndex;this.rankingList(t),app.audio.play("click")})},e.strCount=function(t,e){var t=t+"",i=t.length,n=t.length,o=e,r="",a="";if(i<=o)return t;for(var s=0;s<n;s++){if(r+=t[s],!(r.length<=o))return a+"...";a=r}},e.rankingList=function(t){var e=this,i="";switch(t){case 0:i="day";break;case 1:i="week";break;case 2:i="month"}this.loading0.visible=!0,this.loading0.text="正在加载中",e.smallList.array=[],$.ajax({type:"GET",url:"/?act=game_triangle&st=get_bet_rank&type="+i,timeout:12e3,dataType:"json",success:function(t){if("000"==t.code){var i=t.data,n=i.length,o=[];if(0==n)return void(e.loading0.text="暂无记录");e.loading0.visible=!1;for(var r=0;r<n;r++){var a,s=parseInt(i[r].rank),u=e.strCount(i[r].nickname,10),c=e.strCount(parseInt(i[r].amount),8),l=parseInt(i[r].rank_trend);switch(l){case 1:a=2;break;case 2:a=1;break;case 3:a=0}o.push({item0:s,item1:u,item2:c,item3:a})}e.smallList.array=o}},error:function(t,e){}})},e.richList=function(t){var e=this;if(0===Number(t.code)){for(var i=t.info,n=0,o=i.length;n<3-o;n++)i.push({name:"虚位以待",amount:"0"});this.dom_richList._childs.forEach(function(t,n){t.getChildByName("userName").text=e.strCount(i[n].name,12),t.getChildByName("amount").text=e.strCount(i[n].amount,12)})}},e.myprizelist=function(t){var e=this;if(e.inLoading1.visible=!0,e.inLoading1.text="",0==t.code){var i=t.info;if(e.myList1.array=[],0==i.length||""==i)return e.inLoading1.text="暂无游戏记录！赶紧游戏赢大奖吧!",!1;for(var n=i.length,o=[],r=0;r<n;r++){var a=e.strCount(i[r].amount,9),s=i[r].time,u=e.strCount(i[r].name,12);o.push({item0:s,item1:u,item2:a})}e.myList1.array=o}},e.mywinlist=function(t){var e=this;if(e.inLoading2.visible=!0,e.inLoading2.text="",""==window.token)return void(e.noLogin.visible=!0);if(e.noLogin.visible=!1,0==t.code){var i=t.info;if(e.myList2.array=[],0==i.length||""==i)return e.inLoading2.text="暂无游戏记录！赶紧游戏赢大奖吧!",!1;for(var n=i.length,o=[],r=0;r<n;r++){var a=e.strCount(i[r].amount,12),s=i[r].time;o.push({item0:s,item1:a})}e.myList2.array=o}},e.show=function(t){this.richList(t),this.tabList.selectedIndex=0,this.tabPage.selectedIndex=0,this.smallTab.selectedIndex=0,this.rankingList(0),this.popup()}}()},function(t,e,i){"use strict";!function(){function t(){t.super(this),this.defaultText="请输入大于0的正整数（单位：元）",this.amount=["10","50","100","500"],this.shuoldPay=100,this.init()}Laya.class(t,"app.Rechargepopup",ui.pop.pop_rechargeUI);var e=t.prototype;e.init=function(){this.bindEvent(),app.observer.subscribe("rechargePopShow",this.show.bind(this))},e.bindEvent=function(){this.textinput.on(Laya.Event.CLICK,this,this.handleTextInputFocus),this.mschongzhi.on(Laya.Event.CLICK,this,this.mschongzhibtn),this.tabbox.on(Laya.Event.CLICK,this,this.tabboxbtn)},e.handleTextInputFocus=function(){this.keybox(),app.audio.play("click")},e.mschongzhibtn=function(){var t=redirect_uri,e=gameId,i=tradeName,n=this.textinput.text,o=platform;this.textinput.text>0?window.location.href="/?act=payment&gameId="+e+"&tradeName="+i+"&amount="+n+"&platform="+o+"&redirect_uri="+t:this.textinput.text="请输入大于0的充值金额",app.audio.play("click")},e.tabboxbtn=function(){var t=this.tabbox.selectedIndex;if(-1!=t){var e=this.amount[t];this.textinput.text=e,this.shuoldPay=e,app.audio.play("click")}},e.show=function(){this.tabbox.selectedIndex=2,this.textinput.text="100",this.popup()},e.keybox=function(){this.shuoldPay=this.textinput.text;var t={input:function(t){this.textinput.text=t,this.tabbox.selectedIndex=-1,10==t?this.tabbox.selectedIndex=0:50==t?this.tabbox.selectedIndex=1:100==t?this.tabbox.selectedIndex=2:500==t&&(this.tabbox.selectedIndex=3)}.bind(this),close:function(t,e){"confirm"===t&&(this.textinput.text=e)}.bind(this),length:8};app.keyBoardNumber_ui_pop.enter("",t)}}()},function(t,e,i){"use strict";!function(){var t=Sail&&Sail.Utils||$,e={confirm:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAMAAAAM7l6QAAAAWlBMVEUAAADMQkLLQkLLQkL9Y2PLQkLLQkL9Y2PMQkL9Y2PLQkLLQkLdTk75YGD7YmL9Y2P2Xl77YmL9Y2P9Y2P9Y2PLQkL9Y2PLQkL3Xl7cTU3tWFj5YGDoVVXmVFTAQB7jAAAAFnRSTlMA4qyPiltUU9sGBvr59e3cyl/fplYHf9H6ogAAAJVJREFUKM/lzFkOhCAQRdEHCs5TD1WAuv9ttm00xii1Ae/vSS7Wis/7Ree6DHtZRzelm6Z0XyrpUvY/U7S2QNFSvAEDCfXoJW7QkBTooTzK7CR1CBIH1BLXyIX7qKB9nL2G4TmmMxuUiqd7nVh9Acvs3RWdZ7ZYSpjZB3eysCAnwOaXDgVsfsXcAnul0ao6qFLalCv8AOM4RjeBMUEAAAAAAElFTkSuQmCC",delete:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAMAAAAM7l6QAAAAb1BMVEUAAADLy8ttbGzMzMzMzMxtbGzMzMxtbGzMzMxtbGzMzMxubW3MzMxtbGxtbGyQj4/MzMxtbGxtbGzMzMzMzMzMzMzMzMzMzMzMzMxwb29tbGzMzMxtbGzBwcGtra2NjIy/vr6goKCPjo6kpKSko6Pen5mzAAAAG3RSTlMA/N2piVtVVAYGA+ParPr54ZSKW1Hz5OPf2quDrJY6AAAAqklEQVQoz9XPSQ6DMBBE0TKEeR4yum0Dyf3PGCARLLA76/ztk0oqrMWhfxNy65z7YYytPpeH8v6L6UlaO6Urz+rwRUPpLATiq5svMTrJ1MHn2EfNcQ3BsYBk+2P+8XvgWEFzrFFxXOGumO0MD+NmUyCg0aUjBUgyetn1SVkCRETG8m4wRBHmWiKatBI7CaUnImqxlDZkrUnxKfKO6EXYSoLCK3cqvSJIVngDsvlU0+yaOfMAAAAASUVORK5CYII=",number:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAMAAAAM7l6QAAAAeFBMVEUAAADGxsa3t7f///////////////////+3t7e3t7fo6Oi3t7fT09P///////+3t7e6urr///+3t7f///+3t7e3t7f///////////////+3t7e3t7f///+3t7fQ0ND29vb19fX7+/v39/fo6Ojh4eHe3t65ubm4uLiqIy5xAAAAHHRSTlMABeKJVQb64VtV/Prp5NvbrqysppSKW1Hz11xTZZ6wfwAAAKVJREFUKM/d00cSgzAQRNEWOefgIIkM97+hMbhwuUBzAP/tq1nMorFlGrlt8aPbPTdMHNURPxXVH2Q6v0xnG6+q8LcaXJkBmKGaQxMVJ6qQUpzCptiGRbEFTva/3FHaoaW4gUexh4DiAEmv1j6BI9UsH2DapNJJY4C7jNc6Li7WSiHbM7ZSlPsMCjHLofn5d5CzKBj2nrE4Fbs4Yk6m+V/ytczZT1+rJlhgr8lBXAAAAABJRU5ErkJggg=="},i="public/keyboard_"+(9999999*Math.random()|0)+"/",n=[{text:"1",skin:"number",x:20,y:15},{text:"2",skin:"number",x:280,y:15},{text:"3",skin:"number",x:545,y:15},{text:"4",skin:"number",x:20,y:125},{text:"5",skin:"number",x:280,y:125},{text:"6",skin:"number",x:545,y:125},{text:"7",skin:"number",x:20,y:235},{text:"8",skin:"number",x:280,y:235},{text:"9",skin:"number",x:545,y:235},{text:"0",skin:"number",x:810,y:15},{text:"00",skin:"number",x:810,y:125},{text:".",skin:"number",x:810,y:235},{text:"确定",skin:"confirm",x:1070,y:15},{text:"删除",skin:"delete",x:1070,y:235}],o=Laya.Event.CLICK,r=function(t){function e(){e.super(this),this.configAlpha=null,this.configColor=null,this.closeOnSide=!1,this.on(o,this,function(){this.closeOnSide&&this.event("exit",["mask",null])})}Laya.class(e,"",t);var i=e.prototype;return i.update=function(t,e,i,n,o){this.alpha=this.configAlpha=i,this.configColor=n,this.closeOnSide=o,this.resize(t,e)},i.resize=function(t,e){this.size(t,e),this.graphics.clear(),this.graphics.drawRect(0,0,this.width,this.height,this.configColor),this.alpha=this.configAlpha},e}(Laya.Sprite),a=function(t){function e(){e.super(this),this.Mask=null,this.textValue=null,this.originHeight=null,this.init()}Laya.class(e,"KeyBoard.InputText",t);var i=e.prototype;return i.destroy=function(){t.prototype.destroy.call(this,!0),this.Mask=null,this.textValue=null,this.originHeight=null},i.init=function(t){this.originHeight=60;var e=new r;e.update(this.width,this.height,.5,"#000000",!1);var i=new Laya.Label;i.height=30,i.fontSize=30,i.align="center",this.Mask=e,this.textValue=i,this.addChildren(e,i)},i.update=function(t,e){this.textValue.color=e,this.textValue.text=t},i.resize=function(t,e){var i=e/1334;this.size(t,this.originHeight*i),this.Mask.resize(this.width,this.height),this.textValue.width=t,this.textValue.bottom=0,this.top=-this.height},e}(Laya.Box),s=function(t){function e(t,i){e.super(this),this.config=null,this.callback=null,this.label=null,this.init(t,i)}Laya.class(e,"",t);var n=e.prototype;return n.destroy=function(){t.prototype.destroy.call(this,!0),this.config=null,this.callback=null,this.label=null},n.init=function(t,e){t.width=240,t.height="confirm"===t.skin?210:100,this.config=t,this.skin=i+t.skin+".png",this.sizeGrid="15,15,15,15",this.resize(Laya.stage.width,Laya.stage.height),this.create(t),this.on(o,this,e,[t.text])},n.create=function(t){var e=new Laya.Label(t.text);e.color="confirm"===t.skin?"#ffffff":"#1c1c1c",e.font="arial",e.align="center",e.fontSize=40,e.size(this.width,e.fontSize),e.centerY=0,this.label=e,this.addChild(e)},n.resize=function(t,e){var i=t/1334,n=e/1334;this.size(this.config.width*i,this.config.height*n),this.pos(this.config.x*i,this.config.y*n),this.label&&(this.label.width=this.width)},e}(Laya.Image),u=function(t){function e(){e.super(this),this.keys=[],this.textValue="",this.inputText=null,this.panelMask=null,this.init()}Laya.class(e,"",t);var i=e.prototype;return i.destroy=function(){t.prototype.destroy.call(this,!0)},i.init=function(){var e=Laya.stage.height;e=e<750?750:e,this.size(Laya.stage.width,e/1334*350),this.bottom=-this.height;var i=new r;i.update(this.width,this.height,.5,"#000000",!1);var o=new a;o.resize(this.width,e),this.inputText=o,this.panelMask=i,this.addChildren(i,o);for(var u in n)this.keys.push(new s(n[u],this.onClick.bind(this)));t.prototype.addChildren.apply(this,this.keys)},i.onClick=function(t){this.event("input",[t])},i.update=function(t,e){this.inputText.update(t,e)},i.enter=function(t){this.inputText.update(t,"#ffffff"),Laya.Tween.to(this,{bottom:0},300,Laya.Ease.linearIn)},i.exit=function(t){Laya.Tween.to(this,{bottom:-this.height},200,Laya.Ease.linearIn,Laya.Handler.create(this,function(t){this.event("exit",[t])},[t]))},i.resize=function(t,e){e=e<750?750:e;var i=e/1334;this.size(t,350*i),this.panelMask.resize(this.width,this.height),this.inputText.resize(t,e);for(var n in this.keys)this.keys[n].resize(t,e)},e}(Laya.Box);!function(n){function o(){o.super(this),this.keyBoardMask=null,this.keyBoardPanel=null,this.config=null,this.textValue="",this.firstInput=!1,this.loadAssets()}var a={closeOnSide:!0,shadowAlpha:.3,shadowColor:"#000000",nullMsg:"输入的值不能为空",length:11,float:!1,fixed:4,input:function(t){console.log("当前输入值："+t)},close:function(t,e){"confirm"===t?console.log("点击了确定按钮，关闭输入键盘，当前值："+e):console.log("点击了遮罩，关闭输入键盘。")}};Laya.class(o,"Tools.KeyBoardNumber",n);var s=o.prototype;s.destroy=function(){Laya.stage.off(Laya.Event.RESIZE,this,this.onResize),n.prototype.destroy.call(this,!0),this.keyBoardMask=null,this.keyBoardPanel=null,this.config=null,this.textValue=null},s.loadAssets=function(){var t=this,n=0,o=Object.keys(e).length;for(var r in e)!function(e,r){var a=new Laya.HTMLImage.create(r,{onload:function(){Laya.Loader.cacheRes(i+e+".png",new Laya.Texture(a)),++n===o&&t.init()}})}(r,e[r])},s.init=function(){this.size(Laya.stage.width,Laya.stage.height),this.zOrder=1e3;var t=new u(this.removeSelf.bind(this));t.on("input",this,this.onInput),t.on("exit",this,this.onExit);var e=new r;e.on("exit",this,function(e){t.exit(e)}),this.keyBoardMask=e,this.keyBoardPanel=t,this.addChildren(e,t),Laya.stage.on(Laya.Event.RESIZE,this,this.onResize)},s.onExit=function(t){this.removeSelf(),this.config.close&&this.config.close(t,"confirm"===t?this.textValue+"":null),this.textValue="",this.firstInput=!1},s.onInput=function(t){switch(t){case"删除":var t=this.textValue.split("");t.pop(),this.textValue=t.join(""),this.textValue?this.keyBoardPanel.update(this.textValue,"#ffffff"):this.keyBoardPanel.update(this.config.nullMsg,"#ff0000"),this.config.input&&this.config.input(this.textValue);break;case"确定":this.keyBoardPanel.exit("confirm");break;default:if(this.firstInput&&(this.textValue="",this.firstInput=!1),"."===t){if(!0!==this.config.float)return;if(""==this.textValue&&(t="0."),-1!=this.textValue.indexOf("."))return}if(!0===this.config.float){var e=this.textValue.split(".")[1];if(e&&e.length>=this.config.fixed)return}if((this.textValue+t).length>this.config.length)return;this.textValue=this.textValue+t,this.textValue=this.textValue.replace(/^0+/,""),this.config.input&&this.config.input(this.textValue),this.textValue?this.keyBoardPanel.update(this.textValue,"#ffffff"):this.keyBoardPanel.update(this.config.nullMsg,"#ff0000")}},s.enter=function(e,i){this.config=t.extend({},a,i),this.textValue=e+"",Laya.timer.callLater(this,function(){this.keyBoardMask.update(this.width,this.height,this.config.shadowAlpha,this.config.shadowColor,this.config.closeOnSide),this.keyBoardPanel.enter(this.textValue,this.config)}),Laya.stage.addChild(this)},s.onResize=function(){var t=Laya.stage.width,e=Laya.stage.height;this.size(t,e),this.keyBoardMask.resize(t,e),this.keyBoardPanel.resize(t,e)}}(Laya.Box)}()},function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){function t(){}window.Sail=window.Sail||{};var e=function(){function t(t){var e,a;return!(!t||"[object Object]"!==i.call(t))&&(!(e=Object.getPrototypeOf(t))||"function"==typeof(a=n.call(e,"constructor")&&e.constructor)&&o.call(a)===r)}var e={},i=e.toString,n=e.hasOwnProperty,o=n.toString,r=o.call(Object);return t}();Laya.class(t,"Sail.Utils"),t.createSkeleton=function(t,e,i){e=e||30,i=i||0;var n=Laya.loader.getRes(t+".png"),o=Laya.loader.getRes(t+".sk");if(!n||!o)return null;var r=new Laya.Templet;return r.parseData(n,o,e),r.buildArmature(i)},t.getStringLength=function(t){return(""+t.replace(/[^\x00-\xff]/gi,"ox")).length},t.cutStr=function(t,e){t+="";var i=/[^\x00-\xff]/g;if(t.replace(i,"mm").length<=e)return t;for(var n=Math.floor(e/2),o=n;o<t.length;o++)if(t.substr(0,o).replace(i,"mm").length>=e)return t.substr(0,o)+"...";return t},t.getUrlParam=function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),i=window.location.search.substr(1).match(e);return null!=i?unescape(i[2]):null},t.extend=function(){var i,o,r,a,s,u,c=arguments[0]||{},l=1,h=arguments.length,f=!1;for("boolean"==typeof c&&(f=c,c=arguments[l]||{},l++),"object"!==(void 0===c?"undefined":n(c))&&"function"!==!(void 0===c?"undefined":n(c))&&(c={}),l===h&&(c=this,l--);l<h;l++)if(null!=(i=arguments[l]))for(o in i)r=c[o],a=i[o],c!==a&&(f&&a&&(e(a)||(s=Array.isArray(a)))?(s?(s=!1,u=r&&Array.isArray(r)?r:[]):u=r&&e(r)?r:{},c[o]=t.extend(f,u,a)):void 0!==a&&(c[o]=a));return c}}()},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=window.app,u=window.angleUI,c=window.requestAnimationFrame,l=window.cancelAnimationFrame,h=s.data.COLOR_TO_NUMBER,f=function(t){function e(t){n(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.init(),i.clickHandlerCallBack=t,i}return r(e,t),a(e,[{key:"init",value:function(){this.initDom(),this.initConfig(),this.initEvent()}},{key:"initConfig",value:function(){this.bonusPos=null,this.curve=null,this.isUp=null,this.animateType=null,this.count=0,this.timer=null,this.isStop=!0,this.isBonus=!0}},{key:"initDom",value:function(){this.dom_btn_text=this.getChildByName("btn_text")}},{key:"initEvent",value:function(){this.dom_btn_text.on(Laya.Event.CLICK,this,this.clickHandler)}},{key:"clickHandler",value:function(){this.clickHandlerCallBack(this)}},{key:"enter",value:function(t,e){var i=this;l(this.timer),this.timer=null,this.isStop=!1,this.count=0;var n=this.curve.get(0),o=n.x,r=n.y;this.pos(o,r),this.scaleX=0,this.scaleY=0;var a=function n(){if(i.isStop){var o=i.getChildAt(0);o.once(Laya.Event.STOPPED,i,function(){t&&t(e)}),o.play(i.animateType+"_start",!1),l(i.timer),i.timer=null}else{i.count+=3.5,i.count>=100&&(i.count=100,i.isStop=!0);var r=i.count,a=r/100,s=i.curve.get(a),u=s.x,h=s.y;i.scaleX=a,i.scaleY=a,i.pos(u,h),i.timer=c(n)}};this.timer=c(a)}},{key:"exit",value:function(t,e){var i=this;l(this.timer),this.timer=null,this.isStop=!1,this.count=100;var n=this.curve.get(1),o=n.x,r=n.y;this.pos(o,r),this.scaleX=1,this.scaleY=1;var a=function n(){if(i.isStop){var o=i.getChildByName("angle");o&&o.destroy(!0),i.removeSelf(),t&&t(e),l(i.timer),i.timer=null}else{i.count+=-3.5,i.count<=0&&(i.count=0,i.isStop=!0);var r=i.count,a=r/100,s=i.curve.get(a),u=s.x,h=s.y;i.scaleX=a,i.scaleY=a,i.pos(u,h),i.timer=c(n)}};this.timer=c(a)}},{key:"cancelAngle",value:function(t,e,i){var n=this.getChildByName("angle");n.once(Laya.Event.STOPPED,this,function(){t(i),e(i)}),n.play(this.animateType+"_start",!1)}},{key:"rotateAnimate",value:function(t){var e=this,i=this.getChildAt(0);i.once(Laya.Event.STOPPED,this,function(){Laya.timer.once(50,e,function(){t&&t()})}),i.play(this.animateTypeNoBonus+"_start",!1)}},{key:"addCurve",value:function(t){return this.curve=t,this}},{key:"addIsUpProperty",value:function(t){this.isUp=t,this.upOrDown=this.isUp?"up":"down",this.animateTypeNoBonus=this.upOrDown+"_no";var e=this.dom_btn_text.y;return this.dom_btn_text.y=t?e+10:e-10,this}},{key:"removeBonusIcon",value:function(){this.isBonus=!1,this.animateType=this.animateTypeNoBonus,this.getChildByName("angle").play(this.upOrDown+"_no_static",!1)}},{key:"renderSkin",value:function(t,e){var i=1===e?"yes":"no";this.isBonus=Boolean(e),this.color=t,this.animateType=this.upOrDown+"_"+i,this.createAnimate(t),this.getChildByName("angle").play(this.animateType+"_static",!1)}},{key:"createAnimate",value:function(t){var e=this.getChildByName("angle");e&&e.destroy(!0);var i=h[Number(t)-1],n=new Laya.Templet,o=Laya.loader.getRes;n.parseData(o("images/animation/triangle/"+i+".png"),o("images/animation/triangle/"+i+".sk"));var r=n.buildArmature();r.pos(61,61),r.name="angle",this.addChildAt(r,0)}}]),e}(u);s.AngleView=f},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=window.app,u=window.bigPrizePopUI,c=window.Sail,l=function(t){function e(){var t;n(this,e);for(var i=arguments.length,r=Array(i),a=0;a<i;a++)r[a]=arguments[a];var s=o(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(r)));return s.init(),s}return r(e,t),a(e,[{key:"init",value:function(){this.initDom(),this.initConfig(),this.registerAction()}},{key:"registerAction",value:function(){s.observer.subscribe("bigPrisePopShow",this.myShow.bind(this))}},{key:"initDom",value:function(){this.addSkeleton("fantastic",{x:392,y:245}),this.addSkeleton("perfect",{x:368,y:245}),this.addSkeleton("fudai",{x:392,y:265}),this.dom_award=this.getChildByName("dom_award"),this.dom_award.visible=!1}},{key:"addSkeleton",value:function(t,e){var i=e.x,n=e.y,o=c.Utils.createSkeleton("images/animation/"+t);o.pos(i,n),o.visible=!1,this.addChildAt(o,1),this["dom_"+t]=o}},{key:"initConfig",value:function(){this.config={}}},{key:"myShow",value:function(t,e,i){var n=this,o=this["dom_"+t],r=(Laya.stage.width-this.width)/2,a=(Laya.stage.height-this.height)/2,s=0;"fudai"===t&&(s=300),o.visible=!0,o.once(Laya.Event.STOPPED,this,function(){n.myClose(),o.visible=!1,i&&i()}),o.play("start",!1),this.pos(r,a),Laya.timer.once(s,this,function(){n.dom_award.text=e,n.dom_award.visible=!0,Laya.Tween.from(n.dom_award,{alpha:0,scaleX:3,scaleY:2},200,Laya.Ease.linearIn),Laya.stage.addChild(n)})}},{key:"myClose",value:function(){this.dom_award.visible=!1,this.removeSelf()}}]),e}(u);s.BigPrizePopUIView=l},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=window.app,u=window.commonPopUI,c=function(t){function e(){var t;n(this,e);for(var i=arguments.length,r=Array(i),a=0;a<i;a++)r[a]=arguments[a];var s=o(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(r)));return s.init(),s}return r(e,t),a(e,[{key:"init",value:function(){this.initDom(),this.initEvent(),this.initConfig(),this.registerAction()}},{key:"registerAction",value:function(){s.observer.subscribe("commonPopShow",this.myShow.bind(this)),s.observer.subscribe("commonPopHide",this.close.bind(this))}},{key:"initDom",value:function(){this.btn_cancel=this.getChildByName("btn_cancel"),this.btn_myClose=this.getChildByName("btn_myClose"),this.btn_confirm=this.getChildByName("btn_confirm"),this.dom_text=this.text_box.getChildByName("text")}},{key:"initEvent",value:function(){this.btn_cancel.on(Laya.Event.CLICK,this,this.myClose),this.btn_myClose.on(Laya.Event.CLICK,this,this.myClose),this.btn_confirm.on(Laya.Event.CLICK,this,this.myConfirm)}},{key:"initConfig",value:function(){this.config={confirmCallBack:null,cancelCallBack:null}}},{key:"myShow",value:function(t,e,i,n){var o=this;this.config.confirmCallBack=e,this.config.cancelCallBack=i,this.dom_text.text=t,this.dom_text.y=(this.text_box.height-this.dom_text.height)/2,this.popup(),"number"==typeof n&&Laya.timer.once(1500,this,function(){o.myClose()}),"function"==typeof i&&(window.UIConfig.closeDialogOnSide=!1)}},{key:"myClose",value:function(){"function"==typeof this.config.cancelCallBack&&(this.config.cancelCallBack(),this.config.cancelCallBack=null),this.close(),window.UIConfig.closeDialogOnSide=!0}},{key:"myConfirm",value:function(){"function"==typeof this.config.confirmCallBack&&(this.config.confirmCallBack(),this.config.confirmCallBack=null),this.close()}}]),e}(u);s.CommonPopUIDialog=c},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=window.app,u=function(t){function e(){n(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.sceneName="loadingScene",t.init(),t}return r(e,t),a(e,[{key:"init",value:function(){this.initDom(),this.initConfig(),this.initState(),s.observer.subscribe(this.sceneName+"_enter",this.onEnter.bind(this))}},{key:"onEnter",value:function(){s.setViewCenter(),s.utils.log(this.sceneName+" enter"),s.observer.unsubscribe(this.sceneName+"_enter")}},{key:"initDom",value:function(){this.dom={};var t=this.middle_box.getChildByName("process_box");this.dom.green_box=t.getChildByName("green_box"),this.dom.green=this.dom.green_box.getChildByName("green"),this.dom.light=this.dom.green_box.getChildByName("light");var e=this.middle_box.getChildByName("logo_box");this.dom.logo=e.getChildByName("logo")}},{key:"initConfig",value:function(){this.config={},this.config.MAX_WIDTH=736}},{key:"initState",value:function(){this.dom.green.width=0,this.dom.green_box.width=0,this.dom.light.right=0}},{key:"loading",value:function(t){var e=Math.floor(100*t),i=e/100*this.config.MAX_WIDTH;i=i<30?30:i,this.dom.green.width=i,this.dom.green_box.width=i}},{key:"onExit",value:function(){s.utils.log(this.sceneName+" exit"),s.observer.publish(this.sceneName+"_exit"),this.clear()}},{key:"clear",value:function(){this.destroy(!0)}}]),e}(window.loadingUI);s.LoadingScene=u},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=window.app,u=window.Bezier,c=window.main_triangleUI,l=s.data,h=l.COLOR_TO_NUMBER,f=l.ALL_ANGLE,p=l.BEZIER_MIDDLEPOS,d=l.END_POSITION_LIST,m=l.CANCEL_LIGHT_POS,g=l.LIGHT_AND_INDEX_TABLE,y=function(t){function e(){var t;n(this,e);for(var i=arguments.length,r=Array(i),a=0;a<i;a++)r[a]=arguments[a];var s=o(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(r)));return s.init(),s}return r(e,t),a(e,[{key:"init",value:function(){this.initDom(),this.initConfig(),this._createBezierCurve(),this.registerAction()}},{key:"dispatchAction",value:function(t){var e=JSON.parse(JSON.stringify(f));this.enter(e,t)}},{key:"registerAction",value:function(){}},{key:"initDom",value:function(){this.dom_angle_box=this.getChildByName("angle_box"),this.dom_cancel_box=this.getChildByName("cancel_box"),this.dom_yellow_light=this.getChildByName("yellow_light"),this.dom_yellow_light.stop(),this.dom_yellow_light.visible=!1}},{key:"initConfig",value:function(){var t=this.createAngleChildren(),e=this._createCancelLight();this.config={bezierStartPos:{x:580,y:485},currentBetCallBack:null,exitCompleted:!0,gameData:{},isBonusWork:!1,bonusSelectedList:[],angleList:t,cancelLightList:e}}},{key:"createAngleChildren",value:function(){var t=this,e=function(e){var i=t.config.angleList.indexOf(e),n=t._localIndexToServer(i);if(t.config.isBonusWork){var o=t.config.bonusSelectedList;!o.includes(e)&&o.length<3?(o.push(e),e.rotateAnimate(function(){e.renderSkin(8,e.isBonus),s.messageCenter.emit("bonus",{pos:n})}),s.audio.play("change"),s.utils.log(n,"bonus 生效")):s.utils.log(n,"bonus 已选")}else s.utils.log(n,"bonus 无效")};return d.map(function(t,i){return new s.AngleView(e)})}},{key:"serverDataHandler",value:function(t){var e=this,i=[],n=[];return t.forEach(function(t,i){var o=e._serverIndexToLocal(t.n);t.n=o,n.push(o)}),n.sort(function(t,e){return t-e}),n.forEach(function(e,n){for(var o=0;o<t.length;o++)if(t[o].n===e){i.push(t.splice(o,1)[0]),o--;break}}),i}},{key:"testTime",value:function(t,e){var i=Date.now();t(e);var n=Date.now();console.log(n-i)}},{key:"recoverBonus",value:function(t,e){var i=this,n=t.initial;t.replace.forEach(function(t,e){for(var o=0,r=n.length;o<r;o++)if(n[o].n===t){n[o].c=8;var a=i._serverIndexToLocal(t);i.config.bonusSelectedList.push(i.config.angleList[a]);break}}),this.enter(n,e)}},{key:"gameDataCome",value:function(t,e){this.config.gameData=t,this.config.currentBetCallBack=e,this.startGameDataRender()}},{key:"startGameDataRender",value:function(){var t=this.config,e=t.gameData;e.initial&&e.initial.length&&t.exitCompleted&&this.enter(e.initial,this.config.currentBetCallBack)}},{key:"enter",value:function(t,e){var i=this;this.config.exitCompleted=!1,t=this.serverDataHandler(t);var n=function(t){if(8===t&&s.audio.play("rotate"),0===t){i.isBonusWorkFn();var n=i.config.gameData;if(n.change&&n.change.length){var o=n.change.splice(0,1)[0];n.bpAmount?(s.observer.publish("bigPrisePopShow","fudai",n.bpAmount,i.cancelAngle.bind(i,o,e)),s.observer.publish("winOpen",n.bpAmount),s.observer.publish("updateUserYuDou",n.bpAmount),s.audio.play("fudai"),n.bpAmount=0):i.cancelAngle(o,e)}else e&&e();s.utils.log("进场结束。。。")}},o=this.computeWhichAngle(t),r=o.length,a=this.dom_angle_box;o.forEach(function(e,o){Laya.timer.once(80*(r-o),i,function(){var i=t[o];e.renderSkin(i.c,i.b),a.addChildAt(e,0),e.enter(n,o),s.audio.play("enter")})})}},{key:"exit",value:function(){var t=this;if(!this.config.exitCompleted){var e=this.config.angleList,i=e.length-1,n=function(e){e===i&&(t.config.exitCompleted=!0,t.startGameDataRender(),s.utils.log("离场结束。。。"))};e.forEach(function(e,i){Laya.timer.once(60*i,t,function(){e.exit(n,i)})}),s.audio.play("exit",2)}}},{key:"cancelAngle",value:function(t,e,i){var n=this;if(t.remove.length>0){var o=t.remove.splice(0,1)[0],r=this.serverDataHandler(o.triangle);this.addCancelLight(r,o.prize_color,o.prize_amount);var a=this.computeWhichAngle(r),u=this.removeAllCancelLight.bind(this),c=function(o){0===o&&(Array.isArray(i)&&(a=a.concat(i)),n.cancelAngle(t,e,a),s.utils.log("继续旋转。。。"))};a.forEach(function(t,e){n.dom_angle_box.setChildIndex(t,0),t.cancelAngle(u,c,e)})}else{var l=function(o){o===i.length-1&&(n.enter(t.fill,e),s.utils.log("消除结束。。。"))};i.forEach(function(t,e){n.dom_angle_box.setChildIndex(t,0),t.exit(l,e)}),s.audio.play("exit")}}},{key:"removeAllCancelLight",value:function(t){if(0===t){this.config.cancelLightList.forEach(function(t,e){t.removeSelf()})}}},{key:"bonusCancelAngle",value:function(t,e){this.config.gameData.change=t;var i=this.config.gameData.change.splice(0,1)[0];void 0===i?e&&e():this.cancelAngle(i,e),this.dom_yellow_light.stop(),this.dom_yellow_light.visible=!1}},{key:"removeAllBonusIcon",value:function(){this.config.angleList.forEach(function(t,e){t.isBonus&&t.removeBonusIcon()})}},{key:"isBonusWorkFn",value:function(){var t=0,e=!1;this.config.angleList.forEach(function(e,i){e.isBonus&&t++}),t>=3&&(this.removeAllBonusIcon(),e=!0,this.config.bonusSelectedList.length=0,this.dom_yellow_light.play("start",!0),this.dom_yellow_light.visible=!0),s.observer.publish("leftBonusRender",t),this.config.isBonusWork=e}},{key:"_serverIndexToLocal",value:function(t){var e=void 0;switch(t=Number(t),!0){case 15===t:e=0;break;case t>=12&&t<=14:e=t-11;break;case t>=7&&t<=11:e=t-3;break;default:e=t+9}return e}},{key:"_localIndexToServer",value:function(t){var e=void 0;switch(t=Number(t),!0){case 0===t:e=15;break;case t>=1&&t<=3:e=t+11;break;case t>=4&&t<=8:e=t+3;break;default:e=t-9}return e}},{key:"_createCancelLight",value:function(){var t=[];return m.forEach(function(e,i){var n=e.x,o=e.y,r=e.direction,a=new Laya.Clip;a.skin="images/room/clip_colors.png",a.clipX=8,1===r&&(a.rotation=90,n+=69),a.pos(n,o),t.push(a)}),t}},{key:"heightLightColorToIndex",value:function(t){var e=void 0;switch(Number(t)){case 1:e=4;break;case 2:e=6;break;case 3:e=3;break;case 4:e=5;break;case 5:e=0;break;case 6:e=2;break;case 7:e=1;break;case 8:e=7}return e}},{key:"addCancelLight",value:function(t,e,i){var n=this,o=this.config.cancelLightList,r=this.heightLightColorToIndex(e),a=[],u=[],c=["0-2","1-5","3-7","4-10","6-12","8-14"];t.map(function(t,e){return t.n}).forEach(function(t,e,i){var n=!0,o=!1,r=void 0;try{for(var s,u=c[Symbol.iterator]();!(n=(s=u.next()).done);n=!0){var l=s.value,h=l.split("-");if(t===Number(h[0])&&i.includes(Number(h[1]))){a.push(l);break}}}catch(t){o=!0,r=t}finally{try{!n&&u.return&&u.return()}finally{if(o)throw r}}var f=i[e+1];void 0!==f&&a.push(t+"-"+f)}),a.forEach(function(t,e){var i=g[t];void 0!==i&&u.push(i)}),u.forEach(function(t,e){var i=o[t];i.index=r,n.dom_cancel_box.addChild(i)});var l=o[Math.min.apply(Math,u)],h=l.x,f=l.y;this.awardFontAnimate(i,{x:h,y:f},e),s.observer.publish("winOpen",i),s.observer.publish("rightBaseRender",e),s.audio.play("line")}},{key:"awardFontAnimate",value:function(t,e,i){var n=e.x,o=e.y,r=new Laya.Label;r.font=h[Number(i)-1],r.text=t,r.pos(n-50,o-100),this.addChild(r),Laya.timer.once(850,this,function(){r.destroy(!0)})}},{key:"_createBezierCurve",value:function(){var t=this.config,e=t.bezierStartPos,i=t.angleList;d.forEach(function(t,n){var o=p[n],r=new u(e.x,e.y,o.x,o.y,t.x-61,t.y-61);i[n].addCurve(r).addIsUpProperty(t.isUp)})}},{key:"computeWhichAngle",value:function(t){var e=this.config.angleList,i=[];return t.forEach(function(t,n){var o=e[t.n];i.includes(o)||i.push(o)}),i}}]),e}(c);s.Main_triangleView=y},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=window.app,u=window.roomUI,c=window.GM,l=window.Sail,h=s.data.LOCAL_DATA,f=function(t){function e(){n(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.sceneName="roomScene",t.init(),t}return r(e,t),a(e,[{key:"init",value:function(){this.initDom(),this.initConfig(),this.initTriangle(),this.initWinBottom(),this.initEvent(),this.fingerAnimate(),s.observer.subscribe(this.sceneName+"_enter",this.onEnter.bind(this))}},{key:"onEnter",value:function(){s.setViewCenter(),s.utils.log(this.sceneName+" enter"),s.observer.unsubscribe(this.sceneName+"_enter"),this.registerAction(),s.config.localStatus?this.triangleDefaultHandler():(this.dispatchAction(),this.initCommonGameModule(),s.audio.initSoundState(this.dom.btn_voice))}},{key:"registerAction",value:function(){s.messageCenter.registerAction("initGame",this.initGameRoomInfo.bind(this)).registerAction("bet",this.betHandler.bind(this)).registerAction("bonus",this.bonusHandler.bind(this)).registerAction("userAccount",this.renderUserAccount.bind(this)).registerAction("bigprize",this.renderFudai.bind(this)).registerAction("recover",this.recoverBonus.bind(this)).registerAction("help",this.renderRateHandler.bind(this)),s.observer.subscribe("rightBaseRender",this.rightBaseRender.bind(this)).subscribe("leftBonusRender",this.leftBonusRender.bind(this)).subscribe("resetGame",this.resetGame.bind(this)).subscribe("updateUserYuDou",this.updateUserYuDou.bind(this))}},{key:"unRegisterAction",value:function(){}},{key:"dispatchAction",value:function(){s.messageCenter.emit("initGame"),s.messageCenter.emit("help"),s.gameConfig.isLogin?(s.messageCenter.emitAjax("userAccount"),s.messageCenter.emit("recover")):this.triangleDefaultHandler()}},{key:"initConfig",value:function(){this.config={gameReady:!1,tingDou:0,yuNum:0,MIN_INPUT:100,MAX_INPUT:5e5,isFirstDefault:!1,user_input_text:100,stateSound:"true",autoTimesList:[99,40,20,10],autoTimes:0,btnStartStatus:"start_animate",bpAmount:0,winAmount:0}}},{key:"initDom",value:function(){this.dom={},this.top_box.zOrder=1,this.dom.marquee_box=this.top_box.getChildByName("marquee_box"),this.dom.marquee=this.dom.marquee_box.getChildByName("marquee"),this.dom.btn_back=this.top_box.getChildByName("btn_back"),this.dom.btn_back.visible=!1,this.dom.btn_home=this.top_box.getChildByName("btn_home"),this.dom.btn_home.visible=!1,this.dom.btn_set=this.top_box.getChildByName("btn_set"),this.dom.menu_box=this.top_box.getChildByName("menu_box"),this.dom.btn_voice=this.dom.menu_box.getChildByName("btn_voice"),this.dom.btn_help=this.dom.menu_box.getChildByName("btn_help"),this.dom.fudai_box=this.top_box.getChildByName("fudai_box"),this.dom.award_num=this.dom.fudai_box.getChildByName("award_num"),this.dom.fudai_pop=this.dom.fudai_box.getChildByName("fudai_pop"),this.dom.fudai_rate=this.dom.fudai_pop.getChildByName("fudai_rate"),this.dom.btn_rank=this.bottom_box.getChildByName("btn_rank"),this.bigTriangle=null;var t=this.bottom_box.getChildByName("input_box");this.dom.input_num=t.getChildByName("input_num"),this.dom.btn_sub=t.getChildByName("btn_sub"),this.dom.btn_add=t.getChildByName("btn_add"),this.dom.btn_max=this.bottom_box.getChildByName("btn_max");var e=this.bottom_box.getChildByName("dou_box");this.dom.btn_dou_add=e.getChildByName("btn_dou_add"),this.dom.dou_num=e.getChildByName("dou_num");var i=this.bottom_box.getChildByName("yu_box");this.dom.yu_num=i.getChildByName("yu_num"),this.dom.faster_box=this.bottom_box.getChildByName("faster_box");var n=this.bottom_box.getChildByName("start_box");this.dom.start_skeleton=n.getChildByName("start_animate"),this.dom.btn_start=n.getChildByName("btn_start"),this.dom.btn_auto=n.getChildByName("btn_auto"),this.dom.finger=n.getChildByName("finger"),this.dom.finger.stop(),this.dom.finger.visible=!1,this.dom.options_box=n.getChildByName("options_box"),this.dom.auto_times=n.getChildByName("auto_times");var o=this.middle_box.getChildByName("left_bonus");this.dom.leftBonusList=o.findType("Clip",!0),this.dom.bonus_skeleton=o.getChildByName("bonus_skeleton"),this.dom.notice_skeleton=o.getChildByName("notice_skeleton"),this.dom.notice_skeleton.play("text",!1);var r=this.middle_box.getChildByName("right_bonus");this.dom.rightBaseList=r.findType("Clip",!0),this.dom.choose_img=this.middle_box.getChildByName("choose_img");var a=l.Utils.createSkeleton("images/animation/surprise");a.pos(620,353),a.visible=!1,this.dom.boomSkeleton=a,this.middle_box.addChild(a)}},{key:"initTriangle",value:function(){var t=this.middle_box.getChildByName("triangle"),e=new s.Main_triangleView;this.bigTriangle=e,t.addChild(e)}},{key:"initWinBottom",value:function(){var t=new s.WinUIView;this.dom.win_bottom=t,this.bottom_box.getChildByName("win_box").addChild(t)}},{key:"initEvent",value:function(){var t=this,e=Laya.Event.CLICK;this.dom.input_num.on(e,this,function(){s.utils.willGotoLogin()||t.checkGameGoing()||(t.dom.faster_box.visible=!t.dom.faster_box.visible)}),this.dom.btn_sub.on(e,this,this.addSubHandler.bind(this,"sub")),this.dom.btn_add.on(e,this,this.addSubHandler.bind(this,"add")),this.dom.btn_max.on(e,this,this.maxHandler),this.dom.yu_num.on(e,this,this.yuNumPopBalanceShow),this.dom.btn_set.on(e,this,function(){t.dom.menu_box.visible=!t.dom.menu_box.visible,s.audio.play("click")}),this.dom.btn_voice.on(e,this,function(){s.audio.changeSoundState(t.dom.btn_voice)}),this.dom.btn_help.on(e,this,function(){t.dom.menu_box.visible=!1,s.observer.publish("helpPopShow"),s.audio.play("click")}),this.dom.btn_rank.on(e,this,function(){s.messageCenter.emit("top3"),s.audio.play("click")}),this.dom.btn_dou_add.on(e,this,function(){s.utils.willGotoLogin()||(s.observer.publish("rechargePopShow"),s.audio.play("click"))}),this.dom.faster_box.findType("Box",!0).forEach(function(i,n){i.on(e,t,function(){s.audio.play("click");var e=i.findType("Label").text;t.updateDomInput(e),t.dom.faster_box.visible=!1})}),this.dom.btn_start.on(e,this,function(){if(!s.utils.willGotoLogin()&&t.config.gameReady&&t.isMoneyEnough()){var e=t.config.btnStartStatus;"start_animate"===e?(t.btnStartHandler(!1),s.audio.play("click")):"start_static"===e?console.warn("游戏进行中，不可点..."):(t.startBoxRender("start_static"),s.audio.play("click"))}}),this.dom.btn_auto.on(e,this,function(){s.utils.willGotoLogin()||(s.audio.play("click"),t.dom.options_box.visible=!t.dom.options_box.visible)}),this.dom.options_box.findType("Box",!0).forEach(function(i,n){i.on(e,t,function(){t.dom.options_box.visible=!1,t.config.gameReady&&(s.audio.play("click"),t.config.autoTimes=t.config.autoTimesList[n],t.btnStartHandler(!0))})}),this.dom.fudai_box.on(e,this,function(){s.audio.play("click"),t.dom.fudai_pop.visible=!t.dom.fudai_pop.visible}),Laya.stage.on(e,this,function(e){if(e){var i=e.target,n=t.dom.menu_box,o=t.dom.faster_box,r=t.dom.options_box,a=t.dom.fudai_pop;(n.visible||o.visible||r.visible||a.visible)&&(a.visible&&i!==t.dom.fudai_box&&i!==a&&!a.contains(i)&&(a.visible=!1),n.visible&&i!==t.dom.btn_set&&i!==n&&!n.contains(i)&&(n.visible=!1),o.visible&&i!==t.dom.input_num&&i!==o&&!o.contains(i)&&(o.visible=!1),r.visible&&i!==t.dom.btn_auto&&i!==r&&!r.contains(i)&&(r.visible=!1))}})}},{key:"isMoneyEnough",value:function(){var t=this.config,e=t.user_input_text;if(t.yuNum>=e||t.tingDou>=e)return!0;var i=function(){s.observer.publish("rechargePopShow")};return s.observer.publish("commonPopShow","余额不足，请确定后充值",i),!1}},{key:"randomData",value:function(){for(var t=[],e=0;e<16;e++)t.push({n:e,c:s.utils.randomNumber(1,8),b:s.utils.randomNumber(1)});return console.log(++s.gameConfig.count),h}},{key:"initGameRoomInfo",value:function(t){if(0!==Number(t.code))return void this.gameModule.errorHandler(t);this.dom.award_num.text=t.bigprize}},{key:"triangleDefaultHandler",value:function(){var t=this,e=function(){t.config.gameReady=!0};this.config.gameReady=!1,this.bigTriangle.dispatchAction(e.bind(this))}},{key:"recoverBonus",value:function(t){var e=this;if(0===Number(t.code)&&"initial"in t){var i=function(){e.config.gameReady=!0};this.startBoxRender("start_static"),this.chooseImgNotice(),this.bigTriangle.recoverBonus(t,i)}else this.triangleDefaultHandler()}},{key:"renderFudai",value:function(t){if(0!==Number(t.code))return void this.gameModule.errorHandler(t);this.dom.award_num.text=t.amount}},{key:"startBoxRender",value:function(t){switch(t){case"start_static":this.dom.btn_auto.visible=!1,this.dom.auto_times.visible=!1,this.config.autoTimes=0;break;case"start_animate":this.dom.btn_auto.visible=!0,this.dom.auto_times.visible=!1,this.config.autoTimes=0;break;case"stop_static":this.dom.btn_auto.visible=!1,this.dom.auto_times.visible=!1;break;case"stop_animate":if(this.dom.btn_auto.visible=!1,this.dom.auto_times.visible=!0,0==--this.config.autoTimes)return void this.startBoxRender("start_static");this.dom.auto_times.text=this.config.autoTimes}this.config.btnStartStatus!==t&&(this.config.btnStartStatus=t,this.dom.start_skeleton.play(t,!0))}},{key:"resetGame",value:function(){this.startBoxRender("start_animate")}},{key:"btnStartHandler",value:function(t){t?!0===this.config.autoTimes?this.startBoxRender("stop_static"):this.startBoxRender("stop_animate"):this.startBoxRender("start_static"),this.leftBonusRender(0),this.dom.win_bottom.winClose(),this.bigTriangle.exit(),s.messageCenter.emit("bet",{amount:this.config.user_input_text,isAuto:Number(t)}),s.config.localStatus&&this.betHandler(this.randomData()),Laya.timer.once(3e4,this,this.triangleDefaultHandler)}},{key:"awardPopShow",value:function(t){var e=this,i=function(){e.updateUserYuDou(e.config.winAmount),e.config.winAmount=0,e.config.bpAmount=0,"start_static"===e.config.btnStartStatus||0===e.config.autoTimes?e.startBoxRender("start_animate"):e.btnStartHandler(!0)};if(0===this.config.winAmount)return this.gameModule&&this.gameModule.jiujijin(),void i();if(t)s.observer.publish("surprisePopShow",this.config.winAmount,function(){i(),s.audio.stopAllSound()}),s.audio.play("fudai");else{var n=Math.floor(this.config.winAmount/this.config.user_input_text);switch(!0){case n<5:i();break;case n>=5&&n<10:s.observer.publish("bigPrisePopShow","fantastic",this.config.winAmount,i),s.audio.play("win"),s.audio.play("fantastic");break;case n>=10:s.observer.publish("bigPrisePopShow","perfect",this.config.winAmount,i),s.audio.play("win"),s.audio.play("perfect")}}}},{key:"betHandler",value:function(t){var e=this;if(Laya.timer.clear(this,this.triangleDefaultHandler),0!==Number(t.code))return this.resetGame(),this.gameModule.errorHandler(t),void Laya.timer.once(1e3,this,function(){e.triangleDefaultHandler()});switch(s.gameConfig.isLogin&&!s.config.localStatus&&(this.updateUserYuDou(-1*this.config.user_input_text),c.CookieUtil.set("defaultBet"+c.gameId+c.user_id,String(this.config.user_input_text))),Number(t.type)){case 2:this.bigTriangle.gameDataCome(t,this.chooseImgNotice.bind(this)),!0===this.config.autoTimes&&this.startBoxRender("start_static");break;default:this.config.winAmount=Number(t.winAmount)||0,this.config.bpAmount=Number(t.bpAmount)||0,this.bigTriangle.gameDataCome(t,this.awardPopShow.bind(this))}}},{key:"bonusHandler",value:function(t){if(0!==Number(t.code))return this.resetGame(),void this.gameModule.errorHandler(t);"result"in t&&(!0===this.config.autoTimes&&(this.config.autoTimes=0),this.leftBonusRender(0),this.config.winAmount=Number(t.winAmount),this.dom.bonus_skeleton.play("bonus_no",!0),this.dom.notice_skeleton.play("text",!1),this.bigTriangle.bonusCancelAngle(t.result,this.awardPopShow.bind(this,!0)))}},{key:"checkGameGoing",value:function(){if("start_animate"!==this.config.btnStartStatus)return console.warn("游戏进行中，不可点..."),!0}},{key:"maxHandler",value:function(){if(!s.utils.willGotoLogin()&&!this.checkGameGoing()){s.audio.play("click");var t=this.config.yuNum,e=this.config.tingDou,i=t>e?t:e;i-=i%100,i=i<this.config.MIN_INPUT?this.config.MIN_INPUT:i,i=i>this.config.MAX_INPUT?this.config.MAX_INPUT:i,this.updateDomInput(Number(i))}}},{key:"addSubHandler",value:function(t){if(!this.checkGameGoing()){s.audio.play("click");var e=this.config.MAX_INPUT,i=this.config.MIN_INPUT,n=this.config.user_input_text,o=100;"sub"===t?n<=1e3?o=-100:n>1e3&&n<=1e4?(o=-1e3,n<2e3&&(o=-100)):n>1e4&&n<=1e5?(o=-1e4,n<2e4&&(o=-1e3)):n>1e5&&n<=1e6&&(o=-1e5,n<2e5&&(o=-1e4)):"add"===t&&(n>=1e3&&n<1e4?o=1e3:n>=1e4&&n<1e5?o=1e4:n>=1e5&&(o=1e5)),n+=o,n=n>e?e:n,n=n<i?i:n,this.updateDomInput(n)}}},{key:"updateDomInput",value:function(t){var e=Number(t);this.dom.input_num.text=e,this.config.user_input_text=e}},{key:"myPromise",value:function(t,e){return new Promise(function(i,n){Laya.timer.once(e,t,i)})}},{key:"leftBonusRender",value:function(t){var e=this.dom.leftBonusList;e.forEach(function(t,e){t.index=0,t.scaleX=1,t.scaleY=1});for(var i=0;i<t&&(e[i].index=1,e[i].scaleX=1.1,e[i].scaleY=1.1,2!==i);i++);}},{key:"rightBaseRender",value:function(t){var e=this.dom.rightBaseList[Number(t)-1];e.index=1,Laya.timer.once(1500,this,function(){e.index=0})}},{key:"chooseImgNotice",value:function(){var t=this,e=this.dom.choose_img,i=this.dom.boomSkeleton;i.once(Laya.Event.STOPPED,this,function(){i.visible=!1,e.x=0,e.visible=!0,Laya.Tween.to(e,{x:440},500,Laya.Ease.backOut,Laya.Handler.create(t,function(){Laya.Tween.to(e,{x:1334},500,Laya.Ease.backIn,Laya.Handler.create(t,function(){e.visible=!1}),2e3)}))}),i.visible=!0,i.play("start",!1),this.dom.bonus_skeleton.play("bonus_yes",!0),this.dom.notice_skeleton.play("start",!0),s.audio.play("bonus")}},{key:"renderUserAccount",value:function(t){var e=Number(t.TCoin)||0,i=Number(t.total)-e,n=void 0;if(this.config.tingDou=e,this.config.yuNum=i,this.dom.dou_num.text=s.utils.getActiveStr(e),this.dom.yu_num.text=s.utils.getActiveStr(i),!this.config.isFirstDefault){this.config.isFirstDefault=!0;var o=c.CookieUtil.get("defaultBet"+c.gameId+c.user_id);o=o?parseInt(o,10):null,n=o&&o<=i?o:this.gameModule.defaultInputNotice(e,i),this.updateDomInput(n),s.observer.publish("commonPopShow","默认投币额："+n,null,null,1500)}}},{key:"updateUserYuDou",value:function(t){if(t>=0)this._updateUserYu(t);else switch(!0){case this.config.tingDou+t>=0:this._updateUserDou(t);break;case this.config.yuNum+t>=0:this._updateUserYu(t);break;default:s.messageCenter.emitAjax("userAccount")}}},{key:"_updateUserYu",value:function(t){this.config.yuNum=this.config.yuNum+t,this.dom.yu_num.text=s.utils.getActiveStr(this.config.yuNum)}},{key:"_updateUserDou",value:function(t){this.config.tingDou=this.config.tingDou+t,this.dom.dou_num.text=s.utils.getActiveStr(this.config.tingDou)}},{key:"yuNumPopBalanceShow",value:function(){s.audio.play("click"),s.utils.willGotoLogin()||(c&&1===c.isCall_out&&c.popBalanceShow_out&&c.popBalanceShow_out(c.gameType),s.messageCenter.emitAjax("userAccount"))}},{key:"initCommonGameModule",value:function(){var t=new s.CommonGameModule;t.noticeSystem(this.dom.menu_box,237),t.isShowBtnBackHandler(this.dom.btn_back),t.isShowBtnHomeHandler(this.dom.btn_home),t.initMarquee(this.dom.marquee),this.gameModule=t}},{key:"fingerAnimate",value:function(){var t=this,e=this.dom.finger,i=function(){t.checkGameGoing()?Laya.stage.event(Laya.Event.CLICK):(e.visible=!0,e.play("start",!0))},n=function(){Laya.timer.once(3e4,t,i),e.visible&&(e.visible=!1,e.stop())};n(),Laya.stage.on(Laya.Event.CLICK,this,function(){Laya.timer.clear(t,i),n()})}},{key:"renderRateHandler",value:function(t){this.dom.fudai_rate.text=t.max+"%",s.observer.publish("helpRenderTate",t)}},{key:"onExit",value:function(){s.utils.log(this.sceneName+" exit"),this.unRegisterAction(),s.observer.publish(this.sceneName+"_exit"),this.clear()}},{key:"clear",value:function(){this.destroy(!0)}}]),e}(u);s.RoomScene=f},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=window.app,u=window.surprisePopUI,c=window.Sail,l=function(t){function e(){var t;n(this,e);for(var i=arguments.length,r=Array(i),a=0;a<i;a++)r[a]=arguments[a];var s=o(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(r)));return s.init(),s}return r(e,t),a(e,[{key:"init",value:function(){this.initDom(),this.initConfig(),this.initEvent(),this.registerAction()}},{key:"registerAction",value:function(){s.observer.subscribe("surprisePopShow",this.myShow.bind(this))}},{key:"initDom",value:function(){var t=c.Utils.createSkeleton("images/animation/bonusAward");t.pos(660,368),this.pop_box.addChildAt(t,0),this.dom_animate=t;var e=c.Utils.createSkeleton("images/animation/coins");e.pos(673,781),this.pop_box.addChildAt(e,0),this.dom_coins=e,this.dom_award=this.pop_box.getChildByName("dom_award"),this.btn_close=this.pop_box.getChildByName("btn_close")}},{key:"initEvent",value:function(){this.btn_close.on(Laya.Event.CLICK,this,this.myClose)}},{key:"initConfig",value:function(){this.config={closedCallBack:null}}},{key:"coinsAnimation",value:function(){var t=this;this.dom_coins.once(Laya.Event.STOPPED,this,function(){t.dom_coins.play("loop",!0)}),this.dom_coins.play("start",!1)}},{key:"myShow",value:function(t,e){var i=this;this.height=Laya.stage.height,this.dom_award.text=t,this.dom_award.alpha=0,this.config.closedCallBack=e,this.dom_animate.once(Laya.Event.STOPPED,this,function(){Laya.timer.once(1500,i,function(){i.dom_coins.stop(),i.myClose()})}),this.dom_animate.play("start",!1),this.coinsAnimation(),Laya.Tween.to(this.dom_award,{alpha:1},500,Laya.Ease.linearIn,null,600),Laya.stage.addChild(this)}},{key:"myClose",value:function(){this.parent&&(this.config.closedCallBack&&this.config.closedCallBack(),this.config.closedCallBack=null,this.removeSelf())}}]),e}(u);s.SurprisePopUIView=l},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=window.app,u=window.winUI,c=function(t){function e(){var t;n(this,e);for(var i=arguments.length,r=Array(i),a=0;a<i;a++)r[a]=arguments[a];var s=o(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(r)));return s.init(),s}return r(e,t),a(e,[{key:"init",value:function(){this.initDom(),this.initConfig(),this.registerAction()}},{key:"registerAction",value:function(){s.observer.subscribe("winOpen",this.winOpen.bind(this)).subscribe("winClose",this.winClose.bind(this))}},{key:"initDom",value:function(){this.win_text.visible=!1,this.win_skeleton.play("close_static",!1)}},{key:"initConfig",value:function(){this.config={award:0}}},{key:"winOpen",value:function(t){var e=this,i=Number(t);if(0!==this.config.award)return this.config.award=this.config.award+i,void(this.win_text.text=this.config.award);this.config.award=i,this.win_skeleton.once(Laya.Event.STOPPED,this,function(){e.win_text.text=String(e.config.award),e.win_text.visible=!0}),this.win_skeleton.play("open_animate",!1)}},{key:"winClose",value:function(){0!==this.config.award&&(this.win_text.visible=!1,this.config.award=0,this.win_skeleton.play("close_animate",!1))}}]),e}(u);s.WinUIView=c},function(t,e){(function(e){t.exports=e}).call(e,{})},function(t,e,i){i(7),i(9),i(10),i(8),i(1),i(2),i(3),i(4),i(5),i(6),i(20),i(19),i(21),i(22),i(23),i(24),i(25),i(26),i(27),i(28),i(16),i(17),i(18),i(12),i(13),i(14),i(15),i(11),t.exports=i(0)}]);